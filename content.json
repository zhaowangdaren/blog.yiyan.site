{"meta":{"title":"yiyan.site","subtitle":null,"description":null,"author":"yiyan.site","url":"https://yiyan.site"},"pages":[{"title":"","date":"2018-07-16T06:08:16.133Z","updated":"2018-07-15T00:07:28.000Z","comments":true,"path":"manifest.json","permalink":"https://yiyan.site/manifest.json","excerpt":"","text":"{\"name\":\"App\",\"icons\":[{\"src\":\"/android-icon-36x36.png\",\"sizes\":\"36x36\",\"type\":\"image/png\",\"density\":\"0.75\"},{\"src\":\"/android-icon-48x48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\",\"density\":\"1.0\"},{\"src\":\"/android-icon-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\",\"density\":\"1.5\"},{\"src\":\"/android-icon-96x96.png\",\"sizes\":\"96x96\",\"type\":\"image/png\",\"density\":\"2.0\"},{\"src\":\"/android-icon-144x144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\",\"density\":\"3.0\"},{\"src\":\"/android-icon-192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\",\"density\":\"4.0\"}]}"},{"title":"å…³äº","date":"2018-09-08T04:18:25.000Z","updated":"2018-12-14T01:42:44.587Z","comments":true,"path":"about/index.html","permalink":"https://yiyan.site/about/index.html","excerpt":"","text":"æ”¯ä»˜å®æ‰«ç é¢†å–çº¢åŒ… æ‰«ç å…³æ³¨å…¬ä¼—å·:ç¨‹åºå‘˜çš„è„‘æ´"}],"posts":[{"title":"æŠ›å¼ƒcontenteditableï¼Œå®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨","slug":"html-editor","date":"2020-04-03T09:45:17.000Z","updated":"2020-04-12T08:44:27.069Z","comments":true,"path":"2020/04/03/html-editor/","link":"","permalink":"https://yiyan.site/2020/04/03/html-editor/","excerpt":"","text":"æœ‰æ—¶å€™ä½¿ç”¨contenteditable=trueæ¥å®ç°ç¼–è¾‘å™¨å¹¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ ç§»åŠ¨ç«¯ä½¿ç”¨contenteditable=trueçš„ä¸€äº›ä¸æˆé—®é¢˜çš„é—®é¢˜ä½¿ç”¨contenteditable=trueå®ç°ç¼–è¾‘å™¨ï¼Œç»è¿‡ä¸æ–­çš„ä¼˜åŒ–ï¼Œæ˜¯å¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜çš„ã€‚ä¸‹é¢ä¸€ä¸€åˆ—å‡ºä¸€äº›é—®é¢˜åŠå…¶è§£å†³æ–¹æ³•ã€‚ é—®é¢˜ä¸€ï¼šæ’å…¥è¶…é“¾æ¥å’Œå›¾ç‰‡å¦‚æœä¸æ˜¯å¤åˆ¶ç²˜è´´çš„æ–¹å¼æ’å…¥ï¼Œè€Œæ˜¯é‡‡ç”¨ç‚¹å‡»å·¥å…·æ ï¼Œç¼–è¾‘è¶…é“¾æ¥æˆ–è€…æ˜¯è°ƒç”¨ç›¸å†Œçš„æ–¹å¼æ’å…¥ï¼Œåˆ™ä¸­é—´ä¼šå‡ºç°ç„¦ç‚¹ä¸¢å¤±ï¼Œé‚£ä¹ˆå¦‚ä½•å®ç°æ’å…¥çš„å›¾ç‰‡åœ¨ç„¦ç‚¹çš„ä½ç½®ï¼Ÿè§£å†³æ–¹æ³•æ˜¯ï¼š 1ã€åœ¨ç‚¹å‡»ç”¨æˆ·å·¥å…·æ æ—¶ï¼Œè®°å½•ç„¦ç‚¹ä½ç½®ã€‚æˆªè·ç”¨æˆ·ç‚¹å‡»æœ€å¥½é‡‡ç”¨touchstartäº‹ä»¶ï¼Œé¿å…è®°å½•çš„ç„¦ç‚¹ä½ç½®ä¸æ˜¯ç¼–è¾‘åŒºå†…ã€‚ 12var selection = getSelection()this.globalRange = selection.getRangeAt(0) 2ã€åœ¨è·å–åˆ°å›¾ç‰‡èµ„æºåï¼Œåˆ©ç”¨this.globalRangeæ’å…¥å›¾ç‰‡èŠ‚ç‚¹ 123// åˆ›å»ºå›¾ç‰‡èŠ‚ç‚¹var imgNode = this.createImgNode(src)this.globalRange.insertNode(imgNode) é—®é¢˜äºŒï¼šå…‰æ ‡ä½ç½®æœ‰äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦çŸ¥é“å…‰æ ‡çš„ä½ç½®ï¼Œtopã€leftæ˜¯å¤šå°‘ã€‚å¯ä»¥ä½¿ç”¨getSelection().focusNode()è·å–åˆ°èšç„¦çš„èŠ‚ç‚¹ï¼Œæœ‰æ—¶å¾—åˆ°çš„èŠ‚ç‚¹æ˜¯textç±»å‹ï¼ˆæ²¡æœ‰topã€leftå±æ€§ï¼‰ï¼Œå¯ä»¥é€šè¿‡é€šè¿‡å…¶çˆ¶èŠ‚ç‚¹å¤§è‡´å¾—åˆ°ä½ç½®ã€‚æ‰€ä»¥ï¼Œåªæ˜¯å¾—ä¸åˆ°å‡†ç¡®çš„ä½ç½®ã€‚ ä¸ºä»€ä¹ˆè¦å¾—åˆ°å…‰æ ‡ä½ç½®ï¼ŸiOSç«¯é”®ç›˜å¼¹å‡ºåï¼Œposition:fixedçš„æ•ˆæœå‘ç”Ÿäº†å˜åŒ–ï¼Œéš¾ä»¥å›ºå®šdomã€‚æ‰€ä»¥ï¼Œå¦‚æœå­˜åœ¨å·¥å…·æ ï¼Œå¯ä»¥å°†å·¥å…·æ è·Ÿéšå…‰æ ‡ï¼Œæå‡ä¸€ç‚¹ç‚¹ä½“éªŒã€‚ é—®é¢˜ä¸‰ï¼šåˆ é™¤å›¾ç‰‡éœ€æ±‚çš„è®¾è®¡ç¨¿æ˜¯è¦æ±‚å›¾ç‰‡å·¦ä¸Šè§’æœ‰ä¸€ä¸ªXæŒ‰é’®ï¼Œæ¥åˆ é™¤å›¾ç‰‡ã€‚ å¦‚æœä¸å¯¹è¿™ä¸ªè¿™ä¸ªåˆ é™¤æŒ‰é’®æ·»åŠ å±æ€§ï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥ç¼–è¾‘è¿™ä¸ªæŒ‰é’®ï¼Œè™½ç„¶å½±å“ä¸å¤§ï¼Œå¯¼è‡´è¿™ä¸ªåˆ é™¤æŒ‰é’®çš„æ„ä¹‰è¡ç„¶æ— å­˜ã€‚è®²é“ç†ï¼Œè¿™ä¸ªåˆ é™¤æŒ‰é’®åº”è¯¥ä¸èƒ½ç¼–è¾‘ï¼Œæ‰€ä»¥ï¼Œåœ¨åˆ é™¤æŒ‰é’®å’Œå›¾ç‰‡ä¸ŠåŠ ä¸Šå±æ€§contenteditable=&quot;false&quot;ã€‚ä½†æ˜¯ï¼Œè¿™åˆä¼šå¯¼è‡´å…¶ä»–é—®é¢˜ï¼šæ’å…¥å›¾ç‰‡åï¼Œæˆ‘çš„å…‰æ ‡èšç„¦åˆ°å“ªé‡Œï¼ŸæŒ‰é’®åˆ é™¤å›¾ç‰‡ä¹Ÿå¯èƒ½å¯¼è‡´ä¸€äº›éš¾ä»¥é¢„æ–™çš„é—®é¢˜ã€‚ åŠ ä¸åŠ contenteditable=&quot;false&quot;æ˜¯çŸ›ç›¾çš„ã€‚ä¹Ÿæ­£æ˜¯è¿™æ ·ä¸€ä¸ªçŸ›ç›¾çš„å­˜åœ¨ï¼Œå¯¼è‡´äº†æˆ‘ä»¬ä¸ä½¿ç”¨contenteditable=&quot;true&quot;æ¥å®ç°ç¼–è¾‘å™¨ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªXå¼•å‘çš„å¤§å‹æ¬ç –äº‹ä»¶å¯Œæ–‡æœ¬é‡æ„ã€‚ è‡ªå®ç°å¯Œæ–‡æœ¬ç¼–è¾‘å™¨éœ€è¦ç¡®å®šçš„æ•°æ®ç»“æ„æˆ‘ä»¬éœ€è¦è·å–ç”¨æˆ·è¾“å…¥ï¼Œæ‰€ä»¥å¯ä»¥ç”¨éšè—çš„textareæˆ–è€…inputç­‰æ¥è·å–è¾“å…¥ã€‚é¦–å…ˆéœ€è¦ç¡®å®šçš„æ˜¯æ•°æ®ç»“æ„ï¼ˆå†…å®¹å’Œå…‰æ ‡ï¼‰ï¼Œä»¥ä¾¿å®ç°è‡ªåŠ¨æ¢è¡Œã€è¡Œå†…å¯Œæ–‡æœ¬ï¼Œæ¸²æŸ“å†…å®¹ æ•°æ®ç»“æ„ï¼šå†…å®¹ç½‘é¡µæ–‡æœ¬æœ‰è‡ªåŠ¨æ¢è¡Œçš„ç‰¹æ€§ï¼Œåœ¨ç§»åŠ¨ç«¯åˆ™æ›´ä¸ºæ˜æ˜¾ï¼Œå› ä¸ºå±å¹•æ›´å°ã€‚å¦å¤–ï¼Œè¡Œå†…è¿˜è¦æ”¯æŒè¡Œå†…å›¾ç‰‡ã€è¶…é“¾æ¥ç­‰æ•°æ®ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯ï¼Œè¡Œå†…è¦åŒ…æ‹¬å¤šç§ç±»å‹çš„æ•°æ®ã€‚ 1234567891011121314151617// line&#123; \"inlines\": [ &#123; \"type\": \"text\", \"value\": \"\" &#125;, &#123; \"type\": \"href\", \"value\": \"è¶…é“¾æ¥\" &#125;, &#123; \"type\": \"img\", \"value\": \"å›¾ç‰‡src\" &#125; ]&#125; å¦‚æœä¸€ä¸ªdivå†…æ–‡æœ¬æˆ–å›¾ç‰‡ç­‰å†…å®¹è¶³å¤Ÿå¤šï¼Œé‚£ä¹ˆä¼šè¢«è‡ªåŠ¨æ¢è¡Œï¼Œæ­¤æ—¶ï¼Œå¦‚æœç”¨æˆ·èšç„¦åˆ°è¯¥divè¿›è¡Œç¼–è¾‘ï¼Œæˆ‘ä»¬å…¶å®å¾ˆéš¾è®¡ç®—ç”¨æˆ·ç‚¹å‡»äº†å“ªé‡Œï¼Œå¾ˆéš¾è®¡ç®—è¡Œæœ«å°¾çš„ä½ç½®ï¼Œä¹Ÿéš¾ä»¥è®¡ç®—å…‰æ ‡ä½ç½®ã€‚ å¦‚æœå°†ä¸€ä¸ªdivå†…çš„å†…å®¹çœ‹æˆå¾ˆå¤šè¡Œçš„åˆé›†ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½çŸ¥é“æ¯ä¸€è¡Œçš„å®½åº¦ï¼Œæ˜¯å¦å æ»¡äº†ä¸€è¡Œã€‚ æ ¹æ®è‡ªåŠ¨æ¢è¡Œï¼Œå¦‚æœæ²¡å æ»¡ä¸€è¡Œï¼Œåˆ™è¦å‘ä¸‹ä¸€è¡Œå€Ÿï¼Œè¡¥è¶³ä¸€è¡Œã€‚è€Œä¸¤ä¸ªdivä¹‹é—´ï¼Œåˆ™ä¸å­˜åœ¨å‰ä¸€è¡Œå‘ä¸‹ä¸€è¡Œå€Ÿçš„æƒ…å†µã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†divè§†ä¸ºä¸€ä¸ªæ®µè½ï¼Œæ®µè½æ¯è¡Œè‡ªåŠ¨å æ»¡ä¸€è¡Œã€‚é‚£ä¹ˆæ¯ä¸€æ®µåˆåˆ†ä¸ºå¾ˆå¤šè¡Œã€‚æ®µåˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå›¾æ–‡æ··æ’çš„richå’Œç‹¬å ä¸€æ®µçš„block 12345678910111213141516171819202122// æ®µ&#123; \"type\": \"rich\", \"lines\": [ &#123; // line \"inlines\": [ &#123; \"type\": \"text\", \"value\": \"\" &#125;, &#123; \"type\": \"href\", \"value\": \"è¶…é“¾æ¥\" &#125;, &#123; \"type\": \"img\", \"value\": \"å›¾ç‰‡src\" &#125; ] &#125; ]&#125; æ‰€ä»¥ï¼Œå¯Œæ–‡æœ¬æ˜¯å¾ˆå¤šæ®µçš„ç»„æˆï¼Œå’Œwordæ–‡æ¡£ä¸€æ ·ã€‚ 12345[ &#123; // æ®µ \"lines\": [] &#125;] å°†æ•°æ®ç»“æ„æ¸²æŸ“å‡ºæ¥ï¼Œå¤§è‡´çš„DOMç»“æœä¸ºï¼š 1234567&lt;div class=\"paragraph\"&gt; &lt;div class=\"line\"&gt; &lt;span class=\"inline_text\"&gt;æ–‡æœ¬&lt;/span&gt;&lt;img class=\"inline_img\" /&gt; &lt;/div&gt; &lt;div class=\"line\"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;div class=\"paragraph\"&gt;&lt;/div&gt; ç›´è§‚çš„æ•ˆæœä¾¿æ˜¯ï¼š æ•°æ®ç»“æ„ï¼šå…‰æ ‡å®šä¹‰å¥½æ•°æ®ç»“æ„ï¼Œæ„å‘³ç€å¦‚ä½•è®¡ç®—å…‰æ ‡ä½ç½®ä¹Ÿæœ‰äº†æ–¹å‘ã€‚å…‰æ ‡çš„ä½ç½®é‡‡ç”¨postion: absolute;æ¥å®šä½ï¼Œæ‰€ä»¥å¯Œæ–‡æœ¬ç¼–è¾‘å™¨DOMåº”è¯¥æ˜¯postion: releative;å¦‚æœå­˜åœ¨ä»¥ä¸‹ä¸€æ®µå†…å®¹ã€‚ 123456789101112131415[ // æ®µ &#123; \"lines\": [ &#123; // line ç¬¬ä¸€è¡Œ \"inlines\": [ &#123; \"type\": \"text\", \"value\": \"å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\" &#125; ] &#125; ] &#125;] é‚£ä¹ˆï¼Œæˆ‘ä»¬æƒ³å®šä½åˆ°ç¬¬ä¸€è¡Œè¡Œæœ«ï¼Œé‚£ä¹ˆå…‰æ ‡çš„leftå€¼åˆ™æ˜¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å®½åº¦ï¼Œä¹Ÿå°±æ˜¯&lt;span&gt;å¯Œæ–‡æœ¬ç¼–è¾‘å™¨&lt;/span&gt;å®½åº¦ï¼Œå…‰æ ‡çš„é«˜åº¦ä¹Ÿå¯ä»¥å¾—åˆ°ã€‚è€Œtopå€¼åˆ™åªéœ€è¦åœ¨æ¸²æŸ“å‡ºæ¥çš„DOMä¸­ï¼Œæ‰¾åˆ°ç¬¬ä¸€æ®µç¬¬ä¸€è¡Œçš„offsetTopã€‚æ‰€ä»¥ï¼Œå¦‚æœæ˜¯è¦å°†å…‰æ ‡å®šä½åˆ°å¯Œæ–‡æœ¬åï¼Œåˆ™topå€¼ä¸å˜ï¼Œleftå€¼ä¸ºå¯Œæ–‡æœ¬çš„å®½åº¦ã€‚ æˆ‘ä»¬è¦æ€»ç»“ä¸€ä¸‹å…‰æ ‡æ‰€å…·æœ‰çš„å±æ€§ï¼šæ®µã€è¡Œï¼Œä»¥åŠè¡Œå†…ä½ç½®ï¼Œè¡Œå†…ä½ç½®åˆ™éœ€è¦è®°å½•æ‰€åœ¨è¡Œå†…æ–‡æœ¬çš„å­—ç¬¦åœ¨ç¬¬å‡ ä¸ªå­—ç¬¦åé¢ã€‚æ‰€ä»¥åŸºæœ¬å±æ€§ä¸º 123456789101112cursor = &#123; top: 0, left: 0, // æ‰€åœ¨æ®µä¸‹æ ‡ paragraphIndex: 0, // è¡Œä¸‹æ ‡ lineIndex: 0, // è¡Œå†…ä¸‹æ ‡ inlineIndex: 0, // å­—ç¬¦ä½ç½® charAt: 0&#125; è¿™å¸®åŠ©æˆ‘ä»¬ç¡®è®¤äº†å…‰æ ‡çš„ä½ç½®ï¼Œåœ¨å†…å®¹ä¸­çš„ä½ç½®ï¼Œä»¥ä¾¿è¿›è¡Œå†…å®¹çš„å¢ã€åˆ æ“ä½œã€‚ çªç„¶æƒ³åˆ°æˆ‘ä»¬å¯ä»¥çœ‹çœ‹vscodeçš„æºç ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•åˆ©ç”¨electronæ¥å®ç°æ¢è¡Œã€å…‰æ ‡å®šä½ã€‚æˆ‘ä»¬è™½ç„¶åˆ†æè¿‡ace.jsï¼Œä½†æ˜¯å…¶å¯¹ä»£ç æ˜¯ä¸è‡ªåŠ¨æ¢è¡Œçš„ï¼Œè™½ç„¶vscodeä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†æ˜¯å¯¹markdownå´æ˜¯è‡ªåŠ¨æ¢è¡Œçš„ã€‚ å±‚æ¬¡ç»“æ„æˆ‘ä»¬éœ€è¦å°†ç¼–è¾‘çš„å†…å®¹ã€å…‰æ ‡ã€éšè—çš„textareaç­‰æ¸²æŸ“å‡ºæ¥ã€‚å¦å¤–è¿˜éœ€è¦è®¡ç®—å­—ç¬¦å®½åº¦æ¥è®¡ç®—å…‰æ ‡ä½ç½®ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¼–è¾‘åŒºåŸŸåˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š 1234&lt;div class=\"content\"&gt;æ¸²æŸ“å†…å®¹å±‚&lt;/div&gt;&lt;div class=\"cursor\"&gt;å…‰æ ‡å±‚&lt;/div&gt;&lt;textarea&gt;éšè—çš„è¾“å…¥å±‚&lt;/textarea&gt;&lt;div class=\"measure\"&gt;è®¡ç®—å±‚&lt;/div&gt; æ¸²æŸ“å†…å®¹å±‚ï¼šå¦‚å å…‰æ ‡å±‚ï¼šæ˜¾ç¤ºå…‰æ ‡ éšè—çš„è¾“å…¥å±‚ï¼šè·å–ç”¨æˆ·è¾“å…¥ è®¡ç®—å±‚ï¼šè®¡ç®—å­—ç¬¦å®½åº¦ï¼Œè¡Œé«˜ç­‰ã€‚ é€»è¾‘é€»è¾‘æ¶‰åŠåˆ°ï¼šæ¸²æŸ“ã€è¾“å…¥ã€ç‚¹å‡» æ¸²æŸ“å†…å®¹æ¸²æŸ“å†…å®¹ä¸Šæ–‡æœ‰æåˆ°ï¼Œåªè¦æ¯ä¸€è¡Œçš„å†…å®¹ä¸è¶…è¿‡ä¸€è¡Œçš„è¡Œå®½ï¼Œæ¸²æŸ“å‡ºæ¥çš„ç»“æ„åŸºæœ¬å¦‚ä¸Šã€‚è€Œä¿è¯æ¯ä¸€è¡Œçš„è¡Œé«˜ï¼Œåˆ™éœ€è¦è®¡ç®—æ¯ä¸€è¡Œçš„å†…å®¹ï¼Œåœ¨åé¢è·å–ç”¨æˆ·è¾“å…¥ä¼šæåˆ°ã€‚ è·å–ç”¨æˆ·è¾“å…¥è·å–ç”¨æˆ·è¾“å…¥ï¼Œéœ€è¦ç›‘å¬ä¸¤ç§äº‹ä»¶ï¼šinputã€keydownï¼Œå¤„ç†å››ç§åŸºæœ¬çŠ¶æ€ï¼šinsertTextã€compositionendã€Backspaceã€Enter äº‹ä»¶ï¼šinputinputéœ€è¦ç›‘å¬çš„åŸºæœ¬äº‹ä»¶ï¼šinsertTextã€compositionendã€‚ä¸¤è€…éƒ½æ˜¯æ’å…¥å­—ç¬¦ï¼Œcompositionendåˆ™æ˜¯è¿ç»­è¾“å…¥çš„ç»“æŸçŠ¶æ€ï¼Œä¾‹å¦‚æ‹¼éŸ³è¾“å…¥ã€‚ åœ¨å…‰æ ‡ä½ç½®æ’å…¥å­—ç¬¦ï¼Œå¹¶å°†èšç„¦çš„inlineå³ä¾§çš„inlineså’Œåç»­è¡Œå‡è¿›è¡Œåç§»ï¼Œä¹Ÿå°±æ˜¯é‡æ–°åˆ†è¡Œï¼Œè¿™æ˜¯æ•´ä¸ªç¼–è¾‘å™¨çš„æ ¸å¿ƒï¼Œåˆ é™¤ã€æ¢è¡Œã€æ’å…¥éƒ½æ˜¯åŸºäºæ­¤æµç¨‹æ¥å®ç°ã€‚å…·ä½“æµç¨‹ä¸ºï¼š äº‹ä»¶ï¼škeydowné”®ç›˜æŒ‰é”®äº‹ä»¶ï¼Œç§»åŠ¨ç«¯æœ€åŸºæœ¬çš„æ˜¯éœ€è¦å¤„ç†ä¸¤ç§keyï¼šBackspceã€Enter Backspace:åˆ é™¤åˆ é™¤éœ€è¦å°†cursorå‰çš„å­—ç¬¦æˆ–è€…å†…å®¹åˆ é™¤ï¼ŒåŒæ—¶å°†èšç„¦çš„inlineå³ä¾§çš„inlineså’Œåç»­è¡Œå‡è¿›è¡Œç¼©è¿› åˆ é™¤å­—ç¬¦éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå­—ç¬¦é•¿åº¦ä¸ä¸€å®šä¸º1ï¼Œä¸€äº›è¡¨æ„æ–‡å­—ï¼Œä¾‹å¦‚è¾“å…¥æ³•çš„è¡¨æƒ…ğŸ˜„ï¼Œå…¶å­—ç¬¦é•¿åº¦æ˜¯2ã€‚æ‰€ä»¥éœ€è¦ç”¨æ­£åˆ™åŒ¹é…å…‰æ ‡å‰çš„å­—ç¬¦ã€‚ Enter:æ¢è¡Œæ¢è¡Œæ˜¯å°†å…‰æ ‡åçš„å†…å®¹æ’å…¥åˆ°æ–°æ®µä¸­ã€‚ ç‚¹å‡»é¼ æ ‡çš„ç‚¹å‡»åˆ†ä¸ºä¸¤ç§ï¼šèšç„¦å’Œåˆ é™¤ï¼ˆç‚¹å‡»äº†åˆ é™¤å›¾æ ‡ï¼‰ èšç„¦åœ¨æ¸²æŸ“å†…å®¹æ—¶å°†paragraphã€lineã€inlineçš„ä¿¡æ¯éƒ½è®°å½•åˆ°domä¸­ 1234567&lt;div class=\"paragraph\" data-paragraph=\"0\"&gt; &lt;div class=\"line\" data-paragraph=\"0\" data-line=\"0\"&gt; &lt;span class=\"inline_text\" data-paragraph=\"0\" data-line=\"0\" data-inline=\"0\"&gt;æ–‡æœ¬&lt;/span&gt;&lt;img class=\"inline_img\" data-paragraph=\"0\" data-line=\"0\" data-inline=\"1\"/&gt; &lt;/div&gt; &lt;div class=\"line\" data-paragraph=\"0\" data-line=\"1\"&gt;...&lt;/div&gt;&lt;/div&gt;&lt;div class=\"paragraph\" data-paragraph=\"1\"&gt;&lt;/div&gt; é€šè¿‡ç‚¹å‡»çš„targetï¼Œè·å–èšç„¦çš„inlineï¼Œé€šè¿‡ç‚¹å‡»çš„offsetYç¡®å®šå…‰æ ‡topä½ç½®ï¼ŒoffsetXï¼ˆç›¸å¯¹targetçš„åç§»ï¼‰è®¡ç®—å‡ºå…‰æ ‡leftä½ç½®ã€‚leftè®¡ç®—æ–¹æ³•ï¼Œåˆ™æ˜¯ä¾æ¬¡å°†inlineå·¦ä¾§çš„å­—ç¬¦å–å‡ºï¼Œå¾—åˆ°å­—ç¬¦å®½åº¦ä¸offsetXè¿›è¡Œæ¯”è¾ƒã€‚ åˆ é™¤é¼ æ ‡ç‚¹å‡»çš„åˆ é™¤ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æ®µtype=â€blockâ€ã€‚åˆ é™¤åˆ™æ˜¯åˆ é™¤æ•´æ®µï¼Œæ›´æ–°DOMã€‚ æ€»ç»“æ¯”è¾ƒç®€å•çš„å¯Œæ–‡æœ¬è¿˜æ˜¯å»ºè®®ä½¿ç”¨contenteditable=trueæ¥å®ç°ã€‚å¦‚æœåœ¨ç§»åŠ¨ç«¯ï¼Œåˆ™å»ºè®®ä¸è¦é‡‡ç”¨å¯Œæ–‡æœ¬çš„æ€æƒ³ï¼Œè€Œæ˜¯æ–‡æœ¬ä¸å›¾ç‰‡åˆ†ç¦»çš„æ•°æ®ç»“æ„ã€‚","categories":[],"tags":[]},{"title":"aceå¯Œæ–‡æœ¬ç¼–è¾‘å™¨æºç è§£æ","slug":"ace-source-analysis","date":"2020-02-17T02:13:29.000Z","updated":"2020-03-05T01:20:15.959Z","comments":true,"path":"2020/02/17/ace-source-analysis/","link":"","permalink":"https://yiyan.site/2020/02/17/ace-source-analysis/","excerpt":"","text":"aceå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ˜¯ä¸€æ¬¾ä¸é”™çš„JavaScriptå®ç°çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚å®ƒæ²¡æœ‰é‡‡ç”¨htmlçš„contentEditableå®ç°ï¼Œè€Œæ˜¯é‡‡ç”¨ä¸€ç§è‡ªè¡Œæ¸²æŸ“ã€ç±»ä¼¼è™šæ‹ŸDOMçš„æ–¹å¼å®ç°ã€‚æˆ‘ä»¬å¯¹é˜…è¯»äº†å…¶æºç ï¼Œä»¥æœŸäº†è§£å…¶å®ç°åŸç†ã€‚ å¤§æ®µæºç è­¦å‘Š å…¥å£ä½¿ç”¨aceï¼Œåˆå§‹åŒ–ä»£ç ä¸º 12345&lt;div id=\"editor\"&gt;some text&lt;/div&gt; &lt;script src=\"build/src/ace.js\" type=\"text/javascript\" charset=\"utf-8\"&gt;&lt;/script&gt; &lt;script&gt; var editor = ace.edit(\"editor\"); &lt;/script&gt; ä¹Ÿå°±æ˜¯å…¥å£å‡½æ•°ä¸ºace.editã€‚åœ¨è·å–aceæºç åï¼Œè¿è¡Œnode ./Makefile.dryice.jså‘½ä»¤è¿›è¡Œbuildåï¼Œåœ¨build/srcæ–‡ä»¶å¤¹å†…å¯ä»¥å¾—åˆ°aceå®Œæ•´çš„æºç ã€‚åœ¨build/src/ace.jsæ–‡ä»¶ä¸­æ‰¾åˆ°editå‡½æ•°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243exports.edit = function(el, options) &#123; if (typeof el == \"string\") &#123; var _id = el; // åªæ”¯æŒdomçš„IDå±æ€§ el = document.getElementById(_id); if (!el) throw new Error(\"ace.edit can't find div #\" + _id); &#125; if (el &amp;&amp; el.env &amp;&amp; el.env.editor instanceof Editor) return el.env.editor; var value = \"\"; if (el &amp;&amp; /input|textarea/i.test(el.tagName)) &#123; var oldNode = el; value = oldNode.value; el = dom.createElement(\"pre\"); oldNode.parentNode.replaceChild(el, oldNode); &#125; else if (el) &#123; value = el.textContent; el.innerHTML = \"\"; &#125; // åˆ›å»ºç¼–è¾‘ä¼šè¯ // è¿”å›EditSessionå¯¹è±¡ var doc = exports.createEditSession(value); // åˆ›å»ºç¼–è¾‘å™¨ var editor = new Editor(new Renderer(el), doc, options); var env = &#123; document: doc, editor: editor, onResize: editor.resize.bind(editor, null) &#125;; if (oldNode) env.textarea = oldNode; event.addListener(window, \"resize\", env.onResize); editor.on(\"destroy\", function() &#123; event.removeListener(window, \"resize\", env.onResize); env.editor.container.env = null; // prevent memory leak on old ie &#125;); editor.container.env = editor.env = env; return editor;&#125;; Editor(new Renderer(el), doc, options)Rendererï¼šVirtualRendererRendererç”¨åˆ°äº†VirtualRendererã€‚VietualRenderåˆå§‹åŒ–æ—¶åˆ›å»ºäº†ä¸€äº›DOMï¼Œå¦‚ä¸‹å›¾ã€‚ ace_gutter: æ˜¾ç¤ºå·¦ä¾§çš„è¡Œåºåˆ— ace_scroller: åŒ…è£¹æ­£æ–‡ï¼ˆace_contentï¼‰æ˜¾ç¤ºéƒ¨åˆ† ace_scrollbar: æ»šåŠ¨æ¡ï¼Œåˆ†ä¸ºå‚ç›´å’Œæ°´å¹³æ»šåŠ¨æ¡ ace_contentå†…åˆ†ä¸ºå¾ˆå¤šå±‚layer: ace_print-margin-layer: ace_marker-layer: ace_text-layer: ace_cursor-layer: VirtualRendereræŒ‡æ˜äº†å…‰æ ‡ä½ç½®å±æ€§ã€‚ 1234this.cursorPos = &#123; row : 0, column : 0&#125;; åˆå§‹åŒ–å‡½æ•°ä¸­æœ‰ä¸€è¡Œä»£ç å°†TextLayerä¸­ç”¨äºæ¸²æŸ“textçš„domå®¹å™¨å¿…åšcanvas 123456789101112var textLayer = this.$textLayer = new TextLayer(this.content);this.canvas = textLayer.element;// layer/text.jsvar Text = function(parentEl) &#123; this.dom = dom; this.element = this.dom.createElement(\"div\"); this.element.className = \"ace_layer ace_text-layer\"; parentEl.appendChild(this.element); this.$updateEolChar = this.$updateEolChar.bind(this); this.$lines = new Lines(this.element);&#125;; TextLayer: layer/textæŸ¥çœ‹Textçš„å®ç°ï¼Œä¼šå‘ç°Textåˆ©ç”¨Linesæ¥æ“ä½œæ¯ä¸€è¡Œï¼Œå¹¶ä¸”å°†ace_text-layeré«˜åº¦è®¾ç½®ä¸ºå¾ˆå¤§ã€‚ 123456789101112131415161718192021// layer/text.jsvar Text = function(parentEl) &#123; this.dom = dom; this.element = this.dom.createElement(\"div\"); this.element.className = \"ace_layer ace_text-layer\"; parentEl.appendChild(this.element); this.$updateEolChar = this.$updateEolChar.bind(this); this.$lines = new Lines(this.element);&#125;;// layer/lines.jsvar Lines = function(element, canvasHeight) &#123; this.element = element; // å°†`ace_text-layer`é«˜åº¦è®¾ç½®ä¸ºå¾ˆå¤§ this.canvasHeight = canvasHeight || 500000; this.element.style.height = (this.canvasHeight * 2) + \"px\"; this.cells = []; this.cellCache = []; this.$offsetCoefficient = 0;&#125;; layer/lines.jsä¸­æœ‰ä¸€äº›å¯¹cellsçš„å¢åˆ æŸ¥ç­‰æ“ä½œï¼Œä¾‹å¦‚ï¼šget(index)ã€shiftã€popã€pushã€unshiftï¼Œä¹Ÿæœ‰åˆ›å»ºcellçš„å‡½æ•°ã€‚ 12345678910111213141516171819this.createCell = function(row, config, session, initElement) &#123; var cell = this.cellCache.pop(); if (!cell) &#123; var element = dom.createElement(\"div\"); if (initElement) initElement(element); this.element.appendChild(element); cell = &#123; element: element, text: \"\", row: row &#125;; &#125; cell.row = row; return cell;&#125;; è¿™é‡Œæ³¨æ„åˆ°ä¸€ä¸ªå‡½æ•°initElementå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½ä¸æ¸²æŸ“æœ‰å…³ã€‚lines.jsæœ¬èº«æ²¡æœ‰è°ƒç”¨createCellå‡½æ•°ã€‚text.jsä¸­åªæœ‰ä¸€å¤„è°ƒç”¨äº†: 12345678910111213141516171819202122232425262728293031323334353637this.$renderLinesFragment = function(config, firstRow, lastRow) &#123; var fragment = []; var row = firstRow; var foldLine = this.session.getNextFoldLine(row); var foldStart = foldLine ? foldLine.start.row : Infinity; while (true) &#123; if (row &gt; foldStart) &#123; row = foldLine.end.row+1; foldLine = this.session.getNextFoldLine(row, foldLine); foldStart = foldLine ? foldLine.start.row : Infinity; &#125; if (row &gt; lastRow) break; // è¿™é‡Œæ²¡æœ‰ä¼ é€’initElementå‡½æ•°ï¼Œæˆ‘ä»¬çœ‹çœ‹renderLineå‡½æ•° var line = this.$lines.createCell(row, config, this.session); var lineEl = line.element; this.dom.removeChildren(lineEl); dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\"); dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\"); // Get the tokens per line as there might be some lines in between // beeing folded. this.$renderLine(lineEl, row, row == foldStart ? foldLine : false); if (this.$useLineGroups()) &#123; lineEl.className = \"ace_line_group\"; &#125; else &#123; lineEl.className = \"ace_line\"; &#125; fragment.push(line); row++; &#125; return fragment;&#125;; å®ç°æ¸²æŸ“æ–‡æœ¬ï¼Œå¤§è‡´ä¸Šæ˜¯é€šè¿‡$renderLine&gt;$renderSimpleLine&gt;$renderTokenï¼Œé€šè¿‡$renderTokenä¸­è°ƒç”¨dom.createTextNodeæ¥åˆ›å»ºtextèŠ‚ç‚¹ã€‚ 1valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element)); å¦å¤–ï¼Œåœ¨$renderTokenå‡½æ•°ä¸­ï¼Œå¯¹è¡¨æ„æ–‡å­—ï¼ˆä¸­æ–‡ã€è¡¨æƒ…ç­‰ï¼‰è¿›è¡Œäº†æ­£åˆ™åŒ¹é…ï¼Œè¡¨æ„æ–‡å­—çš„æ¸²æŸ“æ˜¯å¯¹æ¯ä¸ªæ–‡å­—éƒ½è®¾ç½®2ä¸ªå­—ç¬¦é•¿åº¦çš„å®½åº¦ã€‚ 12345678&#125; else if (cjk) &#123; screenColumn += 1; var span = this.dom.createElement(\"span\"); span.style.width = (self.config.characterWidth * 2) + \"px\"; span.className = \"ace_cjk\"; span.textContent = cjk; valueFragment.appendChild(span);&#125; CursorLayer:å…‰æ ‡å±‚è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œaceå‡ ä¹å®Œç¾çš„å®ç°äº†æŒ‡å“ªæ˜¾ç¤ºå“ªã€‚è€Œåœ¨è‡ªå·±å®ç°æ—¶ï¼Œå‘ç°å…‰æ ‡çš„ä½ç½®åœ¨è¡Œé¦–ç¬¬ä¸€ä¸ªå­—ç¬¦å‰åæ¯”è¾ƒéš¾å®šä½ã€‚ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ å…‰æ ‡æ•ˆæœå®ç°ä¸ç”¨å¤šè¯´ï¼Œå…¶é‡‡ç”¨cssåŠ¨ç”»ï¼Œé…åˆsetIntervalæ¥å®ç°ã€‚ layer/cursor.jsåˆ†æCursoræ˜¾ç¤ºä½ç½®æ˜¯é€šè¿‡getPixelPosition(position, onScreen)(onScreenä¸ºbooleanå‹)å‡½æ•°æ¥å¾—åˆ°ã€‚ 12345678910111213141516this.getPixelPosition = function(position, onScreen) &#123; if (!this.config || !this.session) return &#123;left : 0, top : 0&#125;; if (!position) position = this.session.selection.getCursor(); var pos = this.session.documentToScreenPosition(position); var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row) ? this.session.$bidiHandler.getPosLeft(pos.column) : pos.column * this.config.characterWidth); var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) * this.config.lineHeight; return &#123;left : cursorLeft, top : cursorTop&#125;;&#125;; å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤§éƒ¨åˆ†æƒ…å†µå…¥å‚positionä¸ºnullï¼Œæ˜¯ä»this.session.selection.getCursor()è·å–åˆ°äº†cursoræ‰€å¤„çš„è¡Œåˆ—ï¼Œè¿™ä¸€ç‚¹å…¶å®å¾ˆé‡è¦ï¼šå¦‚æœé«˜ç²¾åº¦å‘½ä¸­è¡Œåˆ—ã€‚poså’ŒpositionåŸºæœ¬ç›¸åŒã€‚è®¡ç®—cursorLeftåˆåŸºæœ¬ä¸Šæ˜¯æ‰§è¡Œpos.column * this.config.characterWidth,å…¶ä¸­characterWidthä¸º7.201171875ï¼Œä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªæ•°å­—ï¼Ÿ æˆ‘ä»¬åˆ†ælayer/font_metrics.jsæ–‡ä»¶ï¼Œå‘ç°äº†ä»¥ä¸‹å‡ è¡Œä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435var CHAR_COUNT = 256;this.$measureNode = dom.createElement(\"div\"); this.$setMeasureNodeStyles(this.$measureNode.style);this.$measureNode.textContent = lang.stringRepeat(\"X\", CHAR_COUNT); this.$characterSize = &#123;width: 0, height: 0&#125;;this.checkForSizeChanges = function(size) &#123; if (size === undefined) size = this.$measureSizes(); if (size &amp;&amp; (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) &#123; this.$measureNode.style.fontWeight = \"bold\"; var boldSize = this.$measureSizes(); this.$measureNode.style.fontWeight = \"\"; this.$characterSize = size; this.charSizes = Object.create(null); this.allowBoldFonts = boldSize &amp;&amp; boldSize.width === size.width &amp;&amp; boldSize.height === size.height; this._emit(\"changeCharacterSize\", &#123;data: size&#125;); &#125;&#125;;this.$measureSizes = function(node) &#123; var size = &#123; height: (node || this.$measureNode).clientHeight, width: (node || this.$measureNode).clientWidth / CHAR_COUNT &#125;; // Size and width can be null if the editor is not visible or // detached from the document if (size.width === 0 || size.height === 0) return null; return size;&#125;; è¿™é‡ŒåŸºæœ¬å¯ä»¥çŒœå‡ºï¼Œé€šè¿‡ç”Ÿæˆ256ä¸ªXå­—æ¯æ¥è®¡ç®—å‡ºæ¯ä¸€ä¸ªå­—ç¬¦çš„å®½åº¦ã€‚æŸ¥åˆ°domï¼Œå‘ç°äº†ä¸€ä¸ªdomï¼Œå…¶å®½åº¦ä¸º1843.5ï¼Œ1843.5/256=7.201171875 å…‰æ ‡æŒ‡å®šè¡Œåˆ—é‚£ä¹ˆè¿˜å‰©ä¸‹ï¼šå¦‚ä½•å¾—åˆ°å‡†ç¡®çš„è¡Œåˆ—?ä»ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬å¾—çŸ¥æ˜¯é€šè¿‡this.session.selection.getCursor()è·å–åˆ°è¡Œåˆ—ã€‚ç›´æ¥çœ‹selection.jsä¸­getCursoræ–¹æ³• 123this.getCursor = function() &#123; return this.lead.getPosition();&#125;; è¿›ä¸€æ­¥å‘ç°äº†mouse/multi_select_handlerä¸­çš„onMouseDownæ–¹æ³•ã€‚å‡½æ•°æ¯”è¾ƒé•¿ï¼Œè¦æ…¢æ…¢åˆ†æã€‚é€šè¿‡è°ƒè¯•å‘ç°ï¼Œç‚¹å‡»æ“ä½œè¯¥æ–¹æ³•åœ¨ç¬¬3ä¸ªifåˆ¤æ–­ä¸­é€€å‡ºäº†ã€‚ç»§ç»­å¯»æ‰¾ï¼Œå‘ç°mouse/mouse_handler.jsä¸­å­˜åœ¨å¯¹ç‚¹å‡»äº‹ä»¶çš„ç»‘å®šã€‚ 123456789101112131415var mouseTarget = editor.renderer.getMouseEventTarget();event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"));event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"));var gutterEl = editor.renderer.$gutter;event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"));event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"));event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"));event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"));...this.onMouseEvent = function(name, e) &#123; this.editor._emit(name, new MouseEvent(e, this.editor));&#125;; MouseEventåˆ™æ¥è‡ªmouse/mouse_event.jsï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åœ¨å…¶ä¸­æ‰¾åˆ°gutterclickå‡½æ•°ï¼Œmouse_event.jsåº”è¯¥æ˜¯å¯¹é¼ æ ‡äº‹ä»¶çš„é‡å®šä¹‰ã€‚ åœ¨mouse/fold_handler.jsä¸­æ‰¾åˆ°å¯¹å‡½æ•°gutterclickäº‹ä»¶çš„å¤„ç†ã€‚gutteræ˜¯ç¼–è¾‘å™¨å·¦ä¾§æ˜¾ç¤ºè¡Œå·çš„é‚£ä¸€åˆ—ï¼Œç‚¹å‡»åˆ™é€‰ä¸­æ•´è¡Œã€‚åŒæ–‡ä»¶ä¸‹çš„ï¼Œclickäº‹ä»¶å¤„ç†åˆ™æ˜¯ç‚¹å‡»å¤„ç†ï¼Œæ¥çœ‹çœ‹æ˜¯å¦æœ‰æˆ‘ä»¬éœ€è¦çš„å…‰æ ‡å¤„ç†ã€‚ 1234567891011121314151617181920212223editor.on(\"click\", function(e) &#123; var position = e.getDocumentPosition(); var session = editor.session; // If the user clicked on a fold, then expand it. var fold = session.getFoldAt(position.row, position.column, 1); if (fold) &#123; if (e.getAccelKey()) session.removeFold(fold); else session.expandFold(fold); e.stop(); &#125; var target = e.domEvent &amp;&amp; e.domEvent.target; if (target &amp;&amp; dom.hasCssClass(target, \"ace_inline_button\")) &#123; if (dom.hasCssClass(target, \"ace_toggle_wrap\")) &#123; session.setOption(\"wrap\", !session.getUseWrapMode()); editor.renderer.scrollCursorIntoView(); &#125; &#125;&#125;); å‡½æ•°ç¬¬ä¸€è¡Œä¾¿è·å–åˆ°äº†positionï¼Œä¹Ÿå°±æ˜¯è¡Œåˆ—ã€‚getDocumentPositionå‡½æ•°åˆ™æ˜¯è°ƒç”¨äº†virtual_renderer.jsçš„screenToTextCoordinateså‡½æ•° 1234567891011121314151617181920this.screenToTextCoordinates = function(x, y) &#123; var canvasPos; if (this.$hasCssTransforms) &#123; canvasPos = &#123;top:0, left: 0&#125;; var p = this.$fontMetrics.transformCoordinates([x, y]); x = p[1] - this.gutterWidth - this.margin.left; y = p[0]; &#125; else &#123; canvasPos = this.scroller.getBoundingClientRect(); &#125; var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding; var offset = offsetX / this.characterWidth; // åœ¨è°ƒè¯•æ—¶ï¼Œthis.$blockCursoråŸºæœ¬ä¸Šä¸ºfalseï¼Œæ‰€ä»¥colæ˜¯å››èˆäº”å…¥ var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset); var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight); return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);&#125;; æ‰€ä»¥ï¼Œæˆ‘ä»¬çŸ¥é“äº†æ˜¯å¦‚ä½•è®¡ç®—å¾—åˆ°åˆ—çš„ã€‚é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥ï¼Œéœ€è¦ç¡®è®¤çš„æ˜¯ä¸­æ–‡å­—ç¬¦æ˜¯å¦‚ä½•ç¡®è®¤åˆ—çš„ã€‚ä»domçš„æ¸²æŸ“æ¥çœ‹ï¼Œæ˜¯å°†ä¸­æ–‡å½“æˆäº†2ä¸ªåº”ä¸ºå­—ç¬¦ã€‚ ç”¨æˆ·è¾“å…¥é¦–å…ˆå‘ç°çš„æ˜¯ä¸€ä¸ªéšè—çš„textarea ä»£ç ä¸­æ˜ç¡®å¢åŠ äº‹ä»¶ç›‘å¬çš„æ˜¯ï¼š 123456// keyboard/textinput.jsevent.addListener(text, \"compositionstart\", onCompositionStart);event.addListener(text, \"compositionupdate\", onCompositionUpdate);event.addListener(text, \"keyup\", onKeyup);event.addListener(text, \"keydown\", syncComposition);event.addListener(text, \"compositionend\", onCompositionEnd); åˆ›å»ºç¼–è¾‘å™¨ä¼šè¯ï¼šcreateEditSession(value)123456exports.createEditSession = function(text, mode) &#123; var doc = new EditSession(text, mode); // è®¾ç½®å›æ’¤ç®¡ç†å™¨ doc.setUndoManager(new UndoManager()); return doc;&#125;; EditSession123456789101112131415161718192021222324252627var EditSession = function(text, mode) &#123; this.$breakpoints = []; this.$decorations = []; this.$frontMarkers = &#123;&#125;; this.$backMarkers = &#123;&#125;; this.$markerId = 1; this.$undoSelect = true; this.$foldData = []; this.id = \"session\" + (++EditSession.$uid); this.$foldData.toString = function() &#123; return this.join(\"\\n\"); &#125;; this.on(\"changeFold\", this.onChangeFold.bind(this)); this.$onChange = this.onChange.bind(this); if (typeof text != \"object\" || !text.getLine) text = new Document(text); this.setDocument(text); this.selection = new Selection(this); this.$bidiHandler = new BidiHandler(this); config.resetOptions(this); this.setMode(mode); config._signal(\"session\", this);&#125;; EditSession(text, mode)è¿™ä¸ªå‡½æ•°åšäº†å¾ˆå¤šå·¥ä½œï¼Œè¿”å›çš„EditSessionåŒ…å«å±æ€§docã€‚docä¸ºDocumentç±»å‹ã€‚ åˆå§‹åŒ–Document ä»ä¸Šå›¾å®ä¾‹å±æ€§ä¸­çœ‹å‡ºdoc.$linesé»˜è®¤åŒ…å«ä¸€ä¸ªç©ºå­—ç¬¦ä¸²å…ƒç´  12345678910var Document = function(textOrLines) &#123; this.$lines = [\"\"]; if (textOrLines.length === 0) &#123; this.$lines = [\"\"]; &#125; else if (Array.isArray(textOrLines)) &#123; this.insertMergedLines(&#123;row: 0, column: 0&#125;, textOrLines); &#125; else &#123; this.insert(&#123;row: 0, column:0&#125;, textOrLines); &#125;&#125;; å…¶ä¸­insertå‡½æ•°æ˜¯åœ¨æŒ‡å®šçš„è¡Œåˆ—æ’å…¥textOrLinesã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990this.insert = function(position, text) &#123; if (this.getLength() &lt;= 1) this.$detectNewLine(text); return this.insertMergedLines(position, this.$split(text));&#125;;this.getLength = function() &#123; return this.$lines.length;&#125;;this.$detectNewLine = function(text) &#123; var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m); this.$autoNewLine = match ? match[1] : \"\\n\"; this._signal(\"changeNewLineMode\");&#125;;// åœ¨positionä½ç½®æ’å…¥å•è¡Œæˆ–å¤šè¡Œï¼Œå¹¶è¿”å›ç»“æŸä½ç½®this.insertMergedLines = function(position, lines) &#123; // è·å–æ­£ç¡®çš„å¼€å§‹ä½ç½®, åˆ¤æ–­æ ¡æ­£åˆ°æ­£ç¡®çš„è¡Œåˆ— var start = this.clippedPos(position.row, position.column); // ç»“æŸä½ç½® var end = &#123; row: start.row + lines.length - 1, column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length &#125;; // æ’å…¥è¡Œ this.applyDelta(&#123; start: start, end: end, action: \"insert\", lines: lines &#125;); // å¤åˆ¶ç»“æŸä½ç½®æ ‡è®° return this.clonePos(end);&#125;;this.applyDelta = function(delta, doNotValidate) &#123; var isInsert = delta.action == \"insert\"; if (isInsert ? delta.lines.length &lt;= 1 &amp;&amp; !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) &#123; return; &#125; if (isInsert &amp;&amp; delta.lines.length &gt; 20000) &#123; this.$splitAndapplyLargeDelta(delta, 20000); &#125; else &#123; applyDelta(this.$lines, delta, doNotValidate); this._signal(\"change\", delta); &#125;&#125;;exports.applyDelta = function(docLines, delta, doNotValidate) &#123; var row = delta.start.row; var startColumn = delta.start.column; var line = docLines[row] || \"\"; switch (delta.action) &#123; case \"insert\": var lines = delta.lines; // æ’å…¥å•è¡Œ if (lines.length === 1) &#123; docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn); &#125; else &#123; // æ’å…¥å¤šè¡Œ var args = [row, 1].concat(delta.lines); docLines.splice.apply(docLines, args); docLines[row] = line.substring(0, startColumn) + docLines[row]; docLines[row + delta.lines.length - 1] += line.substring(startColumn); &#125; break; case \"remove\": var endColumn = delta.end.column; var endRow = delta.end.row; if (row === endRow) &#123; docLines[row] = line.substring(0, startColumn) + line.substring(endColumn); &#125; else &#123; docLines.splice( row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn) ); &#125; break; &#125;&#125;;this.onChangeNewLineMode = function() &#123; this.$loop.schedule(this.CHANGE_TEXT); this.$textLayer.$updateEolChar(); this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);&#125;;","categories":[],"tags":[{"name":"å¯Œæ–‡æœ¬ç¼–è¾‘å™¨","slug":"å¯Œæ–‡æœ¬ç¼–è¾‘å™¨","permalink":"https://yiyan.site/tags/å¯Œæ–‡æœ¬ç¼–è¾‘å™¨/"}]},{"title":"ä»é›¶å¼€å§‹ï¼Œå†é€ ä¸€ä¸ªå°ç¨‹åºå¹³å°","slug":"recreatomg-a-small-program-framework","date":"2019-02-23T11:14:41.000Z","updated":"2019-02-26T05:56:23.906Z","comments":true,"path":"2019/02/23/recreatomg-a-small-program-framework/","link":"","permalink":"https://yiyan.site/2019/02/23/recreatomg-a-small-program-framework/","excerpt":"","text":"å¾®ä¿¡å‘å¸ƒå°ç¨‹åºå¹³å°åï¼Œå›½å†…å„å¤§APPç«é€Ÿè·Ÿè¿›ï¼Œçº·çº·å‘å¸ƒäº†è‡ªå·±çš„å°ç¨‹åºå¹³å°ã€‚ é€Ÿåº¦çœŸçš„å¾ˆå¿«ï¼Œéš¾é“è¢«å¾®ä¿¡å½¢å®¹â€œæ‹¥æœ‰å‡ºè‰²ä½“éªŒâ€çš„å°ç¨‹åºå¹³å°å¾ˆå®¹æ˜“å®ç°ï¼Ÿæˆ‘ä»¬å¯ä»¥å†é€ ä¸€ä¸ªå—ï¼Ÿ èµ·åˆï¼Œä½œè€…ç”šè‡³ä¸çŸ¥é“å°ç¨‹åºæ˜¯ç”±Nativeå®ç°ï¼Œè¿˜æ˜¯ç½‘é¡µå®ç°ã€‚æ—¢ç„¶è¦å†é€ ä¸€ä¸ªï¼Œé‚£ä¹ˆé¦–å…ˆè¦åšçš„å°±æ˜¯æ¥äº†è§£å°ç¨‹åºå¹³å°å®ç°åŸç†ã€‚ è°ƒç ”æœç´¢æ²¡æœ‰å‚ä¸è¿‡å°ç¨‹åºå¹³å°çš„å»ºè®¾ï¼Œæ‰€ä»¥åªèƒ½å‘åŠ¨æœç´¢æŠ€èƒ½ã€‚æ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¹Ÿæ›´å¤šçš„æ˜¯ç®¡ä¸­çª¥è±¹ï¼ŒæŠ›ç –å¼•ç‰ã€‚ æœç´¢å¤šç¯‡ä¸å°ç¨‹åºå®ç°åŸç†æœ‰å…³çš„æ–‡ç« ï¼Œè®¤çœŸæ‹œè¯»ï¼Œå‘ç°åœ¨å¾®ä¿¡å°ç¨‹åºå¹³å°å‘å¸ƒä¹‹åˆï¼Œå¾®ä¿¡å›¢é˜Ÿå°†å°ç¨‹åºæ„å»ºç›¸å…³çš„è„šæœ¬ç›´æ¥ä¸‹å‘ç»™äº†å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œä¹Ÿå°±æ˜¯å°ç¨‹åºæ„å»ºæ˜¯åœ¨å¼€å‘è€…ç«¯ã€‚ç°åœ¨æ–°ç‰ˆçš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å·²ç»æ²¡æœ‰ç›¸å…³è„šæœ¬äº†ï¼Œæ¨æµ‹æ˜¯å°†æ„å»ºè½¬ç§»åˆ°äº†æœåŠ¡å™¨ç«¯ã€‚ ä»ç›¸å…³çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£çŒœæƒ³åˆ°äº†å¾®ä¿¡å°ç¨‹åºå®ç°æ–¹å¼ï¼šUIå±‚ç”±ç½‘é¡µ+åŸç”Ÿæ¸²æŸ“ï¼ˆéƒ¨åˆ†ç»„ä»¶æ˜¯åŸç”Ÿå®ç°ï¼‰ï¼ŒNativeè¿è¡Œé€»è¾‘å±‚ã€‚ æŠ€æœ¯æ–¹æ¡ˆUIå±‚æ¸²æŸ“é‡‡ç”¨webviewï¼Œjsé€»è¾‘å±‚å‘¢ï¼Ÿ React Nativeçš„jså¼•æ“ä¸»è¦é‡‡ç”¨äº†JavaScriptCore(è‹¹æœSafariæµè§ˆå™¨jså¼•æ“)ï¼ŒWeexåˆ™æ˜¯é‡‡ç”¨äº†Chrome V8å¼•æ“ã€‚ å®ç°é“ç†ä½ éƒ½æ‡‚ï¼Œé‚£æ€ä¹ˆå®ç°å‘¢ï¼Ÿ UIå’Œjsé€»è¾‘åœ¨å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹å¾®ä¿¡å°ç¨‹åºçš„ä»£ç ï¼Œåˆ†æä¸€ä¸‹ã€‚ä»¥ä¸€ä¸ªå°ç¨‹åºçš„indexé¡µé¢ä¸ºä¾‹ï¼Œå…¶ä»£ç åŒ…å«æ–‡ä»¶ï¼šindex.jsã€index.jsonã€index.wxmlã€index.wxss index.js index.jsä¸»è¦æ˜¯ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå†…å®¹å¤§è‡´ä¸ºï¼š1234567891011121314151617181920212223242526//index.js//è·å–åº”ç”¨å®ä¾‹const app = getApp()Page(&#123; data: &#123; motto: 'Hello World', userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, //äº‹ä»¶å¤„ç†å‡½æ•° bindViewTap: function() &#123; wx.navigateTo(&#123; url: '../logs/logs' &#125;) &#125;, onLoad: function () &#123; if (app.globalData.userInfo) &#123; this.setData(&#123; userInfo: app.globalData.userInfo, hasUserInfo: true &#125;) &#125; &#125;&#125;) å°ç¨‹åºçš„é¡µé¢é€»è¾‘ä»£ç å‡åŒ…å«åœ¨Page({...})ä¸­ã€‚åœ¨jsä¸­ï¼ŒPageæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ‰€ä»¥ï¼Œå°ç¨‹åºåº”è¯¥æ˜¯è°ƒç”¨äº†Nativeæˆ–è€…jsçš„Pageå‡½æ•°ã€‚ å°ç¼–å€¾å‘äºPageæ˜¯è°ƒç”¨äº†jså‡½æ•°ã€‚å› ä¸ºå¦‚æœæ˜¯Nativeå‡½æ•°ï¼Œé‚£ä¹ˆjsä¸­çš„thiså…³é”®å­—å°†éœ€è¦Nativeè¿›è¡Œå¤„ç†ï¼Œjså¼•æ“å¯ä»¥å¤„ç†çš„å†…å®¹ï¼Œæ²¡æœ‰å¿…è¦äº¤ç»™Nativeæ¥è¿›è¡Œå¤„ç†ï¼Œæˆ–è€…æ˜¯å°ç¼–ä¸çŸ¥é“Nativeæœ‰æ¯”è¾ƒå¥½çš„å¤„ç†æ–¹å¼ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çš„ç¬¬ä¸€ä¸ªå†…å®¹æ˜¯ï¼šä½¿ç”¨jså®šä¹‰Pageå‡½æ•°æˆ–è€…classï¼Œä¸¤è€…å‡å¯ä»¥å®ç°ã€‚ index.wxml index.wxmlæ˜¯UIï¼Œæ˜¯å¾®ä¿¡è‡ªå®šä¹‰xmlæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š12345678910111213&lt;!--index.wxml--&gt;&lt;view class=\"container\"&gt; &lt;view class=\"userinfo\"&gt; &lt;button wx:if=\"&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;\" open-type=\"getUserInfo\" bindgetuserinfo=\"getUserInfo\"&gt; è·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap=\"bindViewTap\" class=\"userinfo-avatar\" src=\"&#123;&#123;userInfo.avatarUrl&#125;&#125;\" mode=\"cover\"&gt;&lt;/image&gt; &lt;text class=\"userinfo-nickname\"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class=\"usermotto\"&gt; &lt;text class=\"user-motto\"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt;&lt;/view&gt; è‡ªå®šä¹‰ä¸€æ•´å¥—çš„xmlæ ‡ç­¾ã€å±æ€§ä¼šæ¯”è¾ƒè€—è´¹æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨htmlæ ‡ç­¾ã€‚ index.wxss index.wxssä¸»è¦æ˜¯æ ·å¼ï¼Œå’ŒcssåŸºæœ¬ä¸€æ ·ï¼Œå…¶å†…å®¹æˆ‘ä»¬å®Œå…¨å¯ä»¥ç›´æ¥å¼•å…¥ç½‘é¡µä¸­ã€‚å¾®ä¿¡å°ç¨‹åºåˆ™æ˜¯ç»Ÿä¸€äº†rpxå•ä½ï¼Œæƒ³å¿…æ˜¯ä¸ºäº†æ›´å¥½çš„å…¼å®¹ä¸åŒå±å¹•å¤§å°ã€‚123456789101112131415161718192021/**index.wxss**/.userinfo &#123; display: flex; flex-direction: column; align-items: center;&#125;.userinfo-avatar &#123; width: 128rpx; height: 128rpx; margin: 20rpx; border-radius: 50%;&#125;.userinfo-nickname &#123; color: #aaa;&#125;.usermotto &#123; margin-top: 200px;&#125; index.json è¿™ä¸ªæ–‡ä»¶åˆ™æ˜¯è¯¥é¡µé¢çš„ä¸€äº›åŸºæœ¬é…ç½®ã€‚æˆ‘ä»¬ä¸»è¦å…³å¿ƒä¸€ä¸‹usingComponents123&#123; \"usingComponents\": &#123;&#125;&#125; è¿™ä¸ªåº”è¯¥å°±æ˜¯å°ç¨‹åºå¯ä»¥å®ç°ç»„ä»¶åŒ–å¼€å‘çš„åŸå› ã€‚usingComponentsç›´æ¥å‘Šè¯‰äº†Nativeé¡µé¢ä½¿ç”¨äº†å“ªäº›ç»„ä»¶ï¼Œæ–¹ä¾¿Nativeè·å–ç»„ä»¶æ¨¡æ¿å’Œé€»è¾‘ï¼Œç„¶åè¿›è¡Œæ¸²æŸ“ã€‚ å®šä¹‰Pageæˆ‘ä»¬æ¥ä½¿ç”¨jså®šä¹‰ä¸€ä¸ªPage classï¼Œæ¥ä½œä¸ºæ¯ä¸ªé¡µé¢çš„å®ä¾‹ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°å®ç°ã€‚12345678910111213141516class Page &#123; constructor(config) &#123; this.data = config.data JSBridge.setData(config.data) // å°ç¨‹åºçš„onLoadç”Ÿå‘½å‘¨æœŸå‡½æ•° this.onLoad = config.onLoad // è¿™é‡Œä¸å°ç¨‹åºæœ‰ç‚¹ä¸ä¸€æ · // æ¨¡ä»¿vueå°†éç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°éƒ½èµ‹ç»™methodså±æ€§ if (config.methods) &#123; // å°†æ‰€æœ‰methodéƒ½æŒ‡ç»™class for (let key in config.methods) &#123; this.key = config.methods[key] &#125; &#125; &#125;&#125; å¦å¤–æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯å°ç¨‹åºçš„setDataå‡½æ•°ã€‚setDataå‡½æ•°åº”è¯¥æ˜¯è°ƒç”¨Nativeï¼Œé€šçŸ¥Nativeæ•°æ®å˜æ›´ï¼Œé‡æ–°æ¸²æŸ“UIï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦åœ¨è¯¥classå®ç°setDataå‡½æ•° 12345678910111213141516171819202122// page.jsclass Page &#123; constructor(config) &#123; this.data = config.data JSBridge.setData(config.data) // å°ç¨‹åºçš„onLoadç”Ÿå‘½å‘¨æœŸå‡½æ•° this.onLoad = config.onLoad // è¿™é‡Œä¸å°ç¨‹åºæœ‰ç‚¹ä¸ä¸€æ · // æ¨¡ä»¿vueå°†éç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°éƒ½èµ‹ç»™methodså±æ€§ if (config.methods) &#123; // å°†æ‰€æœ‰methodéƒ½æŒ‡ç»™class for (let key in config.methods) &#123; this.key = config.methods[key] &#125; &#125; &#125; setData (data) &#123; // JSBridgeæä¾›Nativeä¸jsäº’ç›¸è°ƒç”¨çš„api JSBridge.setData(data) &#125;&#125; å®šä¹‰æ¨¡æ¿æˆ‘ä»¬åº”è¯¥å®šä¹‰ä¸€ä¸ªhtmlæ¨¡æ¿ï¼Œç”¨æ¥åœ¨webviewä¸­æ¸²æŸ“UIã€‚1234567891011121314&lt;!-- templage.html --&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;title&gt;hybrid&lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- app domä¸‹æ¸²æŸ“UI --&gt; &lt;div id=\"app\"&gt;&#123;&#123;template&#125;&#125;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„é—®é¢˜ï¼šUIçš„æ›´æ–°ã€‚è€ƒè™‘åˆ°æ€§èƒ½ï¼Œå®ç°å·®é‡æ›´æ–°æ¯”è¾ƒå¥½ã€‚å°ç¼–å› æ­¤ä¹Ÿå†çœ‹äº†ä¸€éVueçš„è™šæ‹ŸDOMå®ç°ï¼Œå…¶ä¸­æ¶‰åŠåˆ°å·®é‡æ›´æ–°ã€‚ä½†æ˜¯ä¸ºäº†å¿«é€Ÿå®ç°åŸå‹ï¼Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œå…¨å±€æ›´æ–°ã€‚å¦‚ä½•è¿›è¡Œæ›´æ–°ï¼Œè¿™é‡Œé‡‡ç”¨nativeè°ƒç”¨webviewä¸­jsæ–¹æ³•æ¥å®ç°ã€‚123456789101112// templage.js// å¯ä»¥inlinevar preTree = null/*** æ¸²æŸ“UI* @param &#123;Object&#125; domTree æ ‘ç»“æ„*/window.render = function (domTree) &#123; if (!domTree) return // init UI document.querySelector('#app').innerHTML = domTree&#125; 12// javathis.webView.loadUrl(\"javascript:render('\" + newTemplate + \"')\"); è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½œæ‰‹æ¥å®ç°ä¸šåŠ¡ä»£ç äº†ã€‚ ä¸šåŠ¡ä»£ç å®ç°æ¨¡æ¿index.xmlå’Œindex.jsé€»è¾‘ï¼Œcssæš‚ä¸å®ç°ã€‚ index.xml 123&lt;div&gt; &lt;div onclick=\"onText\"&gt;&#123;&#123;text&#125;&#125;&lt;/div&gt;&lt;/div&gt; index.js 1234567891011121314151617var page = new Page(&#123; data: &#123; text: 'Hi, Java' &#125;, onLoad: function () &#123; this.setData(&#123; text: 'I am Javascript' &#125;) &#125;, methods: &#123; onText: function () &#123; this.setData(&#123; text: 'Hi, Javascript' &#125;) &#125; &#125;&#125;) Nativeç«¯é€šè¿‡å®ç°ä¸Šæ–‡çš„UIå’Œjsé€»è¾‘æˆ‘ä»¬éœ€è¦Nativeç«¯å®ç°JSBridge apiã€‚æˆ‘ä»¬é¦–å…ˆè¦è§£å†³çš„æ˜¯jså¼•æ“çš„ä½¿ç”¨ã€‚æœ¬æ–‡ä»¥Androidä¸ºä¾‹ï¼Œé€‰å–Chrome V8ä½œä¸ºjså¼•æ“ã€‚ J2V8J2V8ä½¿ç”¨Javaå°è£…äº†å¯¹Chrome V8çš„æ“ä½œï¼Œè·¨å¹³å°å¼€å‘Tabrisæ­£æ˜¯ä½¿ç”¨äº†J2V8æ¥å®ç°jsæ„å»ºåŸç”Ÿåº”ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å®˜ç½‘https://eclipsesource.com/blogs/tutorials/getting-started-with-j2v8/äº†è§£å¦‚ä½•ä½¿ç”¨J2V8ã€‚ Androidå¼•å…¥ä½¿ç”¨Android Studioæ–°å»ºAPPåï¼Œåœ¨build.gradleæ–‡ä»¶ä¸­æ·»åŠ J2V8ä¾èµ–ï¼Œé€‰å–aarç‰ˆï¼ˆå·²ç¼–è¯‘ï¼‰æˆ–è€…ä½¿ç”¨J2V8æºç è‡ªè¡Œç¼–è¯‘ï¼š123dependencies &#123; implementation 'com.eclipsesource.j2v8:j2v8:4.8.2@aar'&#125; å®ç°JSBridgeå®šä¹‰ä¸€ä¸ªJavaç±»JSBridgeï¼Œè¯¥ç±»è‡³å°‘åŒ…å«setDataæ¥å£1234567891011121314151617181920212223242526272829303132333435363738394041424344package test.site.yiyan.j2v8;import android.util.Log;import android.webkit.WebView;import com.eclipsesource.v8.V8Object;public class JSBridge &#123; String template; WebView webView; V8Object page; public void setPage (V8Object page) &#123; this.page = page; &#125; public void setWebView (WebView webView) &#123; this.webView = webView; &#125; public void setTemplate (String xml) &#123; this.template = xml; &#125; public String getTemplate () &#123; return this.template; &#125; public void setData (V8Object data) &#123; // dataä¸šåŠ¡é€»è¾‘çŠ¶æ€ String[] keys = data.getKeys(); String newTemplate = this.template; // éå†dataä¸­çš„çŠ¶æ€ for (int i = 0; i &lt; keys.length; i++) &#123; Log.i(\"setData\", keys[i] + ':' + data.get(keys[i])); // å°†dataçŠ¶æ€å†™å…¥UI newTemplate = newTemplate.replace(\"&#123;&#123;\" + keys[i] + \"&#125;&#125;\", data.get(keys[i]).toString()); &#125; data.release(); if (keys.length &gt; 0) &#123; // Nativeé€šè¿‡webviewè°ƒç”¨jsï¼Œæ›´æ–°UI this.webView.loadUrl(\"javascript:render('\" + newTemplate + \"')\"); &#125; &#125;&#125; Nativeåˆå§‹åŒ–æ¸²æŸ“Androidä¸­æˆ‘ä»¬é¦–å…ˆè·å–template.htmlå†…å®¹ï¼Œè¯ä¸å¤šè¯´ï¼Œçœ‹ä¸‹é¢çš„Androidä»£ç æ³¨é‡Šã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162V8 jsRuntime;WebView mWebview;ProgressBar mProgressBar;V8Object mJSPageClass;JSBridge jsBridge;V8Object page;void loadHTMLTemplate () &#123; String htmlTemplate = Utils.getAssetsScript(this, \"js/template.html\"); // åŠ è½½JSBridge initJSBridge(); mWebview.setWebChromeClient(new WebChromeClient() &#123; @Override public void onProgressChanged(WebView view, int newProgress) &#123; mProgressBar.setProgress(newProgress); if (newProgress == 100) &#123; mProgressBar.setVisibility(View.GONE); // webviewåŠ è½½å®Œæˆå loadBussiness(); &#125; super.onProgressChanged(view, newProgress); &#125; &#125;); mWebview.loadDataWithBaseURL(null, htmlTemplate, \"text/html\", \"utf-8\", null);&#125;void initJSBridge () &#123; jsBridge = new JSBridge(); V8Object jsBridgeObj = new V8Object(jsRuntime); jsRuntime.add(\"JSBridge\", jsBridgeObj); jsBridgeObj.registerJavaMethod(jsBridge, \"setData\", \"setData\", new Class&lt;?&gt;[] &#123;V8Object.class&#125;); jsBridgeObj.release();&#125;void loadBussiness () &#123; // Chrome V8 jså¼•æ“åŠ è½½page.js String pageJS = Utils.getAssetsScript(this, \"js/page.js\"); mJSPageClass = jsRuntime.executeObjectScript(pageJS); // è·å–ä¸šåŠ¡æ¨¡æ¿ String indexXML = Utils.getAssetsScript(this, \"demo/index/index.xml\"); jsBridge.setWebView(this.mWebview); jsBridge.setTemplate(indexXML); Log.i(\"J2V8\", \"indexXML:\" + indexXML); // åŠ è½½ä¸šåŠ¡js String indexJS = Utils.getAssetsScript(this, \"demo/index/index.js\"); jsRuntime.executeScript(indexJS); page = jsRuntime.getObject(\"page\"); Log.i(\"J2V8\", page.toString()); // è·å–pageçš„dataå±æ€§ V8Object pageData = page.getObject(\"data\"); // æ¸²æŸ“åˆå§‹UI mWebview.loadUrl(\"javascript:render('\" + indexXML + \"')\"); // Nativeè°ƒç”¨V8ä¸­jså‡½æ•°ï¼Œæ‰§è¡Œç”Ÿå‘½å‘¨æœŸï¼šonLoad page.executeFunction(\"onLoad\", null); pageData.release();&#125; æ€»ç»“è¿™æ˜¯å•¥å•Šï¼Ÿè¿™ä¸æ˜¯å†é€ ä¸€ä¸ªæµè§ˆå™¨å—ï¼Ÿï¼ ä¸ä¸ï¼Œæµè§ˆå™¨è¿œæ¯”è¿™å¤æ‚ï¼Œå¹¶ä¸”jsä¸èƒ½ç›´æ¥æ“ä½œdomï¼ˆä¹Ÿå¯ä»¥å®šä¹‰æ¥å£æ¥å®ç°ï¼‰ï¼Œè¿˜æœ‰å¾ˆå¤šå†…å®¹éœ€è¦å®Œå–„ï¼Œä¾‹å¦‚å®ç°jsçš„windowå‡½æ•°ï¼šsetTimeoutç­‰ã€‚ è‡³äºæ€§èƒ½æ–¹é¢ï¼Œæ˜¯ä¸æ˜¯æ¯”ç›´æ¥ä½¿ç”¨webviewçš„æ€§èƒ½è¦å¥½ï¼Œè¿™è¿˜è¦è¿›ä¸€æ­¥å®Œå–„ä¸°å¯ŒåŸå‹å’ŒDEMOã€‚ å…¶å®åœ¨å®˜æ–¹çš„æ–‡æ¡£ä¸­å·²ç»é˜è¿°äº†å®ç°åŸç†ï¼š","categories":[],"tags":[]},{"title":"J2V8å®ç°Javaä¸Javascriptäº’ç›¸è°ƒç”¨","slug":"Registering-Java-Callbacks-width-J2V8","date":"2019-02-18T02:25:33.000Z","updated":"2019-02-18T07:22:54.477Z","comments":true,"path":"2019/02/18/Registering-Java-Callbacks-width-J2V8/","link":"","permalink":"https://yiyan.site/2019/02/18/Registering-Java-Callbacks-width-J2V8/","excerpt":"","text":"Javaè°ƒç”¨JSæ–¹æ³•ç¼–å†™ä¸€ä¸ªè¿”å›Stringçš„JSæ–¹æ³•1234// jsfunction javaCallJSFunc (msg) &#123; return msg + ' -&gt; Hi, Java!'&#125; å¼•å…¥J2V8åº“æ—¶å¯ä»¥å¼•å…¥jaræˆ–è€…Androidçš„aaråŒ…ï¼Œæˆ–è€…è‡ªè¡Œç¼–è¯‘ã€‚ä¾‹å¦‚Android Studioå¼•å…¥ï¼šimplementation &#39;com.eclipsesource.j2v8:j2v8:4.8.2@aar&#39;ä¸‹è¿°ä¾‹å­å‡æ˜¯åœ¨Androidä¸­è¿è¡Œã€‚ 12345678910111213// javavoid javaCallJSFunc () &#123; V8 jsRuntime = V8.createV8Runtime(); jsRuntime.executeScript(\"function javaCallJSFunc (msg) &#123;\\n\" + \" return msg + ' -&gt; Hi, Java!'\\n\" + \"&#125;\"); // æ·»åŠ å‚æ•° V8Array params = new V8Array(jsRuntime).push(\"Hi, Javascript!\"); String result = jsRuntime.executeStringFunction(\"javaCallJSFunc\", params); Log.e(\"Test\", \"javaCallJSFunc result = \" + result); // éœ€æ‰‹åŠ¨é‡Šæ”¾èµ„æº jsRuntime.release();&#125; JSè°ƒç”¨Javaæ–¹æ³•jsè°ƒç”¨Javaæ–¹æ³•ï¼Œä»å®ç°æ–¹å¼ä¸Šæœ‰ä¸¤ç§ï¼šJavaCallbackã€Relfectively JavaCallbackå‡è®¾æˆ‘ä»¬åœ¨Javascriptä¸­è°ƒç”¨Javaçš„setDataæ–¹æ³•123//jsvar date = new Date().toDateString()setData(date) åœ¨Javaä¸­å®ä¾‹åŒ–ä¸€ä¸ªJavaVoidCallbackçš„åŒ¿åç±»1234567891011121314151617181920212223// java// jsCallJavaFunc jsè°ƒç”¨Javaæ–¹æ³•void jsCallJavaFunc () &#123; V8 jsRuntime = V8.createV8Runtime(); JavaVoidCallback setData = new JavaVoidCallback() &#123; @Override public void invoke(V8Object v8Object, V8Array v8Array) &#123; if (v8Array.length() &gt; 0) &#123; // è·å–jsä¼ å…¥çš„å‚æ•° Object arg1 = v8Array.get(0); Log.i(\"J2V8\", \"jsCallJavaFunc -&gt; \" + arg1.toString()); if (arg1 instanceof Releasable) &#123; ((Releasable) arg1).release(); &#125; &#125; &#125; &#125;; jsRuntime.registerJavaMethod(setData, \"setData\"); jsRuntime.executeScript(\"var date = new Date().toDateString()\\n\" + \" setData(date)\"); // éœ€æ‰‹åŠ¨é‡Šæ”¾èµ„æº jsRuntime.release();&#125; Relfectivelyæ›´ç¡®åˆ‡çš„è¯´æ˜¯ç±»ä¼¼äºåœ¨Javascriptä¸­ï¼Œç»™å¯¹è±¡å®šä¹‰æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯jsè°ƒç”¨Java Objectçš„æ–¹æ³•ã€‚åˆ›å»ºä¸€ä¸ªJavaç±»ï¼Œè¯¥ç±»åŒ…å«Javascriptå¯ä»¥è°ƒç”¨çš„æ–¹æ³•ã€‚1234567// java...public class JSBridge &#123; public void setData (String data) &#123; Log.i(\"JSBridge\", data); &#125;&#125; åœ¨jsä¸­è°ƒç”¨JSBridge.setDataæ–¹æ³•12var date = new Date().toDateString()JSBridge.setData(date) åœ¨Javaä¸­å°†JSBridgeæš´éœ²ç»™js123456789101112// javavoid jsCallJavaObject () &#123; JSBridge jsBridge = new JSBridge(); V8Object jsBridgeObj = new V8Object(jsRuntime); // å°†jsBridgeæš´éœ²ç»™js jsRuntime.add(\"JSBridge\", jsBridgeObj); // æ³¨å†Œæ–¹æ³• jsBridgeObj.registerJavaMethod(jsBridge, \"setData\", \"setData\", new Class&lt;?&gt;[] &#123;String.class&#125;); jsBridgeObj.release(); jsRuntime.executeScript(\"var date = new Date().toDateString()\\n\" + \"JSBridge.setData(date)\");&#125;","categories":[],"tags":[{"name":"J2V8, Java, Javascript","slug":"J2V8-Java-Javascript","permalink":"https://yiyan.site/tags/J2V8-Java-Javascript/"}]},{"title":"webpack devServerä»£ç†è§£å†³è·¨åŸŸå¤±è´¥çš„æƒ…å†µï¼šgetè¯·æ±‚æ— originï¼Œè€Œpostè¯·æ±‚æœ‰","slug":"webpack-proxy","date":"2019-02-13T02:49:33.000Z","updated":"2019-02-13T05:11:12.882Z","comments":true,"path":"2019/02/13/webpack-proxy/","link":"","permalink":"https://yiyan.site/2019/02/13/webpack-proxy/","excerpt":"","text":"å‰ååç«¯åˆ†ç¦»å¼€å‘ï¼Œæ™®éä¼šå­˜åœ¨è·¨åŸŸçš„é—®é¢˜ã€‚å‰ç«¯åœ¨ä½¿ç”¨webpackå¼€å‘æ—¶ï¼Œé€šå¸¸é‡‡ç”¨ä»£ç†çš„æ–¹å¼æ¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚ é€šå¸¸åœ¨webpackçš„devServerè¿›è¡Œå¦‚ä¸‹é…ç½®123456789devServer: &#123; ... proxy: &#123; '/api': &#123; target: \"http://target.api.domain.com\", changeOrigin: true, &#125; &#125;,&#125; å¦‚æ­¤é…ç½®åŸºæœ¬å¯ä»¥è§£å†³å¤§éƒ¨åˆ†çš„è·¨åŸŸé—®é¢˜ã€‚ ä½†æ˜¯ï¼Œåœ¨åå°å°†å…è®¸çš„è·¨åŸŸåœ°å€æŒ‡å®šä¸ºä¸€ä¸ªåï¼Œä¸Šè¿°é…ç½®ä¾¿å¯¹postè¯·æ±‚ä¸ç”Ÿæ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯postè¯·æ±‚è·¨åŸŸå¤±è´¥ï¼Œè€Œgetè¯·æ±‚æˆåŠŸã€‚ å¯¹æ¯”getå’Œpostè¯·æ±‚çš„ä¸åŒï¼Œå‘ç°getçš„è¯·æ±‚å¤´é‡Œé¢æ²¡æœ‰originå­—æ®µï¼Œè€Œpostè¯·æ±‚é‡Œé¢æœ‰originå­—æ®µã€‚ä¸ºä»€ä¹ˆgetè¯·æ±‚å¤´éƒ¨æ²¡æœ‰originå­—æ®µï¼Œè€Œpostè¯·æ±‚å¤´éƒ¨æœ‰originå­—æ®µ åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨curlå·¥å…·è¯·æ±‚æ¥å£ï¼Œheaderä¸­ä¸è®¾ç½®originå­—æ®µè¯·æ±‚æˆåŠŸï¼Œä¸€æ—¦è®¾ç½®ä¸ºæœ¬æœºå¼€å‘æœåŠ¡IPåœ°å€å’Œç«¯å£ï¼Œpostè¯·æ±‚å°±å¤±è´¥ã€‚ åœ¨webpackçš„devServeré‡‡ç”¨http-proxy-middlewareæ¥ä»£ç†è½¬å‘è¯·æ±‚ï¼Œé…ç½®ä¸­changeOriginçš„ä½œç”¨æ˜¯ï¼š changes the origin of the host header to the target URLã€‚ changeOrigin: trueä¸ºä»€ä¹ˆæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿæ²¡æœ‰è¿›è¡ŒæŠ“åŒ…åˆ†æã€‚ http-proxy-middlewareçš„é…ç½®ä¸­è¿˜æœ‰ä¸€ä¸ªheadersçš„é…ç½®ï¼Œå°†ä¸Šè¿°é…ç½®ä¿®æ”¹ä¸ºï¼š12345678910111213devServer: &#123; ... proxy: &#123; '/api': &#123; target: \"http://target.api.domain.com\", changeOrigin: true, headers: &#123; host: \"http://target.api.domain.com\", origin: \"http://target.api.domain.com\" &#125; &#125; &#125;,&#125; æˆåŠŸ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šä¸ºä»€ä¹ˆgetè¯·æ±‚å¤´éƒ¨æ²¡æœ‰originå­—æ®µï¼Œè€Œpostè¯·æ±‚å¤´éƒ¨æœ‰originå­—æ®µï¼Ÿ","categories":[],"tags":[]},{"title":"macä¸‹è½½ç¼–è¯‘chromiumæºç ","slug":"mac-build-chromium","date":"2018-11-21T02:11:58.000Z","updated":"2018-11-21T06:55:44.955Z","comments":true,"path":"2018/11/21/mac-build-chromium/","link":"","permalink":"https://yiyan.site/2018/11/21/mac-build-chromium/","excerpt":"","text":"æ­¤æ–‡ç« æ¥è‡ªç½‘ç»œã€‚ç”±äºæŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹æ²¡æœ‰æˆåŠŸç¼–è¯‘iOSç‰ˆï¼Œè€ŒæŒ‰æ­¤æ–‡ç« æˆåŠŸç¼–è¯‘ï¼Œç‰¹æ­¤è®°å½•ï¼ŒåŸæ–‡é“¾æ¥ å®‰è£…depot_toolså·¥å…·è·å–depot_toolså·¥å…·1git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git æ·»åŠ ç¯å¢ƒå˜é‡æŠŠdepot_toolså·¥å…·è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œ~/.bashrc or ~/.zshrcã€‚1export PATH=$PATH:/path/to/depot_tools è·å–chromiumæºç 123mkdir chromiumcd chromiumfetch --no-history chromium --no-historyå‚æ•°å¯ä»¥ä¸ä¸‹è½½ä»¥å¾€çš„å†å²ä¿¡æ¯ã€‚å¦‚æœç½‘ç»œä¸­æ–­äº†ï¼Œè¾“å…¥gclient syncç»§ç»­ä¸‹è½½ã€‚ è·å–ä¾èµ–ï¼š1gclient runhooks æ›´æ–°ä»£ç ï¼š12git rebase-updategclient sync ç¼–è¯‘chromiumæºç 1234GYP_DEFINES=mac_sdk=10.11ï¼ˆå¯é€‰ï¼‰export GYP_GENERATORS=ninja,xcode-ninja./build/gyp_chromiumninja -C out/Release/ chrome æœ€æ–°ä½¿ç”¨gnç”¨äºç”Ÿæˆninjaæ–‡ä»¶ï¼Œgn gen out/Defaultã€‚ é—®é¢˜ï¼š12345678910111213Traceback (most recent call last): File \"./gyp-mac-tool\", line 712, in &lt;module&gt; sys.exit(main(sys.argv[1:])) File \"./gyp-mac-tool\", line 29, in main exit_code = executor.Dispatch(args) File \"./gyp-mac-tool\", line 44, in Dispatch return getattr(self, method)(*args[1:]) File \"./gyp-mac-tool\", line 67, in ExecCopyBundleResource self._CopyStringsFile(source, dest) File \"./gyp-mac-tool\", line 133, in _CopyStringsFile import CoreFoundationImportError: No module named CoreFoundation[6208/20844] MACTOOL copy-bundle-resource ../../chrome/app/nibs/AppMenu.xib è§£å†³ï¼š1pip install pyobjc è¿è¡Œchromiunç¼–è¯‘å®Œæˆåä¼šåœ¨out/Releaseä¸‹ç”ŸæˆChromium.appï¼Œç›´æ¥è¿è¡Œï¼š ç¼–è¯‘iOSå¹³å°ä¸ºäº†ç¼–è¯‘æˆiOSå¹³å°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æ¥æŠŠæœ¬åœ°å­˜åœ¨çš„Mac checkoutè½¬æˆiOS checkoutï¼Œåªè¦åœ¨chromium/.gclientæ–‡ä»¶çš„æœ€ååŠ ä¸€è¡Œtarget_os = [â€œiosâ€] è¿™é‡Œä½¿ç”¨gnç”Ÿæˆninjaæ–‡ä»¶(æŒ‰ç…§å®˜æ–¹çš„æ•™ç¨‹ï¼Œæ­£æ˜¯ç¼ºå°‘æ­¤å¤„)ï¼š1gn args out/Debug-iphonesimulator å†™å…¥å†…å®¹ï¼š123456789# Set to true if you have a valid code signing key.ios_enable_code_signing = falsetarget_os = \"ios\"# Set to \"x86\", \"x64\", \"arm\", \"armv7\", \"arm64\". \"x86\" and \"x64\" will create a# build to run on the iOS simulator (and set use_ios_simulator = true), all# others are for an iOS device.target_cpu = \"x64\"# Release vs debug build.is_debug = true æœ€åæ‰§è¡Œï¼š1gclient sync ç¼–è¯‘ï¼šè¿™é‡Œæœ‰ç‚¹ä¸ä¸€æ ·ï¼Œå¯ä»¥å…ˆå°è¯•ï¼š1autoninja -C out/Debug-iphonesimulator gn_all or 1ninja -C out/Debug-iphonesimulator All è¿è¡Œæµ‹è¯•appï¼ˆæœºå‹æ˜¯iPhone 6,ç³»ç»ŸiOS 12.1ï¼‰:1out/Debug-iphonesimulator/iossim -d \"iPhone 6\" -s 12.1 out/Debug-iphonesimulator/Chromium.app æˆåŠŸ å•ä¸ªæ¨¡å—1ninja -C out/Debug-iphonesimulator net 123export GYP_GENERATORS=xcode-ninja export CHROMIUM_GYP_FILE='net/net.gyp'./build/gyp_chromium å‚è€ƒæ–‡æ¡£Get the Code: Checkout, Build, &amp; Run Chromium","categories":[],"tags":[{"name":"chromium","slug":"chromium","permalink":"https://yiyan.site/tags/chromium/"}]},{"title":"vue-loaderå¦‚ä½•é…ç½®cssModules","slug":"vue-loaderå¦‚ä½•é…ç½®cssModules","date":"2018-10-31T11:16:32.000Z","updated":"2018-10-31T12:16:19.073Z","comments":true,"path":"2018/10/31/vue-loaderå¦‚ä½•é…ç½®cssModules/","link":"","permalink":"https://yiyan.site/2018/10/31/vue-loaderå¦‚ä½•é…ç½®cssModules/","excerpt":"","text":"åœ¨ä½¿ç”¨vue cli 2ç³»åˆ—è¿›è¡Œæ¨¡å—ç¼–ç¨‹æ—¶ï¼Œä¸ºé¿å…csså†²çªï¼Œæˆ‘ä»¬å¸¸é‡‡ç”¨vue-loaderçš„scopedå’Œmoduleæ–¹æ³•æ¥å®ç°ã€‚ scopedscopedä½¿ç”¨æ–¹æ³•æœ€ä¸ºç®€å•ï¼Œåªéœ€è¦åœ¨.vueæ–‡ä»¶çš„&lt;style&gt;æ ‡ç­¾å¢åŠ scopedå±æ€§å³å¯ã€‚123456789&lt;template&gt; &lt;div class=\"example\"&gt;hi&lt;/div&gt;&lt;/template&gt;&lt;style scoped&gt;.example &#123; color: red;&#125;&lt;/style&gt; scoped:æ³¨æ„âš ï¸ä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå­ç»„ä»¶çš„è·ŸèŠ‚ç‚¹ä¼šæ”¶åˆ°çˆ¶ç»„ä»¶çš„å½±å“ï¼Œè¿™ä¹Ÿæ˜¯scopedæœ¬èº«çš„ç‰¹æ€§å†³å®šçš„ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬åœ¨å­ç»„ä»¶çš„æ ¹ç»“ç‚¹è®¾ç½®wrap classï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä¹Ÿè®¾ç½®wrap classã€‚child.vue123456789&lt;template&gt; &lt;div class=\"wrap\"&gt;test&lt;/div&gt;&lt;/template&gt;&lt;style scoped&gt;.wrap&#123; margin-top: 10px&#125;&lt;/style&gt; parent.vue1234567891011121314151617181920&lt;template&gt; &lt;div class=\"wrap\"&gt; &lt;child /&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from './child'export &#123; components: &#123; Child &#125;&#125;&lt;/script&gt;&lt;style scoped&gt;.wrap&#123; padding-top: 20px&#125;&lt;/style&gt; æ•ˆæœä¸ºï¼š è§£å†³æ–¹æ³•ï¼š æ”¹å­ç»„ä»¶æˆ–çˆ¶ç»„ä»¶çš„classåï¼šæ”¹åå­—æ˜¯ä¸é˜”èƒ½çš„ï¼Œè¿™è¾ˆå­éƒ½ä¸é˜”èƒ½çš„ã€‚å¦‚æœè¦æ”¹ï¼Œæˆ‘ä»¬è¦æ¨¡å—åŒ–cssæœ‰ä½•ç”¨ï¼Ÿ å­ç»„ä»¶å¤–å†åŒ…è£¹ä¸€ä¸ªæ— classçš„å…ƒç´ ï¼šç¡®å®èƒ½è§£å†³ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•æˆ‘æ˜¯æ‹’ç»çš„ï¼Œå› ä¸ºä¼šå¢åŠ dom CSS Modulesè¯´åˆ°ä¸Šé¢çš„é—®é¢˜ï¼ŒCSS Moduleså°±å¯ä»¥è§£å†³ï¼šCSS Modulesä¼šç»™æ¯ä¸ªclsssç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„classåï¼Œå…¶ä¾æ®äº†æ–‡ä»¶è·¯å¾„ç­‰ä¿¡æ¯ï¼Œé‡‡ç”¨hashåŠ éšæœºæ•°å¾—å‡ºå”¯ä¸€çš„classåã€‚åœ¨.vueæ–‡ä»¶ä¸­ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š123456789&lt;template&gt; &lt;div :class=\"$style.wrap\"&gt;&lt;/div&gt;&lt;/template&gt;&lt;style module&gt;.wrap&#123; margin: auto;&#125;&lt;/style&gt; ä½†æ˜¯æˆ‘ä¼šå°æ”¹ä¸€ä¸‹ï¼Œå› ä¸ºæ‡’å¾—æ¯æ¬¡å†™$style123456789&lt;template&gt; &lt;div :class=\"s.wrap\"&gt;&lt;/div&gt;&lt;/template&gt;&lt;style module=\"s\"&gt;.wrap&#123; margin: auto;&#125;&lt;/style&gt; æœ¬æ–‡ä¸­å¿ƒæ€æƒ³ï¼šè¡¨è¾¾äº†ä½œè€…â€¦åœ¨vue-cli 2ç³»åˆ—ä¸­ä½¿ç”¨CSS Modulesæ—¶ï¼Œå¦‚æœä»…ä»…é‡‡ç”¨ä¸Šè¿°æ–¹å¼ï¼Œä¼šå‘ç°å¾ˆéš¾è¿›è¡Œè°ƒè¯•äº†ï¼šå®Œå…¨ä¸çŸ¥é“ç½‘é¡µæ¸²æŸ“å‡ºçš„classå¯¹åº”æºç ä¸­çš„å“ªä¸€ä¸ªã€‚ æ‰€ä»¥éœ€è¦åœ¨vue-load.conf.jsæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œæ¥å‘Šè¯‰vue-loaderå¦‚ä½•ç”Ÿæˆclassåã€‚ä½œè€…é€šå¸¸é‡‡ç”¨ä»¥ä¸‹é…ç½®æ¥å‘½åï¼š1234cssModules: &#123; localIdentName: '[local]-[hash:base64:5]', // æŒ‡å®šå‘½åé‡‡ç”¨ï¼šå±€éƒ¨å-5ä½çš„hash camelCase: true&#125; æŒ‡å®šå‘½åå®Œæ•´å‚è€ƒä¸º1localIdentName: '[path][name]---[local]---[hash:base64:5]' å‘½åå…·ä½“å¯ä»¥å‚è€ƒpostcss-modulesï¼Œä»¥åŠvue-loader v14","categories":[],"tags":[{"name":"vue-cli","slug":"vue-cli","permalink":"https://yiyan.site/tags/vue-cli/"}]},{"title":"go-kit_examples_shipping-analysis","slug":"go-kit-examples-shipping-analysis","date":"2018-10-24T06:32:34.000Z","updated":"2018-10-31T01:09:16.569Z","comments":true,"path":"2018/10/24/go-kit-examples-shipping-analysis/","link":"","permalink":"https://yiyan.site/2018/10/24/go-kit-examples-shipping-analysis/","excerpt":"","text":"ç›¸å…³package prometheus ç›‘æ§æ•°æ®åº“ flag è§£æå‘½ä»¤å‚æ•°","categories":[],"tags":[]},{"title":"ES6:çœ‹ä¸æ‡‚çš„letç±»å‹ä¸é—­åŒ…é—´çš„å…³ç³»+Babelçš„bug","slug":"es6-let-closure","date":"2018-10-10T06:13:27.000Z","updated":"2018-10-10T08:51:52.812Z","comments":true,"path":"2018/10/10/es6-let-closure/","link":"","permalink":"https://yiyan.site/2018/10/10/es6-let-closure/","excerpt":"","text":"letæ˜¯ES6å˜é‡ç±»å‹ï¼Œå…¶åªåœ¨ä»£ç å—å†…æœ‰æ•ˆã€‚é—­åŒ…æ˜¯æœ‰å‡½æ•°ä»¥åŠåˆ›å»ºè¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒç»„åˆè€Œæˆï¼Œè¿™ä¸ªç¯å¢ƒåŒ…å«äº†è¿™ä¸ªé—­åŒ…åˆ›å»ºæ—¶æ‰€èƒ½è®¿é—®çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚ å¦‚æœåˆç†ä½¿ç”¨é—­åŒ…ï¼Œå¯ä»¥ä½¿ç”¨varå®ç°letå±€éƒ¨æœ‰æ•ˆçš„æ•ˆæœã€‚æ˜¾ç„¶è¿™æ˜¯å¤šä½™çš„ï¼Œå› ä¸ºbabelå·²ç»èƒ½å¸®æˆ‘ä»¬åšäº†ï¼Œå¹¶ä¸”å¾ˆå¤šæ–°ç‰ˆæµè§ˆå™¨éƒ½æ”¯æŒletï¼Œæ‰€æœ‰æœ¬æ–‡ç»“æŸã€‚ ç­‰ç­‰ï¼Œbabeléƒ½å¹²äº†å•¥ï¼Ÿä¸ºå•¥èƒ½å°†letè½¬ç ä½¿ä»£ç å…¼å®¹æ—§ç‰ˆæµè§ˆå™¨ï¼Ÿ å…¼å®¹è½¬ç æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µæ¯”è¾ƒç®€å•çš„babelè½¬ç  æˆ‘ä»¬æ¥æ¬ä¸€æ®µç‰¹åˆ«å¤æ‚çš„letç±»å‹ç”³æ˜ä»£ç  code11234567var a = [];for (let i = 0; i &lt; 10; i++) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;a[6](); // 6 åœ¨babelå®˜ç½‘å°†å…¶è½¬ç ä¸ºå…¼å®¹ä»£ç ï¼š code21234567891011121314\"use strict\";var a = [];var _loop = function _loop(i) &#123; a[i] = function () &#123; console.log(i); &#125;;&#125;;for (var i = 0; i &lt; 10; i++) &#123; _loop(i);&#125;a[6](); // 6 è€å¸æœºé©¬ä¸Šå°±çœ‹å‡ºäº†ï¼šå°†letè½¬ä¸ºäº†é—­åŒ… é—­åŒ…æˆ‘ä»¬æ¥çœ‹çœ‹MDNä¸Šçš„ä¸€æ®µä¾‹å­ code312345678910function makeFunc() &#123; var name = \"Mozilla\"; function displayName() &#123; alert(name); &#125; return displayName;&#125;var myFunc = makeFunc();myFunc(); é—­åŒ…æ˜¯ç”±å‡½æ•°ä»¥åŠåˆ›å»ºè¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒç»„åˆè€Œæˆã€‚è¿™ä¸ªç¯å¢ƒåŒ…å«äº†è¿™ä¸ªé—­åŒ…åˆ›å»ºæ—¶æ‰€èƒ½è®¿é—®çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚æˆ‘ä»¬ä¸€é€šåˆ†æä¾¿å¯ä»¥çœ‹å‡ºcode3é—­åŒ…çš„åŸºæœ¬ç»“æ„ï¼š code412345function (j) &#123; return function () &#123; console.log(j) &#125;&#125;(i) code4çš„é—­åŒ…æ˜¯ç«‹å³æ‰§è¡Œ åˆ©ç”¨é—­åŒ…ï¼Œä½¿var == letcode4çš„ç»“æ„ä¸æ­£æ˜¯code2çš„ç®€å†™å—ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†code2æ”¹å†™ä¸ºï¼šcode5123456789101112\"use strict\";var a = [];for (var i = 0; i &lt; 10; i++) &#123; a[i] = function (j) &#123; return function () &#123; console.log(j) &#125; &#125;(i)&#125;a[6](); // 6 è¯´å¥½çš„ç®€å†™å‘¢ï¼Ÿï¼ä»”ç»†é˜…è¯»è¿™å¥è¯é—­åŒ…æ˜¯ç”±å‡½æ•°ä»¥åŠåˆ›å»ºè¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒç»„åˆè€Œæˆã€‚è¿™ä¸ªç¯å¢ƒåŒ…å«äº†è¿™ä¸ªé—­åŒ…åˆ›å»ºæ—¶æ‰€èƒ½è®¿é—®çš„æ‰€æœ‰å±€éƒ¨å˜é‡ã€‚ letæ˜¯å—çº§ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯å±€éƒ¨ä½œç”¨åŸŸã€‚é—­åŒ…ä¹Ÿæ˜¯èƒ½è®¿é—®å±€éƒ¨ä½œç”¨åŸŸã€‚ code4æ­£æ˜¯å°†å˜é‡ièµ‹å€¼ç»™å‡½æ•°çš„å±€éƒ¨å˜é‡jï¼Œcode5ä¸­æ•°ç»„açš„æ¯ä¸ªiteméƒ½æ˜¯è¯¥å‡½æ•°å®ä¾‹çš„å¼•ç”¨ã€‚åœ¨letå‡ºç°ä¹‹å‰ï¼Œåœ¨å¾ªç¯ä¸­å†™é—­åŒ…æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜ã€‚ æˆ‘ä»¬ä¸é¼“åŠ±åœ¨å¾ªç¯ä¸­åˆ›å»ºé—­åŒ…ï¼Œè¿‡å¤šçš„é—­åŒ…ä¼šä»˜å‡ºæ€§èƒ½ä»£ä»·ã€‚ Babelçš„bugæ„å¤–å‘ç°äº†ä¸€ä¸ªBabelçš„å°bugã€‚æˆ‘ä»¬åœ¨æœ€æ–°çš„Chrome/Firefoxæµè§ˆå™¨ä¸­è¿è¡Œè¿™æ®µä»£ç ï¼š code61234for (let i = 0; i &lt; 3; i++) &#123; let i = 'abc'; console.log(i, new Date().getTime());&#125; ä¼šå‘ç°è¾“å‡ºç»“æœä¸º3æ¬¡â€abc 1539160907***â€ã€‚å°†code6é€šè¿‡Babelè½¬ç å¾—åˆ°code7 code71234for (var i = 0; i &lt; 3; i++) &#123; var i = 'abc'; console.log(i, new Date().getTime());&#125; code7åœ¨æµè§ˆå™¨ä¸­ä»…ä»…è¿è¡Œäº†1æ¬¡ï¼Œè¾“å‡ºç»“æœä¸ºâ€abc 1539160907***â€ é˜®è€å¸ˆè®²ï¼š forå¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œå°±æ˜¯è®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚","categories":[],"tags":[]},{"title":"æ·±å…¥è§£ævue-cli 2.9.*å®ç°åŸç†","slug":"review-vue-cli-2-9","date":"2018-10-08T09:10:03.000Z","updated":"2018-10-08T12:09:48.998Z","comments":true,"path":"2018/10/08/review-vue-cli-2-9/","link":"","permalink":"https://yiyan.site/2018/10/08/review-vue-cli-2-9/","excerpt":"","text":"vue-cli 3.0å·²å‡ºï¼Œä½ ä¸ºä»€ä¹ˆè¿˜è¦çœ‹è¿™ä¸ªï¼Ÿ Vue-clié¡¹ç›®ç»“æ„ å…¶ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ç‚¹åœ¨package.json\\bin\\libè¿™3ä¸ªåœ°æ–¹ã€‚ package.jsonpackage.jsonä¸­ä¸»è¦å…³æ³¨bin:12345\"bin\": &#123; \"vue\": \"bin/vue\", \"vue-init\": \"bin/vue-init\", \"vue-list\": \"bin/vue-list\"&#125; nodejsåœ¨è§£æå‘½ä»¤æ—¶ä¸»è¦é€šè¿‡è¿™ä¸ªbinæ¥è¿è¡Œç›¸åº”çš„æ–‡ä»¶ã€‚&quot;vue&quot;:&quot;bin/vue&quot;nodejsä¼šè¿è¡Œbinæ–‡ä»¶å¤¹ä¸‹çš„vueæ–‡ä»¶ï¼ŒåŒç†ï¼Œå…¶ä»–ä¸¤ä¸ªå‘½ä»¤ä¹Ÿä¸€æ ·ã€‚ bin/vueè¯¥æ–‡ä»¶å†…å®¹æ¯”è¾ƒå°‘ï¼Œå…¶å®æ•´ä¸ªè„šæœ¬ä¸­ä»£ç é‡éƒ½æ¯”è¾ƒå°‘ï¼Œå› ä¸ºæ¨¡æ¿å†…å®¹éƒ½æ˜¯ä»githubä¸Šä¸‹è½½çš„ã€‚12345678910111213#!/usr/bin/env nodeconst program = require('commander')program .version(require('../package').version) .usage('&lt;command&gt; [options]') .command('init', 'generate a new project from a template') .command('list', 'list available official templates') .command('build', 'prototype a new project') .command('create', '(for v3 warning only)')program.parse(process.argv) è¿™é‡Œåˆ—å‡ºäº†è¿è¡Œvueå‘½ä»¤æ—¶çš„æç¤ºã€‚å¦‚æœåœ¨æ§åˆ¶å°è¿è¡Œvue initåˆ™ä¼šå‡ºç°å¦‚ä¸‹å†…å®¹ï¼š ç–‘æƒ‘ï¼šè¿™ä¸ªæ˜¯å“ªæ¥çš„?bin/vueæ–‡ä»¶ä¸­å¹¶æ²¡æœ‰è¿™äº›å†…å®¹ã€‚æ­£æ˜¯è¿™ä¸ªç–‘æƒ‘å¯¼è‡´äº†è¿™ä¸ªæ–‡ç« çš„å‡ºç°ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹package.jsonçš„binä¸‹çš„vue-initå‘½ä»¤ï¼Œå…¶è¿è¡Œçš„æ˜¯bin/vue-init bin/vue-initæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¯¥æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹1234567891011121314151617181920212223242526#!/usr/bin/env nodeconst program = require('commander')/** * Usage. */program .usage('&lt;template-name&gt; [project-name]') .option('-c, --clone', 'use git clone') .option('--offline', 'use cached template')/** * Help. */program.on('--help', () =&gt; &#123; console.log(' Examples:') console.log() console.log(chalk.gray(' # create a new project with an official template')) console.log(' $ vue init webpack my-project') console.log() console.log(chalk.gray(' # create a new project straight from a github template')) console.log(' $ vue init username/repo my-project') console.log()&#125;) è¿™ä¸€æ®µæ­£æ˜¯vue initå‘½ä»¤ç»™å‡ºçš„æç¤ºã€‚æˆ‘ä»¬åœ¨æ§åˆ¶å°è¿è¡Œvue-initï¼Œä¹Ÿä¼šå‡ºç°åŒvue initä¸€æ ·çš„ç»“æœã€‚éš¾é“vue initå’Œvue-initä¸¤ä¸ªå‘½ä»¤ç›¸åŒï¼Ÿnodejsæ”¯æŒè¿™æ ·ä¸åŒçš„å‘½ä»¤è¿è¡Œç›¸åŒçš„è„šæœ¬ï¼Ÿ â€œvue initâ€ != â€œvue-initâ€ï¼Œä½¿ä»–ä»¬è¿è¡ŒåŒä¸€ä¸ªè„šæœ¬çš„å¦æœ‰åŸå› ä»”ç»†åˆ†æï¼Œè€å¸æœºå°±ä¼šå‘ç°å…¶ä¸­å…±åŒçš„ä¸€ç‚¹ï¼šconst program = require(&#39;commander&#39;)ã€‚æ­£æ˜¯è¿™ä¸ªcommanderåŒ…å®ç°äº†&quot;vue init&quot; == &quot;vue-init&quot;ã€‚ commandercommanderæ˜¯node.js å‘½ä»¤è¡Œæ¥å£çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œçµæ„Ÿæ¥è‡ª Ruby çš„ commanderã€‚å…¶æœ‰Gité£æ ¼çš„å­å‘½ä»¤ï¼Œå½“ä½¿ç”¨.command()å¸¦æœ‰æè¿°å‚æ•°æ—¶ï¼Œè¿™å‘Šè¯‰commanderï¼Œä½ å°†é‡‡ç”¨å½“å•ç‹¬çš„å¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºå­å‘½ä»¤ã€‚commanderå°†ä¼šå°è¯•åœ¨å…¥å£è„šæœ¬çš„ç›®å½•ä¸­æœç´¢program-commandå½¢å¼çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¾‹å¦‚bin/vueæ–‡ä»¶ä¸­çš„.command(&#39;init&#39;, &#39;generate a new project from a template&#39;)ï¼Œä¼šä½¿commanderåœ¨binæ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾vue-initçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ åˆ°è¿™é‡Œï¼Œæ–‡ç« å¯ä»¥ç»“æŸäº†ã€‚ vue-cliåˆ›å»ºæ¨¡æ¿é€»è¾‘é€»è¾‘è¿˜æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œåˆ©ç”¨download-git-repoä¸‹è½½æ¨¡æ¿ï¼Œdownload-git-repoé»˜è®¤ä»GitHubä¸Šä¸‹è½½ã€‚","categories":[],"tags":[{"name":"vue-cli-2.9","slug":"vue-cli-2-9","permalink":"https://yiyan.site/tags/vue-cli-2-9/"}]},{"title":"Facebook:ä½¿ç”¨é«˜æ€§èƒ½çš„å¼€æºTLSåº“Fizzå¤§è§„æ¨¡éƒ¨ç½²TLS1.3","slug":"facebook-Fizz","date":"2018-08-22T11:15:28.000Z","updated":"2018-08-23T12:02:38.451Z","comments":true,"path":"2018/08/22/facebook-Fizz/","link":"","permalink":"https://yiyan.site/2018/08/22/facebook-Fizz/","excerpt":"","text":"åŸæ–‡æ–°ä¸€ä»£ä¼ è¾“å±‚å®‰å…¨åè®®TLS1.3å¢åŠ äº†å‡ é¡¹æ–°åŠŸèƒ½ï¼Œå¯ä»¥ä½¿äº’è”ç½‘æµé‡æ›´åŠ å®‰å…¨ï¼ŒåŒ…æ‹¬åŠ å¯†æ¡æ‰‹æ¶ˆæ¯ä»¥ä¿è¯è¯ä¹¦ç§å¯†ï¼Œé‡æ–°è®¾è®¡å¯†é’¥çš„æ´¾ç”Ÿæ–¹å¼ï¼Œä»¥åŠé›¶å¾€è¿”è¿æ¥è®¾ç½®ï¼Œè¿™ä½¿å¾—æŸäº›è¯·æ±‚æ¯”TLS1.2å¿«ã€‚æ¯å¤©æœ‰è¶…è¿‡10äº¿äººä½¿ç”¨Facebookä¸ä»–ä»¬çš„æœ‹å‹å’Œå®¶äººè”ç³»ï¼Œæ­£æ˜¯TLS1.3å°†ä»–ä»¬çš„æ•°æ®ä»åº”ç”¨ç¨‹åºä¼ è¾“åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼ˆç„¶åï¼Œæˆ‘ä»¬æŠŠæ•°æ®æä¾›ç»™åˆ«äººâ€¦æœ€è¿‘ç”¨æˆ·éšç§æŠŠFacebookæŠ˜è…¾çš„å¤Ÿå‘›ï¼‰ã€‚ä¸ºäº†åœ¨Facebookä¸Šå®ç°TLS1.3ï¼Œæˆ‘ä»¬åˆ›å»ºäº†Fizzï¼šä¸€ä¸ªç”¨C++14ç¼–å†™çš„å¼ºå¤§ã€é«˜æ€§èƒ½çš„TLSåº“ã€‚é™¤äº†TLS1.3é™„å¸¦çš„åè®®å¢å¼ºåŠŸèƒ½å¤–ï¼ŒFizzè¿˜æä¾›äº†è®¸å¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬é»˜è®¤æ”¯æŒå¼‚æ­¥I/Oï¼Œä»¥åŠåˆ†æ•£å’Œæ”¶é›†I/Oä»¥æ¶ˆé™¤å¯¹é¢å¤–æ•°æ®å‰¯æœ¬çš„éœ€æ±‚ã€‚ æˆ‘ä»¬ç°åœ¨å·²ç»åœ¨æˆ‘ä»¬çš„ç§»åŠ¨åº”ç”¨ç¨‹åºProxygenã€è´Ÿè½½å‡è¡¡å™¨ã€å†…éƒ¨æœåŠ¡ï¼Œç”šè‡³æˆ‘ä»¬çš„QUICåº“mvfstä¸­å…¨å±€éƒ¨ç½²äº†Fizzå’ŒTLS1.3ã€‚ç°åœ¨ï¼ŒFacebookè¶…è¿‡50%çš„äº’è”ç½‘æµé‡ä½¿ç”¨äº†TLS1.3è¿›è¡Œä¿æŠ¤ã€‚åœ¨æˆ‘ä»¬çš„ç§»åŠ¨åº”ç”¨ç¨‹åºä¸Šéƒ¨ç½²äº†TLS1.3çš„æ–°ç‰¹æ€§ï¼š0ä¸ªRTTå‘é€æ•°æ®ã€‚Fizzç°åœ¨æ¯ç§’å¤„ç†æ•°ç™¾ä¸‡æ¬¡TLS1.3æ¡æ‰‹ã€‚æˆ‘ä»¬ç›¸ä¿¡è¿™ä½¿Fizzæˆä¸ºäº’è”ç½‘ä¸ŠTLS1.3å’Œ0-RTTå¾€è¿”æ•°æ®çš„æœ€å¤§éƒ¨ç½²ã€‚Fizzä¸ä»…å‡å°‘äº†å»¶è¿Ÿï¼Œè¿˜å‡å°‘äº†æ¯å¤©æ‰§è¡Œæ•°ä¸‡äº¿è¯·æ±‚çš„æœåŠ¡å™¨CPUçš„ä½¿ç”¨ç‡ã€‚æˆ‘ä»¬å¾ˆé«˜å…´èƒ½å¤Ÿå¼€æºFizzï¼Œä»¥å¸®åŠ©åŠ é€Ÿåœ¨äº’è”ç½‘ä¸Šéƒ¨ç½²TLS1.3ï¼Œå¹¶å¸®åŠ©å…¶ä»–äººä½¿ä»–ä»¬çš„åº”ç”¨å’ŒæœåŠ¡æ›´å¿«ã€æ›´å®‰å…¨ã€‚ æ€§èƒ½æˆ‘ä»¬çš„å›¢é˜Ÿä¸äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰åˆä½œå¤šå¹´ï¼Œè‡´åŠ›äºæ ‡å‡†åŒ–TLS1.3ã€‚ä»¥å‰ï¼Œä¸ºäº†æé«˜TLSçš„å®‰å…¨æ€§å’Œæ€§èƒ½ï¼Œæˆ‘ä»¬éƒ¨ç½²äº†Zeroåè®®ã€‚è¿™æ˜¯ä¸€ç§ç§æœ‰åè®®ï¼Œå…è®¸æˆ‘ä»¬å°è¯•å»ºç«‹0-RTTå®‰å…¨è¿æ¥ã€‚ä½¿ç”¨0-RTTæ•°æ®å¯å‡å°‘ä½¿ç”¨TLSçš„è¯·æ±‚å»¶è¿Ÿä»¥åŠéƒ¨ç½²TLSæ‰€éœ€çš„å»¶è¿Ÿå¼€é”€ã€‚Fizzæä¾›ä¸Zeroæ´—è¡£ç›¸åŒçš„TLS1.3çš„å¯é æ€§å’Œæ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨TLS1.3å–ä»£äº†æˆ‘ä»¬çš„Zeroåè®®éƒ¨ç½²ã€‚ æ€§èƒ½ä¹Ÿæ˜¯Fizzå…³æ³¨çš„é‡ç‚¹ã€‚é€šè¿‡é›¶æ‹·è´åŠ è§£å¯†ï¼Œä¸æˆ‘ä»¬åŸºç¡€æ¶æ„çš„å…¶ä»–éƒ¨åˆ†ç´§å¯†é›†æˆä»¥åŠå…¶ä»–ä¼˜åŒ–ï¼Œæˆ‘ä»¬å‘ç°Fizzå‡å°‘äº†å†…å­˜å’ŒCPUçš„å ç”¨ç‡ã€‚æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡å™¨ç»¼åˆåŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼Œååé‡æ¯”æˆ‘ä»¬ä¹‹å‰çš„å †æ ˆé«˜å‡ºçº¦10%ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¼šéª„å‚²ï¼Œæˆ‘ä»¬å°†ä¼šç»§ç»­è‡´åŠ›äºæä¾›Fizzæ€§èƒ½ã€‚ é€šZeroåè®®ä¸€æ ·ï¼Œç›¸æ¯”äºTLS1.2ï¼ŒTLS1.3åœ¨æ¡æ‰‹é˜¶æ®µå»ºç«‹å®‰å…¨è¿æ¥æ—¶æ˜¾è‘—å‡å°‘äº†å»¶è¿Ÿã€‚è¿™æ ·å¯ä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œå°¤å…¶æ˜¯åœ¨æ²¡æœ‰å¯é‡ç”¨è¿æ¥çš„æ—¶å€™ï¼Œæ¯”å¦‚åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ã€‚ å‡å°‘å»¶è¿Ÿçš„ç™¾åˆ†æ¯”ï¼ˆTLS1.3ä¸TLS1.2åœ¨å»ºç«‹è¿æ¥æ—¶ï¼‰ é»˜è®¤å¼‚æ­¥åœ¨TLSçš„ç°ä»£éƒ¨ç½²ä¸­ï¼ŒæœåŠ¡å™¨éå¸ƒå…¨çƒã€‚TLSè´Ÿè½½å‡è¡¡å™¨ä½äºä¸€ä¸ªä½ç½®æ˜¯å¸¸è§çš„ï¼Œè€ŒTLSè¯ä¹¦ç­¾åå¯†é’¥ç”±ä½äºä¸–ç•Œå„åœ°çš„å¦ä¸€ä¸ªå®‰å…¨æœåŠ¡æä¾›ã€‚åƒæ— å¯†é’¥SSLï¼ˆæ›´åƒæ˜¯ä¸€ç§æ‹†åˆ†æ¡æ‰‹è¿‡ç¨‹ï¼Œç§é’¥è§£å¯†åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå…¶ä»–æ­¥éª¤å¯ä»¥åœ¨å…¶ä»–æœåŠ¡å™¨ä¸Šå®Œæˆï¼‰ä¹‹ç±»çš„æŠ€æœ¯ï¼Œè¢«è¿ç”¨åˆ°å°†åŠ å¯†è®¡ç®—åˆ†å‘åˆ°ä¸åŒçš„ä¸»æœºã€‚ ç”±äºæœåŠ¡å™¨é€šå¸¸å¸Œæœ›èƒ½å¤Ÿåœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­èƒ½å¤Ÿè°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œå› æ­¤å¼‚æ­¥IOå˜å¾—éå¸¸é‡è¦ã€‚å½“æˆ‘ä»¬åœ¨ç¼–å†™Fizzæ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å¤šä¸ªåŠŸèƒ½æ‹†è§£åˆ°å…¶ä»–è¿œç¨‹çš„æœåŠ¡å™¨ä¸Šï¼Œä¾‹å¦‚è¯ä¹¦æ“ä½œã€‚å› æ­¤ï¼ŒFizzæœåŠ¡é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼‚æ­¥çš„ã€‚æˆ‘ä»¬åˆ©ç”¨futuresæ¥æä¾›ä¸€ä¸ªç®€å•çš„å¼‚æ­¥APIï¼Œæ¥è‡ªFizzçš„ä»»ä½•å›è°ƒéƒ½å¯ä»¥å¼‚æ­¥ç›¸åº”ï¼Œè€Œä¸ä¼šé˜»æ­¢æœåŠ¡å¤„ç†å…¶ä»–æ¡æ‰‹ã€‚å¯¹äºå…¶ä»–ç”¨ä¾‹ï¼Œå‘Fizzæ·»åŠ æ–°çš„å¼‚æ­¥å›è°ƒä¹Ÿéå¸¸å®¹æ˜“ã€‚ é›¶æ‹·è´å†™å¤šä¸ªåº“ä¸­çš„TLS APIsè¦æ±‚ç”¨æˆ·æä¾›è¿ç»­çš„å†…å­˜å—ã€‚TLSåº“åŠ å¯†è¿ç»­å†…å­˜å—ä¸­çš„æ•°æ®å¹¶å°†å…¶å†™å…¥socketä¸­ã€‚ç„¶åï¼Œåº”ç”¨ç¨‹åºé€šå¸¸ä»¥ä¸åŒå­˜å‚¨å™¨ä½ç½®ä¸­çš„å‡ ä¸ªæ•°æ®å—çš„å½¢å¼å°†æ•°æ®ä¿å­˜åœ¨å­˜å‚¨å™¨ä¸­ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªè¿ç»­çš„å­˜å‚¨å™¨å—ä¸­ã€‚åœ¨å…¶ä»–åº“ä¸­ï¼Œåº”ç”¨ç¨‹åºéœ€è¦å°†æ•°æ®æ‹·è´åˆ°è¿ç»­çš„å†…å­˜ä½ç½®ï¼Œä»¥ä¾¿å°†å…¶æä¾›ç»™TLSåº“ã€‚æ­¤å¤åˆ¶æ“ä½œä¼šå¢åŠ å»¶è¿Ÿå¼€é”€ã€‚Fizzæ‹¥æœ‰æ”¯æŒåˆ†æ•£ã€èšåˆI/Oçš„APIï¼Œå…¶æ‰€æœ‰APIéƒ½é»˜è®¤æ¥å—åˆ†æ•£ã€èšåˆçš„æŠ½è±¡ä½œä¸ºè¾“å…¥ã€‚è¿™å…è®¸ç”¨æˆ·ä¼ å…¥åˆ†å—æ•°æ®ï¼Œç„¶åFizzå°†æ•°æ®åŠ å¯†åˆ°åˆ†å—å†…å­˜ä¸­ï¼Œä»è€Œé¿å…äº†å¤åˆ¶æ•°æ®çš„éœ€è¦ã€‚å› æ­¤ï¼Œä½¿ç”¨Fizzçš„åº”ç”¨ç¨‹åºæ‰§è¡Œçš„å†…å­˜åˆ†é…å’Œå‰¯æœ¬æ›´å°‘ï¼Œè¿™æ˜¯é«˜æ€§èƒ½åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªé‡è¦è€ƒè™‘å› ç´ ã€‚","categories":[],"tags":[{"name":"TLS1.3 Facebook","slug":"TLS1-3-Facebook","permalink":"https://yiyan.site/tags/TLS1-3-Facebook/"}]},{"title":"10-SQL-tricks","slug":"10-SQL-tricks","date":"2018-07-17T11:29:22.000Z","updated":"2018-07-17T11:29:36.076Z","comments":true,"path":"2018/07/17/10-SQL-tricks/","link":"","permalink":"https://yiyan.site/2018/07/17/10-SQL-tricks/","excerpt":"","text":"","categories":[],"tags":[{"name":"SQL","slug":"SQL","permalink":"https://yiyan.site/tags/SQL/"}]},{"title":"H5:echartsçš„tooltipä¸datazoomçš„ä¼˜åŒ–","slug":"H5-echartsçš„tooltipä¸datazoomçš„ä¼˜åŒ–","date":"2018-05-25T05:06:37.000Z","updated":"2018-07-15T07:29:58.895Z","comments":true,"path":"2018/05/25/H5-echartsçš„tooltipä¸datazoomçš„ä¼˜åŒ–/","link":"","permalink":"https://yiyan.site/2018/05/25/H5-echartsçš„tooltipä¸datazoomçš„ä¼˜åŒ–/","excerpt":"echartsç‰ˆæœ¬3.X.X åœ¨ç§»åŠ¨ç«¯åŒæ—¶ä½¿ç”¨Echartsçš„tooltipå’Œdatazoomæ—¶ï¼Œä½ ä¼šå‘ç°tooltipæ˜¾ç¤ºçš„æ—¶å€™å¾ˆéš¾å»å¯¹å›¾è¡¨è¿›è¡Œæ”¾å¤§ã€ç¼©å°ã€æ°´å¹³ç§»åŠ¨ï¼Œä¹Ÿå°±æ˜¯æ¯”è¾ƒéš¾è§¦å‘datazoomäº‹ä»¶ï¼Œç”¨æˆ·ä½“éªŒæœ‰ç‚¹å·®ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼Œä»¥ä¾¿æé«˜ç”¨æˆ·ä½“éªŒã€‚","text":"echartsç‰ˆæœ¬3.X.X åœ¨ç§»åŠ¨ç«¯åŒæ—¶ä½¿ç”¨Echartsçš„tooltipå’Œdatazoomæ—¶ï¼Œä½ ä¼šå‘ç°tooltipæ˜¾ç¤ºçš„æ—¶å€™å¾ˆéš¾å»å¯¹å›¾è¡¨è¿›è¡Œæ”¾å¤§ã€ç¼©å°ã€æ°´å¹³ç§»åŠ¨ï¼Œä¹Ÿå°±æ˜¯æ¯”è¾ƒéš¾è§¦å‘datazoomäº‹ä»¶ï¼Œç”¨æˆ·ä½“éªŒæœ‰ç‚¹å·®ã€‚å› æ­¤ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼Œä»¥ä¾¿æé«˜ç”¨æˆ·ä½“éªŒã€‚ 1. äº¤äº’å¥—è·¯æ—¢ç„¶è¦ä¼˜åŒ–ï¼Œé‚£å°±éœ€è¦å°†tooltipå’Œdatazoomè¿™ä¸¤ä¸ªäº‹ä»¶æ‹†åˆ†å¼€ï¼Œä¸èƒ½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚æ‰€ä»¥ï¼Œäº¤äº’çš„æ€»æ–¹é’ˆæ˜¯ï¼š tooltipéšè—æ—¶ï¼Œå³å…è®¸datazoomä¹Ÿå…è®¸æ˜¾ç¤ºtooltipï¼› ç‚¹å‡»ï¼Œtooltipæ˜¾ç¤ºï¼Œdatazoomæ— æ•ˆï¼›å†æ¬¡ç‚¹å‡»ï¼Œtooltipéšè—ï¼Œå…è®¸datazoom åªæœ‰tooltipéšè—æ—¶ï¼Œæ‰å…è®¸datazoomã€‚ 2. å®ç°å®ç°æ—¶éœ€è¦æ¥ç®¡tooltipçš„è§¦å‘ï¼ŒåŒæ—¶ä¹Ÿè¦æ§åˆ¶datazoomæ˜¯å¦å¯ç”¨ 2.1 æ¥ç®¡tooltip2.1.1 echartsé…ç½®echartsåœ¨é…ç½®tooltipæç¤ºæ¡†è§¦å‘çš„æ¡ä»¶ï¼š123tooltip: &#123; triggerOn: 'none'&#125; ä¸åœ¨â€™mousemoveâ€™æˆ–â€™clickâ€™æ—¶è§¦å‘ï¼Œæˆ‘ä»¬æ”¹ç”¨dispatchActionæ¥è§¦å‘tooltipæ˜¾ç¤ºã€‚ 2.1.2 ä¸»åŠ¨è§¦å‘tooltipï¼Œå…è®¸datazoomæˆ‘ä»¬éœ€è¦å¤„ç†å›¾è¡¨domæ ‡ç­¾çš„Touchäº‹ä»¶ï¼Œä»è€Œæ¥ä¸»åŠ¨åˆ†å‘showtipäº‹ä»¶ã€‚æŒ‰ç…§æˆ‘ä»¬çš„äº¤äº’æ€»æ–¹é’ˆï¼Œä»¥ä¸‹æµç¨‹ä¸­çš„æ¯ä¸€æ¬¡å…è®¸tooltipï¼Œéƒ½ä¼´éšè¿™ç¦ç”¨datazoomï¼›æ¯ä¸€æ¬¡éšè—tooltipéƒ½ä¼´éšç€å¯ç”¨datazoomã€‚å¤„ç†Touchäº‹ä»¶ä»¥åŠåˆ†å‘showtipçš„åŸºæœ¬æµç¨‹ä¸ºï¼š 2.1.2.1 touchstartäº‹ä»¶ è®°å½•è§¦å‘äº†touchstart è®°å½•å¹¶åˆ¤æ–­æ˜¯ä¸æ˜¯å¤šä¸ªæ‰‹æŒ‡ï¼Œè‹¥æ˜¯åˆ™éšè—tooltipï¼Œå¹¶å…è®¸datazoomã€‚ è§¦å‘é•¿æŒ‰è®¡æ—¶å™¨ï¼Œå¦‚æœæ˜¯é•¿æŒ‰ï¼Œåˆ™è¦è§¦å‘tooltipï¼Œå¹¶ç¦ç”¨datazoomã€‚ç”¨æˆ·ç§»åŠ¨æ‰‹æŒ‡ï¼Œæ¥è¾¾åˆ°è¿ç»­æ˜¾ç¤ºtooltipã€‚ 2.1.2.2 touchmoveäº‹ä»¶ è®°å½•è§¦å‘äº†touchmoveäº‹ä»¶ å¦‚æœtooltipæ˜¯ä¸æ˜¾ç¤ºçš„çŠ¶æ€ï¼Œåˆ™è¦æ¸…é™¤é•¿æŒ‰è®¡æ—¶å™¨ï¼Œå› ä¸ºæ­¤æ—¶ç”¨æˆ·æƒ³è¦ç§»åŠ¨å›¾è¡¨ã€‚å¹¶ä¸”ï¼Œå‰æåœ¨tooltipæ˜¯ä¸æ˜¾ç¤ºçš„çŠ¶æ€æ—¶ï¼Œå…è®¸datazoomã€‚å¦‚æœtooltipæ˜¯æ˜¾ç¤ºçŠ¶æ€ï¼Œåˆ™ç”¨æˆ·è¦è¾¾æˆè¿ç»­æ˜¾ç¤ºtooltipã€‚ å¦‚æœæ˜¯é•¿æŒ‰ï¼Œåˆ™éœ€è¦æ˜¾ç¤ºtooltip 2.1.2.3 touchendäº‹ä»¶ æ¸…é™¤é•¿æŒ‰è®¡æ—¶å™¨ï¼› å¦‚æœæ˜¯å¤šä¸ªæ‰‹æŒ‡æ“ä½œï¼Œåˆ™å‡½æ•°ç»“æŸï¼Œå‰©ä½™æµç¨‹ä¸ç”¨å¤„ç†ï¼› å¦‚æœæ˜¯é•¿æŒ‰ï¼Œåˆ™æ˜¾ç¤ºtooltipï¼Œé‡ç½®touchäº‹ä»¶çš„çŠ¶æ€ï¼Œå¹¶returnï¼› 2å’Œ3çš„æ¡ä»¶éƒ½æ²¡æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·æ˜¯å•æ¬¡ç‚¹å‡»ï¼Œå¦‚æœtooltipæ˜¯éšè—çŠ¶æ€ï¼Œåˆ™æ˜¾ç¤ºtooltipï¼›å¦‚æœtooltipæ˜¯æ˜¾ç¤ºçŠ¶æ€ï¼Œåˆ™éšè—tooltipï¼› é‡ç½®touchçŠ¶æ€ã€‚ 2.2 datazoomå¤„ç†datazoomçš„å¤„ç†åªéœ€è¦æ³¨æ„ä¸€ä¸ªåœ°æ–¹ï¼šæ‹–åŠ¨å›¾è¡¨åï¼Œä¼šè§¦å‘touchendäº‹ä»¶ï¼Œå¯èƒ½ä¼šè§¦å‘tooltipã€‚æ‰€ä»¥ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºtooltipï¼Œåˆ™éœ€è¦å°†åœ¨ä¸šåŠ¡é€»è¾‘é‡Œé¢ï¼Œç›‘å¬åˆ°datazoomåï¼Œéšè—tooltipã€‚","categories":[],"tags":[{"name":"chart","slug":"chart","permalink":"https://yiyan.site/tags/chart/"}]},{"title":"About:create-react-app","slug":"About-create-react-app","date":"2018-05-22T07:27:09.000Z","updated":"2018-06-07T09:08:23.635Z","comments":true,"path":"2018/05/22/About-create-react-app/","link":"","permalink":"https://yiyan.site/2018/05/22/About-create-react-app/","excerpt":"","text":"create-react-appæ˜¯facebookå®˜æ–¹ç»´æŠ¤çš„ä¸€å¥—reactå¼€å‘æ¡†æ¶ï¼ˆemmmâ€¦åº”è¯¥è¯´æ˜¯é…ç½®ï¼‰ï¼Œç›®å‰çš„staræ•°é‡æ¥è¿‘5w+ï¼Œå¯è§å…¶å—æ¬¢è¿ç¨‹åº¦ã€‚ç›¸æ¯”äºå…¶ä»–ä¸€äº›reactå¼€å‘æ¡†æ¶ï¼Œä¾‹å¦‚react-boilerplateã€react-starter-kit(staræ•°éƒ½æ¥è¿‘2w+)ï¼Œcreate-react-appä¼¼ä¹æ›´å®¹æ˜“reactåˆå­¦è€…ä¸Šæ‰‹ã€‚ HMR(hot module replace)åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°create-react-appä¸èƒ½åšåˆ°HMRï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç éƒ½æ˜¯æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä¸å¯èƒ½ï¼Œè¿™ä¹ˆå—æ¬¢è¿çš„é¡¹ç›®ï¼Œæ€ä¹ˆæ²¡æœ‰é»˜è®¤å¼€å¯HMRï¼Ÿ åœ¨è¿è¡Œnpm run ejectåï¼Œå‘ç°åœ¨å…¶é…ç½®æ–‡ä»¶webpack.config.dev.jsæ–‡ä»¶ä¸­å·²ç»å¼•ç”¨ç›¸åº”çš„webpacké…ç½®ï¼š 1234567// Add module names to factory functions so they appear in browser profiler.new webpack.NamedModulesPlugin(),// Makes some environment variables available to the JS code, for example:// if (process.env.NODE_ENV === 'development') &#123; ... &#125;. See `./env.js`.new webpack.DefinePlugin(env.stringified),// This is necessary to emit hot updates (currently CSS only):new webpack.HotModuleReplacementPlugin(), åŒæ—¶åœ¨webpackDevServer.config.jsæ–‡ä»¶ä¸­ä¹Ÿé…ç½®äº†hotï¼š 123456// Enable hot reloading server. It will provide /sockjs-node/ endpoint// for the WebpackDevServer client so it can learn when the files were// updated. The WebpackDevServer client is included as an entry point// in the Webpack development configuration. Note that only changes// to CSS are currently hot reloaded. JS changes will refresh the browser.hot: true, å¯¹æ¯”webpackå®˜ç½‘ï¼Œéœ€è¦åœ¨å…¥å£çš„jsæ–‡ä»¶index.jsæ–‡ä»¶ä¸­å¢åŠ ï¼š123if (module.hot) &#123; module.hot.accept()&#125; BrowserRouterä¸HashRoutervue-routeræœ‰ä¸¤ç§æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ã€‚historyæ¨¡å¼éœ€è¦æœåŠ¡ç«¯é…åˆï¼Œå¦åˆ™ä¼šæœ‰ä¸€äº›å°é—®é¢˜ã€‚ react-routerä¸­ä¹Ÿå­˜åœ¨è¿™ä¸¤ç§æ¨¡å¼ã€‚BrowserRouterå³ä¸ºhistoryæ¨¡å¼ï¼ŒHashRouterå³ä¸ºhashæ¨¡å¼ã€‚æˆ‘ä»¬åœ¨éƒ¨ç½²çš„æ—¶å€™ï¼Œå¦‚æœå°†é¡¹ç›®æ”¾åœ¨webæœåŠ¡å™¨é™æ€èµ„æºçš„äºŒçº§ç›®å½•ä¸­ï¼Œåˆ™å¾€å¾€éœ€è¦ä¿®æ”¹webæœåŠ¡å™¨æˆ–è€…æ”¹ç”¨HashRouterï¼Œå¦åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°èµ„æºçš„æƒ…å†µã€‚ reactå‡½æ•°å¼ç»„ä»¶ï¼Œäº‹ä»¶å¤„ç†å¯¹äºç®€å•çš„ç»„ä»¶ï¼Œå¯ä»¥é‡‡ç”¨å‡½æ•°å¼æ¥å®šä¹‰reactç»„ä»¶ã€‚å‡½æ•°å¼ç»„ä»¶å¯ä»¥ç®€å•å¿«é€Ÿçš„å®šä¹‰ä¸€ä¸ªreactç»„ä»¶ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼šæ— çŠ¶æ€ã€‚è¿™é‡Œæä¾›ä¸€ä¸ªç®€å•çš„äº‹ä»¶å¤„ç†demoï¼š12345678910111213141516171819import React from 'react'import s from './index.less'import close from '../../assets/imgs/close.png'function Footer (props) &#123; const handleClose = () =&gt; &#123; document.querySelector('#footer').style.display = 'none' &#125; return ( &lt;footer className=&#123;s.footer&#125; id='footer'&gt; &lt;img onClick=&#123;handleClose&#125; src=&#123;close&#125; className=&#123;s.close&#125;/&gt; &lt;/footer&gt; )&#125;export default Footer","categories":[],"tags":[{"name":"react","slug":"react","permalink":"https://yiyan.site/tags/react/"}]},{"title":"10-years-of-GitHub","slug":"10-years-of-GitHub","date":"2018-05-18T02:42:25.000Z","updated":"2018-07-17T09:14:09.029Z","comments":true,"path":"2018/05/18/10-years-of-GitHub/","link":"","permalink":"https://yiyan.site/2018/05/18/10-years-of-GitHub/","excerpt":"ä¸Šä¸ªæœˆï¼Œä¹Ÿå°±æ˜¯2018å¹´4æœˆ10æ—¥æ˜¯GitHubåå‘¨å¹´ï¼ŒGitHubåˆ›å§‹äººChris Wanstrathå‘å¸ƒäº†ä¸€ç¯‡æ–‡ç« æ¥æ€»ç»“è¿™åå¹´çš„å‘å±•ã€‚","text":"ä¸Šä¸ªæœˆï¼Œä¹Ÿå°±æ˜¯2018å¹´4æœˆ10æ—¥æ˜¯GitHubåå‘¨å¹´ï¼ŒGitHubåˆ›å§‹äººChris Wanstrathå‘å¸ƒäº†ä¸€ç¯‡æ–‡ç« æ¥æ€»ç»“è¿™åå¹´çš„å‘å±•ã€‚ å›é¡¾å¾€æ˜”åè½½ï¼Œæˆ‘ä»¬è®°ä½çš„ä¸æ˜¯æŸä¸€ä¸ªè½¯ä»¶ï¼Œè€Œæ˜¯äººä»¬ç”¨æ¥åšäº†ä»€ä¹ˆã€‚ ï¼ˆä»¥ä¸‹å†…å®¹ä¸ºè¯‘æ–‡ï¼‰Chris Wanstrathï¼š 10å¹´å‰ï¼ŒGitHubæ­£å¼ä¸Šçº¿ã€‚æˆ‘ä»¬çš„æ„å›¾å…¶å®å¾ˆç®€å•ï¼šè¿æ¥å¼€å‘è€…ï¼Œè®©ä»–ä»¬ååˆ†æ–¹ä¾¿çš„é€šè¿‡Gitä¸€èµ·ç¼–å†™é¡¹ç›®ã€‚åœ¨è¿‡å»åå¹´é‡Œï¼Œæˆ‘ä»¬å·²ç»å‘å±•æˆä¸ºä¸€å®¶å…¬å¸å’Œå¹³å°ï¼Œä½†æ˜¯GitHubçš„åˆè¡·ä¸å˜ã€‚ä½¿è¿™ä¸ªå¹³å°ç‰¹åˆ«çš„ä¸æ˜¯ä¸€ä¸ªæƒ³æ³•æˆ–è€…å‘æ˜ï¼Œè€Œæ˜¯ä½¿ç”¨è¿™ä¸ªå¹³å°çš„äººä»¬ï¼šGitHubå› ä¸ºä½ ï¼Œæˆ‘ä»¬çš„ç¤¾åŒºï¼Œæ‰èƒ½æœ‰ä»Šå¤©çš„åå‘¨å¹´åº†ã€‚ å½“æˆ‘ä»¬å›é¡¾å¾€æ˜”åè½½ï¼Œæˆ‘ä»¬è®°ä½çš„ä¸æ˜¯æŸä¸€ä¸ªè½¯ä»¶ï¼Œè€Œæ˜¯äººä»¬ç”¨æ¥åšäº†ä»€ä¹ˆã€‚åœ¨GitHubä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ä¸å…¨ä¸–ç•Œä¸€èµ·åˆ†äº«ã€ä¼ æˆã€åˆ›å»ºé¡¹ç›®ã€‚åœ¨GitHubå‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰é¢„æ–™åˆ°ä¼šæœ‰è¿™ä¹ˆå¤šçš„é¡¹ç›®ã€ç¨‹åºå’Œå¤§å‹æ¡†æ¶ä¼šå‡ºç°åœ¨GitHubä¸Šã€‚æˆ‘ä»¬ä¹Ÿæ²¡æœ‰æƒ³åˆ°ä¼ä¸šä¼šåœ¨å¼€æºç¤¾åŒºæŠ•å…¥å¦‚æ­¤å·¨å¤§ï¼Œä¹Ÿä¸æ›¾æƒ³åˆ°ä¼šæœ‰é‚£ä¹ˆå¤šäººå­¦ä¹ å½¼æ­¤çš„ä»£ç ã€‚ GitHubå‘å¸ƒçš„æ—¶å€™ï¼Œæ­£å¥½æ˜¯æŠ€æœ¯ä»¥æ–°çš„æ–¹å¼å°†äººä»¬è”ç³»èµ·æ¥çš„æ—¶å€™ï¼Œä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘åœ¨åå¹´å‰å‘çš„æ–‡ç« ï¼Œè®©æˆ‘ä»¬ä¸è¦åœ¨æ—…é€”ä¸­é«˜å£°å®£æ‰¬ï¼Œä½ çš„å·¥ä½œè¯´æ˜äº†ä¸€åˆ‡ã€‚æˆ‘ä»¬æ”¶é›†äº†ä¸€äº›æˆ‘ä»¬å–œæ¬¢çš„æ—¶åˆ»å’Œé‡Œç¨‹ç¢‘ï¼Œä»¥æ­¤æ¥åº†ç¥å¤§å®¶æ¨è¿›è½¯ä»¶å¼€å‘çš„æ–¹å¼ã€‚ å±•æœ›æœªæ¥ï¼Œæˆ‘ä¼šä½¿GitHubä¿æŒç®€å•ã€‚æ‚¨ä¸€èµ·å®šä¹‰äº†ä»Šå¤©çš„è½¯ä»¶ï¼Œåœ¨æœªæ¥å‡ å¹´ï¼Œæ‚¨å°†ç»§ç»­å¡‘é€ æœªæ¥ã€‚é‚£ä¹ˆæœªæ¥åå¹´å°†ä¼šå‡ºç°ä»€ä¹ˆè½¯ä»¶ï¼Ÿæˆ‘ä»¬è·Ÿéšå°†ä½ çš„é¢†å¯¼ã€‚ ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬æ„Ÿè°¢æ‚¨æäº¤(committed)çš„ä»£ç ã€æ‚¨åˆå¹¶çš„è¯·æ±‚ï¼ˆpull requestï¼‰ã€æ‚¨ç¼–å†™çš„æ–‡æ¡£ã€æ‚¨åˆ†äº«çš„é¡¹ç›®ï¼Œä»¥åŠå› æ‚¨æ‰æœ‰GitHubçš„åå¹´ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬éå¸¸æ„Ÿè°¢ï¼Œè¿«ä¸åŠå¾…çš„æƒ³çœ‹çœ‹æ‚¨ä¸‹ä¸€æ­¥è¦buildä»€ä¹ˆã€‚ 10å¹´ï¼Œæ„Ÿè°¢æœ‰ä½ ï¼2008å¹´4æœˆ10æ—¥ï¼šGitHubæ­£å¼ä¸Šçº¿åœ¨2008å¹´4æœˆï¼ŒGitHub betaç‰ˆæµ‹è¯•å®Œæˆï¼Œå¹¶æ­£å¼ä¸Šçº¿ï¼Œå…¶ç›®çš„ä»…ä»…æ˜¯ï¼šè¿æ¥å¼€å‘è€…ï¼Œè®©ä»–ä»¬ååˆ†æ–¹ä¾¿çš„é€šè¿‡Gitä¸€èµ·å·¥ä½œã€‚ 2008å¹´4æœˆ3æ—¥ï¼šRailsè¿ç§»åˆ°GitHubåœ¨GitHubè¿˜æ˜¯betaç‰ˆæ—¶ï¼ŒRuby on Railsæ˜¯ç¬¬ä¸€ä¸ªåŠ å…¥GitHubçš„å¼€æºå¤§é¡¹ç›®ã€‚è¿™å¯¹GitHubè€Œè¨€æ˜¯ä¸€ä¸ªé‡è¦çš„æ—¶åˆ»ï¼Œå› ä¸ºGitHubå»ºç«‹åœ¨Railsä¹‹ä¸Šã€‚ 2009å¹´1æœˆ3æ—¥ï¼šæ¯”ç‰¹å¸å‡ºç°æ¯”ç‰¹å¸æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„æ•°å­—è´§å¸ï¼Œ2009å¹´è¢«å‘æ˜ï¼Œå¹¶äº2010å¹´å…¥é©»GitHubã€‚è¿„ä»Šä¸ºæ­¢ï¼Œæ¯”ç‰¹å¸é¡¹ç›®å·²ç»æœ‰è¶…è¿‡18000ä¸ªåˆ†æ”¯ï¼ˆæˆªæ­¢æœ¬ç¨¿ï¼Œä¸º19006ä¸ªåˆ†æ”¯ï¼Œstaræ•°ä¸º3w+ï¼‰ï¼Œ500å¤šä¸ªåˆå¹¶è¯·æ±‚ï¼Œå¹¶æ¿€åŠ±äº†GitHubä¸Šæ•°åƒä¸ªåŒºå—é“¾é¡¹ç›®ï¼Œå…¶ä¸­å¾ˆå¤šæ˜¯æ¯”ç‰¹å¸æºç çš„åˆ†æ”¯ã€‚ 2009å¹´5æœˆ21æ—¥ï¼šNode.jså‘å¸ƒNode.jsäº2009å¹´å‘å¸ƒï¼Œå®ƒå¯¼è‡´äººä»¬ä½¿ç”¨JavaScriptçš„æ–¹å¼å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜åŒ–ã€‚å€ŸåŠ©Node.jsï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨Angularã€Emberã€Reactã€jQueryå’ŒVueç­‰åº“å’Œæ¡†æ¶ï¼Œåœ¨ç³»ç»Ÿä¸Šæ„å»ºå¤æ‚çš„æœåŠ¡å™¨ç«¯å’Œæ¡Œé¢åº”ç”¨ç¨‹åºã€‚è¯¥é¡¹ç›®æœ‰æ•ˆçš„æ‰©å±•äº†JavaScriptçš„å¯èƒ½æ€§ï¼Œå¹¶æ¨åŠ¨äº†ä¸€ç§ä¸»è¦çš„ç¼–ç¨‹è¯­è¨€ã€‚ 2014å¹´ï¼Œio.jsä»Node.jsåˆ†åŒ–å‡ºæ¥ï¼Œè‡´åŠ›äºç¤¾åŒºçš„å¼€æ”¾æ€§ã€‚ä¸€å¹´åï¼Œä¸¤ä¸ªé¡¹ç›®éƒ½å»ºç«‹å¼€æ”¾å¼çš„ç®¡ç†æ¨¡å¼ï¼Œå¹¶æˆç«‹Node.jsåŸºé‡‘ä¼šè¿›è¡Œé‡ç»„ï¼Œå¼€æºç¤¾åŒºçš„å½±å“åŠ›ï¼Œå¯¹ä¸¤ä¸ªé¡¹ç›®çš„é‡ç»„èµ·åˆ°äº†é‡è¦ä½œç”¨ã€‚ ä»Šå¤©ï¼ŒNode.jsæ ¸å¿ƒæ‹¥æœ‰è¿‘2000ä¸ªè´¡çŒ®è€…ï¼ŒNode.jsä¹Ÿå½¢æˆäº†ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…å«å¤§é‡çš„åº“å’Œå·¥å…·ã€‚ç”±äºç¤¾åŒºé©±åŠ¨çš„NodeSchoolç›¸å¯¹å®¹æ˜“å­¦ä¹ ï¼ŒNodeSchoolè¿æ¥å¼€å‘è€…ï¼Œæä¾›å…è´¹æ•™ç¨‹ï¼Œå¹¶åœ¨å…¨çƒä¸¾åŠé¢å¯¹é¢çš„æ´»åŠ¨ã€‚ 2010å¹´11æœˆ26æ—¥ï¼šRails Girls Summer of Codeä¸¾åŠç¬¬ä¸€æ¬¡ç ”è®¨ä¼šRails Girls(ç›®æ ‡æ˜¯ä¸ºå¥³æ€§æä¾›å·¥å…·å’Œç¤¾åŒº)äº2010å¹´åœ¨Helsinkiä¸¾è¡Œäº†é¦–æ¬¡æ´»åŠ¨ã€‚åœ¨2013å¹´ï¼ŒRails Girlsæˆå‘˜å¼€å§‹ç­¹å¤‡Summer of Code(ç¼–ç å¤ä»¤è¥):ä¸€ä¸ªé’ˆå¯¹å¥³æ€§å’ŒéäºŒè¿›åˆ¶ç¼–ç çš„å…¨çƒå¥–å­¦é‡‘è®¡åˆ’ã€‚å­¦ç”Ÿå°†è·å¾—ä¸‰ä¸ªæœˆçš„å¥–å­¦é‡‘ï¼Œä»¥å¼€å±•ç°æœ‰çš„å¼€æ”¾æºä»£ç é¡¹ç›®å¹¶æ‰©å±•ä»–ä»¬çš„æŠ€èƒ½ã€‚é™¤äº†Google Summer of Codeã€Outreachyç­‰ï¼ŒRails Girls Summer of Codeä¹Ÿå¯¹è½¯ä»¶è¡Œä¸šäº§ç”Ÿäº†å½±å“ã€‚ä»–ä»¬ä¸ä¹…å‰ä¸¾åŠäº†5å‘¨å¹´åº†å…¸ï¼Œæ‰€ä»¥ç°åœ¨æ˜¯æ”¯æŒä»–ä»¬å·¥ä½œçš„å¥½æ—¶æœºã€‚ 2011å¹´2æœˆ28æ—¥ï¼šTravis CIçš„ç¬¬ä¸€ä¸ªpullè¯·æ±‚Travis CIå‘å¸ƒäº2011å¹´ï¼Œå…¶ç”¨äºå¼€æºä»£ç å’Œç§æœ‰é¡¹ç›®çš„æŒç»­é›†æˆï¼Œæ˜¯ç¬¬ä¸€ä¸ªä¸GitHubé›†æˆçš„å¼€å‘è€…å·¥å…·ã€‚Jenkinså’ŒCircleCIä¹Ÿåœ¨åŒä¸€æ—¶é—´æˆç«‹ï¼Œè¿™ä½¿å¾—2011å¹´æˆä¸ºCIï¼ˆæŒç»­é›†æˆï¼‰å’Œè½¯ä»¶æ„å»ºçš„é‡è¦ä¸€å¹´ã€‚æµ‹è¯•å·²æˆä¸ºç¼–å†™æ›´å®‰å…¨ã€æ›´å¯é ä»£ç çš„å…³é”®éƒ¨åˆ†ã€‚ 2012å¹´1æœˆ1æ—¥ï¼šJavaScriptæˆä¸ºGitHubä¸Šæœ€å—æ¬¢è¿çš„è¯­è¨€2012å¹´JavaScriptçš„è¡¨æ¼”å¼€å§‹äº†ï¼Œè¶…è¶ŠRubyã€Javaå’ŒPythonï¼Œæˆä¸ºGitHubä¸Šæœ€æµè¡Œçš„è¯­è¨€ã€‚æ—¶è‡³ä»Šæ—¥ï¼ŒJavaScriptä»ç„¶æ˜¯GitHubä¸Šæœ€å—æ¬¢è¿çš„è¯­è¨€ã€‚ 2013å¹´1æœˆ16æ—¥ï¼šGitHubç¤¾åŒºç”¨æˆ·è¾¾åˆ°300ä¸‡åœ¨2013å¹´æ™šäº›æ—¶å€™ï¼Œæˆ‘ä»¬çš„ç¤¾åŒºå¼€æºä»£ç åº“è¾¾åˆ°äº†1000ä¸‡ä¸ªï¼Œå…¶ä¸­åŒ…æ‹¬Project Open Data(å¥½åƒä¸€ç§å°†æ•°æ®è¿›è¡Œå¼€æ”¾çš„å¼€æºé¡¹ç›®ï¼Œä»¥ä¾¿å…¶ä»–äººå¯ä»¥å¯¹æ•°æ®è¿›è¡Œç®¡ç†ã€ä½¿ç”¨ï¼Œè¯‘è€…ä¸æ˜¯å¾ˆäº†è§£) 2014å¹´6æœˆ9æ—¥ï¼šDocker 1.0å‘å¸ƒåœ¨ç¬¬ä¸€ç‰ˆå‘å¸ƒåä¸€å¹´å¤šä¸€ç‚¹ï¼Œ2014å¹´6æœˆDocker 1.0çš„å‘å¸ƒï¼Œå°†Dockerå®¹å™¨å¼•å…¥äº†ä¼ä¸šæ•°æ®ä¸­å¿ƒå’Œäº‘å¹³å°ã€‚åƒDockerå’ŒKubernetesè¿™æ ·çš„é¡¹ç›®ï¼Œæ¨åŠ¨äº†å®¹å™¨æŠ€æœ¯çš„å‘å±•ï¼Œç®€åŒ–äº†DevOpsï¼Œå°†å›¢é˜Ÿä»åŸºç¡€æ¶æ„ä¸­è§£æ”¾å‡ºæ¥ï¼Œä½¿å¾—å¯ä»¥ä¸“æ³¨äºæœ€é‡è¦çš„åœ°æ–¹ã€‚ 2014å¹´7æœˆ21æ—¥ï¼šé¦–å±ŠDjango Girlsè®²ä¹ ç­ç¬¬ä¸€å±ŠDjango Girlsåœ¨2014å¹´æŸæ—EuroPythonä¸¾åŠï¼Œå¼€å¯äº†ä¸ºæœŸå››å¹´çš„ä¸–ç•Œå„åœ°è½¯ä»¶åŸ¹è®­å’Œå¥³æ€§æ”¯æŒå·¥ä½œã€‚ æ”¯æŒä»–ä»¬çš„å·¥ä½œï¼Œä»¥ä¿æŒDjango Girlsç¤¾åŒºçš„æˆé•¿ã€‚ 2014å¹´10æœˆ23æ—¥ï¼šå¾®è½¯å¼€æº.NET.NETå’Œ.NETåŸºé‡‘ä¼šåªæ˜¯å¾®è½¯å¼€æºè®¡åˆ’çš„å¼€ç«¯ã€‚ç°åœ¨å¾®è½¯å·²ç»å¼€æºäº†æ•°ç™¾ä¸ªé¡¹ç›®ã€‚å®ƒä»¬åŒ…æ‹¬å»å¹´è´¡çŒ®è€…æœ€å¤šçš„VS Codeï¼ˆVisual Studio Codeç¼–è¾‘å™¨ï¼‰å’Œ2017å¹´å‘å±•æœ€å¿«çš„è¯­è¨€ä¹‹ä¸€ï¼šTypeScriptã€‚ å¾®è½¯ä¹Ÿç§°ä¸ºGitHubä¸Šæœ€æ´»è·ƒçš„è´¡çŒ®è€…ä¹‹ä¸€ï¼Œæ•°åƒåå·¥ç¨‹å¸ˆã€è®¾è®¡å¸ˆå’Œç¨‹åºå‘˜åœ¨GitHubå¹³å°ä¸Šè´¡çŒ®å’Œå‘å¸ƒä»£ç ã€‚ åƒå¾®è½¯å’ŒGoogleè¿™æ ·çš„å¤§å…¬å¸å¯¹å¼€æºçš„æŠ•èµ„ï¼Œæ”¹å˜äº†äººä»¬å¯¹äºå•†ä¸šä¼ä¸šæ„å»ºè½¯ä»¶çš„è§‚ç‚¹ã€‚ä»–ä»¬è¿˜å‘æˆ‘ä»¬è¡¨æ˜ï¼Œä»–ä»¬æˆåŠŸçš„ç§˜è¯€æœ‰æ—¶ä¸æ˜¯ä»–ä»¬æ‰€åˆ›å»ºçš„æŠ€æœ¯ï¼Œè€Œæ˜¯å¦‚ä½•ä½¿ç”¨æŠ€æœ¯ã€‚ 2015å¹´3æœˆ2æ—¥ï¼šè™šå¹»å¼•æ“4æºç å…¬å¸ƒEpic Gameså›¢é˜Ÿå…è´¹å…¬å¸ƒäº†è™šå¹»å¼•æ“4ï¼Œç”¨ä¸€äº›æœ€å¥½çš„å·¥å…·æ‰“ç ´äº†æ¸¸æˆå¼€å‘è€…ä¸ä»–ä»¬çš„åˆ›æ„æ„¿æ™¯ä¹‹é—´çš„éšœç¢ã€‚å…è´¹çš„æºä»£ç è¿˜å…è®¸ç¤¾åŒºæå‰ä½“éªŒåˆ°å¼•æ“çš„æ–°ç‰¹æ€§ã€‚ä»bugçš„ä¿®å¤çœ‹ï¼Œä»–ä»¬çš„æœ€æ–°ç‰ˆæœ¬æœ‰128ä½è´¡çŒ®è€…ã€‚ ç”±äºæ¸¸æˆå¼•æ“ã€ç›¸å…³çš„åº“å’Œå¼€å‘è€…å·¥å…·çš„å¼€æºï¼Œä½¿å¾—æ¸¸æˆæˆä¸ºGitHubä¸Š2017å¹´æœ€å—æ¬¢è¿çš„ä¸»é¢˜ä¹‹ä¸€ã€‚Phaserï¼ŒGodot Engineå’Œå…¶ä»–é¡¹ç›®ï¼Œå¦‚Itch.ioï¼Œæ­£åœ¨å¡‘é€ äººä»¬å»ºç«‹å’Œåˆ†äº«ç‹¬ç«‹æ¸¸æˆçš„æ–¹å¼ã€‚åƒ2048è¿™æ ·çš„å¼€æºå­¦ä¹ èµ„æºå’Œæ¸¸æˆ - å¯å‘äº†æ•°ç™¾ä¸ªå…‹éš† - é‚€è¯·äº†æ›´å¤šçš„äººå‚ä¸å’Œåˆ›é€ ã€‚ å—æ­¤å½±å“ï¼ŒåŒ…æ‹¬Doomå’ŒPrice of Persiaåœ¨å†…çš„ä¸€äº›æœ€æœ‰å½±å“åŠ›çš„æ¸¸æˆä»£ç ä¹Ÿéƒ½å¼€æºäº†ï¼Œå¼€æºæ€»æ¯”ä»–ä»¬è¢«åŸ‹æ²¡åœ¨æ–°å¢¨è¥¿å“¥æ²™æ¼ ï¼ˆåƒåœ¾å¡«åŸ‹åœºï¼‰ä¸­è¦å¥½ã€‚ 2015å¹´9æœˆ22æ—¥ï¼šGitHubè¯¾å ‚å¼€è¯¾GitHubè¯¾å ‚ä½¿æ•™å¸ˆæ›´å®¹æ˜“åˆ†å‘ä»£ç ä»»åŠ¡å¹¶æ”¶é›†GitHubä¸Šçš„ä½œä¸šã€‚ ä»Šå¤©ï¼Œé«˜ä¸­ï¼Œå¤§å­¦å’Œç¼–ç è®­ç»ƒè¥çš„å­¦ç”Ÿæ­£åœ¨å­¦ä¹ 180ä¸‡ä¸ªè¯¾å ‚çŸ¥è¯†åº“ - ä½†è¿™äº›è¿œä¸æ˜¯GitHubä¸Šå”¯ä¸€çš„æ•™è‚²èµ„æºã€‚ ä»èµ„æºæ¸…å•åˆ°åƒedXå’ŒUdacityè¿™æ ·çš„å¤§å‹å¼€æ”¾å¼åœ¨çº¿è¯¾ç¨‹ï¼ˆMOOCï¼‰ï¼Œæ‚¨å·²ç»åˆ›å»ºäº†æ•°åƒç§æ–¹æ³•æ¥å­¦ä¹ GitHubä¸Šçš„è½¯ä»¶å¼€å‘ã€‚ æˆ‘ä»¬åå•ä¸Šçš„è¯¾ç¨‹åŒ…æ‹¬Adaçš„Jumpstartè®¡åˆ’å’Œæ–¯å¦ç¦å¤§å­¦çš„TensorFlowæ•™ç¨‹ã€‚ STAT545æ­£åœ¨æ•™æˆæ•°åƒåå­¦ç”Ÿå¤„ç†æ•°æ®ï¼Œè€ŒCS50æ­£åœ¨ç¾å›½å„åœ°çš„æ•™å®¤ä¸­é‡‡ç”¨ã€‚ åœ¨è¿‡å»çš„åå¹´ä¸­ï¼ŒåƒDjango Girlsè¿™æ ·çš„ç¤¾åŒºé©±åŠ¨è®¡åˆ’å·²ç»å¯åŠ¨äº†åœ¨çº¿æ•™ç¨‹ï¼Œä¸¾åŠäº†é¢å¯¹é¢çš„æ´»åŠ¨ï¼Œå¹¶ä¸ºä¸–ç•Œå„åœ°çš„å­¦ç”Ÿæ‹“å®½äº†å­¦ä¹ æœºä¼šã€‚ æˆ‘ä»¬çš„æ ¡å›­ä¸“å®¶è¿˜åœ¨è¶…è¿‡15ä¸ªå›½å®¶çš„æ ¡å›­å»ºç«‹æŠ€æœ¯ç¤¾åŒºã€‚ 2015å¹´12æœˆ3æ—¥ï¼š è‹¹æœå¼€æºSwiftå°†Swiftä½œä¸ºå¼€æºè¯­è¨€å‘å¸ƒçš„å†³å®šæé«˜äº†å¼€å‘æ–°å·¥å…·çš„æ ‡å‡†ï¼Œå¹¶é¼“åŠ±æ›´å¤šçš„å…¬å¸å‘å…¬ä¼—å‘å¸ƒå·¥å…·ã€‚ 2016å¹´7æœˆ9æ—¥ï¼šé˜¿æ³¢ç½—11å·ä»£ç å‘å°„é˜¿æ³¢ç½—11å·äº1969å¹´ç™»é™†æœˆçƒã€‚å››åä¸ƒå¹´åï¼Œå¯åŠ¨é˜¿æ³¢ç½—11å·çš„æºä»£ç ç™»é™†GitHubã€‚ ç”±äºå…¶ä¸­åŒ…å«çš„å¤æ´»èŠ‚å½©è›‹æ•°é‡å¾ˆå¤§ï¼Œè¿™ä¹Ÿè¯æ˜äº†20ä¸–çºª60å¹´ä»£çš„ç¨‹åºå‘˜ä¹Ÿæœ‰å¹½é»˜æ„Ÿã€‚ é™¤äº†å­˜å‚¨è¿‡å»çš„ä»£ç ä¹‹å¤–ï¼Œç»„ç»‡æ­£åœ¨é€šè¿‡å¼€æºå’Œé—­æºè½¯ä»¶æ¨åŠ¨ç°ä»£èˆªå¤©å’Œæ¢ç´¢å…¶ä»–ç§‘å­¦ç ”ç©¶é¢†åŸŸã€‚ NASAç»´æŠ¤ç€æ•°ç™¾ä¸ªå¼€æºé¡¹ç›®ã€‚ åœ¨å…¬å…±ä»“åº“ä¸­ï¼Œæ‚¨ä¼šå‘ç°å¯è§†åŒ–ç«æ˜Ÿåœ°å½¢å¹¶ä½¿ç”¨TensorFlowè¯†åˆ«ç³»å¤–è¡Œæ˜Ÿçš„è½¯ä»¶ã€‚ æ‚¨è¿˜å¯ä»¥æ‰¾åˆ°ä¸€äº›SpaceXè¿™æ ·çš„ç»„ç»‡ä½¿ç”¨çš„å¼€æºé¡¹ç›®ã€‚ 2017å¹´2æœˆ10æ—¥ï¼šPythonå›¢é˜Ÿæ‰§è¡Œäº†ä»–ä»¬çš„ç¬¬ä¸€ä¸ªGitHubæ‹‰å–è¯·æ±‚Pythonçš„ç»´æŠ¤è€…å®£å¸ƒä»–ä»¬è®¡åˆ’åœ¨2016å¹´åˆè¿ç§»åˆ°GitHubä¸Šï¼Œå¹¶åœ¨ç¬¬äºŒå¹´å¼€å§‹ä»–ä»¬çš„ç¬¬ä¸€æ¬¡æ‹‰å–è¯·æ±‚ã€‚åœ¨è¿‡å»åå¹´ä¸­ï¼ŒPythonå·²ç»æˆä¸ºå¢é•¿æœ€å¿«çš„ä¸»è¦ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚è‡ª2015å¹´ä»¥æ¥ï¼Œå®ƒåœ¨GitHubæœ€æµè¡Œè¯­è¨€æ’è¡Œæ¦œä¸­ä¸€ç›´æ’åç¬¬ä¸‰ã€‚ Pythonçš„å†å²å¯ä»¥è¿½æº¯åˆ°20ä¸–çºª90å¹´ä»£åˆï¼Œä½†è¿‘å¹´æ¥å®ƒå˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚ è¿™å¯èƒ½æ˜¯ç”±äºå…¶ç¤¾åŒºå»ºç«‹äº†åºå¤§çš„æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚ 2017å¹´2æœˆ15æ—¥ï¼šTensorFlow 1.0å‘å¸ƒè°·æ­Œé¦–å…ˆåœ¨2015å¹´å°†å…¶å†…éƒ¨æœºå™¨å­¦ä¹ åº“TensorFlowå…¬å¼€ã€‚å»å¹´ï¼Œå®ƒæ˜¯GitHubä¸Šåˆ†æ”¯æœ€å¤šçš„é¡¹ç›®ä¹‹ä¸€ï¼ŒTensorFlow / modelsåº“åœ¨2017å¹´çš„è®¿é—®é‡æ¯”2016å¹´å¤š5.5å€ã€‚ç°åœ¨ï¼ŒTensorFlowæ˜¯ä¸€ä¸ª ä¸ºæ•°æ®ä¸“ä¸šäººå‘˜åˆ›å»ºæœºå™¨å­¦ä¹ æ¨¡å‹çš„é¦–é€‰å·¥å…·ã€‚ è¿‘å¹´æ¥ï¼Œæœºå™¨å­¦ä¹ çš„å¯èƒ½æ€§å·²ç»è¶…å‡ºé™åˆ¶ã€‚ ç»„ç»‡å’Œä¸ªäººä½¿ç”¨TensorFlowåˆ›å»ºè¯Šæ–­ç²¾ç¥ç–¾ç—…ï¼Œåˆ†ç±»çš®è‚¤ç™Œï¼Œç»„åˆéŸ³ä¹å’Œå¼€åŠ¨Mario Kartsï¼ˆè‡ªåŠ¨é©¾é©¶ï¼‰çš„æ¨¡å‹ã€‚ ä»Šå¤©ï¼Œæ•°æ®ç§‘å­¦å®¶å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—å¼€æºæ·±åº¦å­¦ä¹ å·¥å…·å’Œæ¨¡å‹æ¥è§£å†³å¤æ‚è€Œæœ‰è¶£çš„é—®é¢˜ã€‚ é™¤äº†TensorFlowä¹‹å¤–ï¼ŒCaffe2ï¼ŒSonnetï¼ŒDeepSpeechå’ŒKerasç­‰å·¥å…·ä»¥åŠpandaså’ŒJupyterç­‰æ•°æ®åˆ†æå·¥å…·ä¹Ÿæ”¯æŒè·¨è¡Œä¸šçš„æ•°æ®ç§‘å­¦å·¥ä½œã€‚ 2017å¹´5æœˆ2æ—¥ï¼š30,000ä¸ªéè¥åˆ©å¸æˆ·è¢«åˆ›å»ºéè¥åˆ©ç»„ç»‡å’Œéæ”¿åºœç»„ç»‡ï¼ˆNGOï¼‰é€šè¿‡æŠ€æœ¯å‘ç”Ÿä»¤äººéš¾ä»¥ç½®ä¿¡çš„äº‹æƒ…ã€‚ å»å¹´ï¼Œæˆ‘ä»¬é€šè¿‡Human Utilityï¼ŒMavenå’ŒConnectHomeç­‰ä¸¾æªè®©30,000ä¸ªéè¥åˆ©ç”¨æˆ·ä½¿ä¸–ç•Œå˜å¾—æ›´ç¾å¥½ã€‚ é‡ç”ŸåŠ¨ç‰©ä¿æŠ¤åä¼šï¼ˆWCSï¼‰çš„æµ·æ´‹ä¿æŠ¤åŠªåŠ›æ¶µç›–25ä¸ªå›½å®¶ï¼Œä»¥ä¿æŠ¤å’Œä¿æŠ¤ä¸–ç•ŒçŠç‘šç¤ã€‚ åœ¨è‚¯å°¼äºšï¼ŒWCSä½¿ç”¨è½¯ä»¶æ”¶é›†å…¨çƒç ”ç©¶äººå‘˜çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ”¶é›†ç‰©ç§æ•°æ®å’Œç›‘æµ‹æ›´å¤š252å…¬é¡·çš„æ²¿æµ·ç¤çŸ³ - çº¦260ä¸ªè¶³çƒåœºçš„ä»·å€¼ï¼Œå¸®åŠ©å½“åœ°ç¤¾åŒºæ›´æœ‰åˆ©å¯å›¾åœ°è¿›è¡Œæ•æã€‚ 2017å¹´5æœˆ31æ—¥ï¼šç¬¬1äº¿æ¬¡æ‹‰å–è¯·æ±‚å¾ˆå¤šbugè¢«ä¿®å¤ï¼Œä¼—å¤šæ–°åŠŸèƒ½å‘å¸ƒä»¥åŠè½¯ä»¶çš„ä¸æ–­æ”¹è¿›ã€‚äº‹å®ä¸Šï¼Œä»…2017å¹´ï¼Œç¤¾åŒºä¾¿è´¡çŒ®äº†2.9ä¸‡äº¿è¡Œä»£ç ã€‚ 2018å¹´4æœˆ10æ—¥ï¼šä»£ç ã€åä½œå’Œæäº¤çš„åå¹´GitHubæ­£å¼æ¨å‡ºåå¹´åï¼Œæˆ‘ä»¬çš„ç¤¾åŒºå·²ç»å‘å±•åˆ°å…¨çƒæ‹¥æœ‰è¶…è¿‡8000ä¸‡ä¸ªé¡¹ç›®çš„2700ä¸‡åå¼€å‘äººå‘˜ã€‚ æ„Ÿè°¢æ‚¨åˆ›å»ºçš„ä»£ç åº“ï¼Œæ‚¨æ‰€åšçš„è´¡çŒ®ä»¥åŠæ‚¨ä¸€èµ·æ„å»ºçš„è½¯ä»¶ã€‚ æ„Ÿè°¢å½“äº†10å¹´ç å†œçš„ä½ ï¼ˆå“ˆå“ˆï¼Œå·®ä¸å¤šè¿™ä¸ªæ„æ€å•¦ï¼‰ã€‚","categories":[],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"https://yiyan.site/tags/GitHub/"}]},{"title":"top-frameworks-trends-2018","slug":"top-frameworks-trends-2018","date":"2018-05-17T10:54:45.000Z","updated":"2018-05-17T11:31:14.639Z","comments":true,"path":"2018/05/17/top-frameworks-trends-2018/","link":"","permalink":"https://yiyan.site/2018/05/17/top-frameworks-trends-2018/","excerpt":"","text":"æ¥è‡ª85ä¸ªå›½å®¶çš„è¶…è¿‡1,000åå‚ä¸è€…å’Œå¤§é‡æ•°æ®ï¼ŒJAXenterè°ƒæŸ¥äº†2018å¹´å“ªäº›æŠ€æœ¯ä¸»é¢˜å€¼å¾—å…³æ³¨ï¼Œå¹¶ä¸å†å²è¿›è¡Œäº†å¯¹æ¯”ã€‚ Webæ¡†æ¶Reactã€Angularå’ŒNode.jsæ’åå æ®å‰3ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºJavaScriptå¼€å‘æ¡†æ¶å¯ä»¥è¯´æ˜¯æœ€è¿‘å‡ å¹´æœ€å—æ¬¢è¿çš„webæ¡†æ¶ã€‚æ’åœ¨ç¬¬å››ä½çš„æ˜¯Javaç”Ÿæ€ç³»ç»Ÿçš„Spring MVCï¼Œç´§æ¥å…¶åçš„æ˜¯å›½å†…å¤§å—æ¬¢è¿çš„Vue.jsã€‚ æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹2016å¹´å’Œ2017å¹´ï¼Œwebæ¡†æ¶çš„æ’åã€‚ Angularåœ¨2016å¹´çš„æ—¶å€™å¯èƒ½ä¸å«å—æ¬¢è¿ï¼Œä½†æ˜¯åæ¥è¢«Reactåæ¥å±…ä¸Šã€‚Reactåœ¨ä»Šå¹´å°†ä¼šç»§ç»­è¶…è¶ŠAngularã€‚Javaç”Ÿæ€çš„webæ¡†æ¶è¶Šæ¥è¶Šä¸å—æ¬¢è¿äº†ï¼Œä¾‹å¦‚Spring MVC.## åº”ç”¨ç¨‹åºæ¡†æ¶Javaç”Ÿæ€ä¸­Spring Bootè¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ä¸çŸ¥é“æ–°ç§€Eclipse MicroProfileæœªæ¥è¡¨ç°å¦‚ä½•ã€‚ å¯¹æ¯”2016å¹´å’Œ2017å¹´çš„å‘å±•è¶‹åŠ¿ï¼š UI toolkits2018å¹´ï¼ŒHTML5å°†æ˜¯ç»å¯¹çš„ç‹è€…ï¼Œç´§éšå…¶åçš„æ˜¯Bootstrapå’ŒWebç»„ä»¶ã€‚ æ¥çœ‹ä¸€ä¸‹Java UI toolkitsåœ¨2016å¹´å’Œ2017å¹´çš„æƒ…å†µã€‚ ç¨‹åºå‘˜ä»¬å¯¹JavaFXçš„å…´è¶£ä¼¼ä¹æœ‰æ‰€å‡å°‘ï¼Œä½†æ˜¯å®ƒä»ç„¶æ’åœ¨Swingå’ŒSWTå‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»JDK11å¼€å§‹ï¼ŒJavaFXå°†ä½œä¸ºä¸JDKåˆ†ç¦»ï¼Œä½œä¸ºç‹¬ç«‹çš„æ¨¡å—ã€‚Oracleåœ¨ä¸€ä»½ç™½çš®ä¹¦ä¸­å†™é“ï¼Œæˆªè‡³2022å¹´3æœˆï¼ŒJavaFXæ–°ä¿®è¡¥ç¨‹åºå°†ç»§ç»­å¾—åˆ°Java SE 8çš„æ”¯æŒï¼Œå¹¶å®£å¸ƒä»–ä»¬â€œæ­£åœ¨ä¸æ„Ÿå…´è¶£çš„ç¬¬ä¸‰æ–¹åˆä½œï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°æ„å»ºå’Œç»´æŠ¤JavaFXä½œä¸ºå•ç‹¬åˆ†å‘çš„å¼€æºæ¨¡å—â€œã€‚æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹UI Frameworksåœ¨2016å¹´å’Œ2017å¹´çš„è¡¨ç°ï¼š JavaScriptJavaScriptæ¡†æ¶æ˜¾ç„¶æ˜¯è¿™æ¬¡çš„ç²¾åï¼Œè®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿‡å»ä¸‰å¹´æƒ…å†µå¦‚ä½•å˜åŒ–ã€‚ Reactã€Angularå’ŒNode.jsé¥é¥é¢†å…ˆï¼ŒHTML5å’ŒBootstrapçš„é˜µåœ°ä¹Ÿå¾ˆå¤§ã€‚Web Componentsæ˜¯ä¸€å¥—ä¸åŒçš„æŠ€æœ¯ï¼ˆä¸æ˜¯Reactä¸­æ‰€æ¶‰åŠåˆ°çš„ç»„ä»¶ï¼‰ï¼Œå…è®¸æ‚¨åˆ›å»ºå¯é‡ç”¨çš„å®šåˆ¶å…ƒç´ ï¼ˆå®ƒä»¬çš„åŠŸèƒ½å°è£…åœ¨æ‚¨çš„ä»£ç ä¹‹å¤–ï¼‰å¹¶ä¸”åœ¨æ‚¨çš„webåº”ç”¨ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œæœ‰ç‚¹ç±»ä¼¼Reactï¼Œä½†æ˜¯åŒºåˆ«ä¹ŸæŒºå¤§ï¼Œå¾ˆå®¹æ˜“è¢«äººå¿½è§†ï¼Œå› ä¸ºReactã€Vueä¸­ä¹Ÿæœ‰ç»„ä»¶çš„æ¦‚å¿µï¼Œä¸çŸ¥é“å…¶å‘å±•å°†å¦‚ä½•ã€‚","categories":[],"tags":[]},{"title":"Goè¯­è¨€çš„5å¤§å¼€æºåº“","slug":"top5-libraries-for-Go","date":"2018-05-13T04:07:07.000Z","updated":"2018-05-17T09:26:30.098Z","comments":true,"path":"2018/05/13/top5-libraries-for-Go/","link":"","permalink":"https://yiyan.site/2018/05/13/top5-libraries-for-Go/","excerpt":"","text":"Goè¯­è¨€å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå…¶æ€§èƒ½å‡ºä¼—ã€æ”¯æŒåˆ†å¸ƒå¼ç­‰ç‰¹æ€§æ·±å¾—ç¨‹åºå‘˜çš„å–œçˆ±ã€‚å°ç¼–ä¹‹å‰åœ¨æ¯«æ— Goè¯­è¨€å¼€å‘ç»éªŒçš„æƒ…å†µä¸‹ï¼ŒåªèŠ±äº†ä¸€ä¸ªæ˜ŸæœŸä¾¿æŒæ¡äº†Goè¯­è¨€çš„åŸºæœ¬ç‰¹æ€§ï¼Œåæ¥ä¹Ÿæ²¡èŠ±å‡ å¤©ä¾¿æ­å»ºäº†ä¸€ä¸ªæ•°æ®åº“ä¸ºmongoDBçš„æœåŠ¡å™¨ï¼Œå¹¶å®ç°äº†ç›¸å½“å¤ï¼ˆchongï¼‰æ‚ï¼ˆfuï¼‰çš„åŠŸèƒ½ï¼Œå¯è§å…¶ä¸Šæ‰‹éå¸¸ç®€å•ã€‚ ä¸‹é¢ä»‹ç»5ä¸ªåœ¨GitHubä¸Šæ¯”è¾ƒç«çƒ­çš„Goè¯­è¨€å¼€æºå·¥å…·åº“ã€‚ Go kitï¼šå¾®æœåŠ¡å·¥å…·åŒ…Go kitå¾®æœåŠ¡å·¥å…·åŒ…ä¸ºå¾®æœåŠ¡æä¾›äº†ä¸€ç³»åˆ—çš„åŠŸèƒ½ï¼Œä½¿æ­å»ºå¾®æœåŠ¡ç‰¹åˆ«æ–¹ä¾¿ï¼Œå¼€å‘äººå‘˜åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘å³å¯ã€‚é™äºç¯‡å¹…ï¼Œè¿™é‡Œåˆ—å‡ºGo kitæä¾›çš„å‡ é¡¹åŠŸèƒ½ï¼š jwt(JSON web token):ä¸€ç§è®¤è¯é€šä¿¡åŒæ–¹çš„åè®® RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰åŸºç¡€æ”¯æŒ grpcï¼šGoogleå¼€æºRPCæ¡†æ¶ httpæœåŠ¡ LBè´Ÿè½½å‡è¡¡ ZKï¼ˆZooKeeperï¼‰æ”¯æŒï¼šåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ Graphite:æ”¯æŒç›‘æ§ç³»ç»Ÿ InfluxDB: æ—¶é—´åºåˆ—æ•°æ®åº“ GORMORMæ˜¯ä»€ä¹ˆï¼Ÿå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject Relational Mappingï¼‰,æ˜¯ä¸€ç§ç¨‹åºæŠ€æœ¯ï¼Œç”¨äºå®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€é‡Œä¸åŒç±»å‹ç³»ç»Ÿçš„æ•°æ®ä¹‹é—´çš„è½¬æ¢ã€‚é€šä¿—ä¸€ç‚¹è®²ï¼šæ“ä½œæ•°æ®åº“ã€‚GORMå…·æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå…·å…¶å®˜ç½‘ä»‹ç»ï¼Œå…·å¤‡ä¸€ä¸‹åŠŸèƒ½ï¼š å…¨åŠŸèƒ½ORMï¼ˆæ— é™æ¥è¿‘ï¼‰ å…³è”ï¼ˆåŒ…å«ä¸€ä¸ªï¼ŒåŒ…å«å¤šä¸ªï¼Œå±äºï¼Œå¤šå¯¹å¤šï¼Œå¤šæ€ï¼‰ é’©å­ (åœ¨åˆ›å»º/ä¿å­˜/æ›´æ–°/åˆ é™¤/æŸ¥æ‰¾ä¹‹å‰æˆ–ä¹‹å) é¢„åŠ è½½ äº‹åŠ¡ å¤åˆä¸»é”® SQL ç”Ÿæˆå™¨ æ•°æ®åº“è‡ªåŠ¨è¿ç§» è‡ªå®šä¹‰æ—¥å¿— å¯æ‰©å±•æ€§, å¯åŸºäº GORM å›è°ƒç¼–å†™æ’ä»¶ æ‰€æœ‰åŠŸèƒ½éƒ½è¢«æµ‹è¯•è¦†ç›– å¼€å‘è€…å‹å¥½ clicliï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿçš„åˆ›å»ºgoè¯­è¨€å‘½ä»¤è¡Œå·¥å…·ï¼Œç›®å‰åœ¨GitHubä¸Šçš„staræ•°ä¸º8k+ã€‚ vegetavegetahttpè´Ÿè½½æµ‹è¯•å·¥å…·ã€‚ fuzzyfuzzy,goè¯­è¨€å®ç°çš„å­—ç¬¦ä¸²æ¨¡ç³ŠåŒ¹é…å·¥å…·ã€‚ build-web-application-with-golangé™¤äº†ä¸Šé¢æåˆ°çš„å‡ ä¸ªå·¥å…·å¤–ï¼Œåœ¨GitHubä¸Šè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç«çƒ­çš„é¡¹ç›®ï¼Œstaræ•°é‡è¾¾åˆ°äº†2ä¸‡å¤šã€‚å…¶å®ï¼Œç§°ä¹‹ä¸ºé¡¹ç›®å¹¶ä¸å‡†ç¡®ï¼Œåº”è¯¥è¯´æ˜¯åšå®¢ï¼Œå®ƒä»é›¶å¼€å§‹ï¼Œè¯¦ç»†çš„ä»‹ç»äº†å¦‚ä½•ä¸€æ­¥æ­¥æ­å»ºGoè¯­è¨€å¼€å‘ç¯å¢ƒã€æ­å»ºwebæœåŠ¡å™¨ã€è¿æ¥æ•°æ®ã€éƒ¨ç½²ç­‰ç­‰ï¼Œå‡ ä¹ä¸€æ•´å¥—çš„Goè¯­è¨€å»ºç«™æ–¹æ³•ï¼Œå®ƒå°±æ˜¯:build-web-application-with-golangã€‚å®ƒä¸ä»…æœ‰ä¸­æ–‡ç‰ˆï¼Œè¿˜æœ‰è‹±æ–‡ã€æ³•æ–‡ã€æ—¥æ–‡ç‰ˆç­‰ç­‰å¤šç§è¯­è¨€ã€‚ä»ä»‹ç»é¡µé¢ä¸Šï¼Œå…¶åŒ…å«æµ“æµ“çƒ­æƒ…ã€æ±‚èµåŠ©çš„æ”¯ä»˜äºŒç»´ç æ¥çœ‹ï¼Œè¿™æ˜¯å›½å†…å¼€å‘è€…è´¡çŒ®çš„ï¼Œç‚¹èµï¼","categories":[],"tags":[]},{"title":"Parcelæ‰“åŒ…åˆä½“éªŒ","slug":"how-about-Parcel","date":"2018-05-11T03:16:10.000Z","updated":"2018-05-14T07:02:09.535Z","comments":true,"path":"2018/05/11/how-about-Parcel/","link":"","permalink":"https://yiyan.site/2018/05/11/how-about-Parcel/","excerpt":"","text":"Parcelå·ç§°æé€Ÿé›¶é…ç½®Webåº”ç”¨æ‰“åŒ…å·¥å…·ï¼Œç›¸æ¯”äºwebpackçš„å¤æ‚æ€§ï¼ŒParcelç¡®å®ä¸ºæˆ‘ä»¬çœå»äº†å¾ˆå¤šé…ç½®ã€‚ä½¿ç”¨è¿‡facebook/create-react-appçš„åŒå­¦åº”è¯¥ä¼šå‘ç°ï¼Œcreat-react-appä¹Ÿç®€åŒ–äº†é…ç½®ï¼Œå…¶åŒ…å«react-scriptsåŒ…ï¼Œè¿™ä¸ªåŒ…åšçš„äº‹æ­£ä¸Parcelç±»ä¼¼ï¼šå°†æ‰€æœ‰çš„æ‰“åŒ…é…ç½®ç»Ÿç­¹ã€å°è£…ã€‚ ParcelåŸºæœ¬ç”¨æ³•å®‰è£…Parcelå…¨å±€å®‰è£…Parcel:Yarn:1yarn global add parcel-bundler npm:1npm install -g parcel-bundler åˆ›å»ºã€è¿è¡Œé¡¹ç›®åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»ºå…¥å£htmlå’Œjsæ–‡ä»¶ï¼Œhtmlå¼•å…¥å…¥å£jsæ–‡ä»¶ã€‚12345&lt;html&gt;&lt;body&gt; &lt;script src=\"./index.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 1console.log(\"hello world\") åœ¨æ–‡ä»¶å¤¹ä¸‹åˆå§‹åŒ–é¡¹ç›®ï¼š1yarn init -y æˆ–1npm init -y å¯åŠ¨æœåŠ¡å¼€å§‹å¼€å‘ï¼š1parcel index.html Parcelçš„åŸºæœ¬ç”¨æ³•ä»‹ç»å°±æ­¤ä¸ºæ­¢ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå®˜ç½‘ä¸Šæœ‰æ›´è¯¦ç»†çš„ä»‹ç»ã€‚ é¡¹ç›®è¿ç§»æˆ‘ä»¬ç°åœ¨å°è¯•å°†webpacké…ç½®çš„é¡¹ç›®è¿ç§»åˆ°Parcelã€‚ vue-cli webpackæˆ‘ä»¬é¦–å…ˆä½¿ç”¨vue-cliåˆ›å»ºä¸€ä¸ªé¡¹ç›®:1vue init webpack parcel-test é¦–å…ˆè¿›å…¥é¡¹ç›®è¿è¡Œä¸€ä¸‹npm run devï¼Œæ£€æŸ¥æ˜¯å¦èƒ½è¿è¡ŒæˆåŠŸï¼ŒOKï¼è¿è¡ŒæˆåŠŸã€‚ç„¶åæˆ‘ä»¬ç›´æ¥è¿è¡Œparcel index.htmlDANG!DANG! emmmmmâ€¦ å¥½åƒæ²¡æœ‰å°†main.jså¼•å…¥htmlæ–‡ä»¶ã€‚æ”¹ï¼ ä¿®æ”¹å¼•ç”¨è·¯å¾„ã€‚é‡å¯æœåŠ¡ï¼Œå‡ºç°é”™è¯¯ ç”±äºæˆ‘ä»¬åœ¨App.vueä¸­ä½¿ç”¨äº†templateå‡½æ•°ï¼Œè€Œimport Vue from &#39;vue&#39;é»˜è®¤å¼•ç”¨çš„è¿è¡Œæ—¶æ€ç‰ˆï¼ˆä¸æ”¯æŒtemplateå‡½æ•°ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æ”¹ç”¨vueå®Œæ•´ç‰ˆã€‚vueä¿®æ”¹main.jså’Œrouter/index.jsæ–‡ä»¶ä¸­vueçš„å¼•ç”¨1import Vue from 'vue/dist/vue.esm.js' å†æ¥è¿è¡Œä¸€æ¬¡parcel index.htmlä¾¿æˆåŠŸäº†ï¼Œå¯ä»¥æ­£å¸¸å¼€å‘äº†ã€‚ å°ç¼ºé™·Parcelç›®å‰æ”¯æŒCommonJS å’Œ ES6 ä¸¤ç§æ¨¡å—è¯­æ³•ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ åœ¨index.htmlé¡µé¢å¼•å…¥äº†é¡¹ç›®ä¸­éä¸Šè¿°ä¸¤ç§æ¨¡å—è¯­æ³•å¼€å‘çš„jsï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‡ºç°æ„å¤–æƒ…å†µã€‚å¦‚æœè¿˜æ˜¯æƒ³å¼•å…¥éCommonJSå’ŒES6æ¨¡å—è¯­æ³•å¼€å‘çš„jsï¼Œç›®å‰å¯ä»¥æœ‰ä¸¤ç§è§£å†³æ–¹æ³•: å¦‚æœæœ‰æºç ï¼Œåˆ™æ”¹é€ ä»£ç  æ²¡æœ‰æºç ï¼Œå¹¶ä¸”è¿˜æ˜¯å‹ç¼©çš„ï¼Œå°†å…¶æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œhtmlé€šè¿‡åŸŸåå¼•ç”¨ å°†ç¬¬ä¸‰æ–¹çš„ä»£ç å†…è”åˆ°htmlä¸­ æ€»ç»“æ€»ä½“è€Œè¨€ï¼ŒParcelç¡®å®æ¯”webpackè¦ç®€åŒ–å¾ˆå¤šï¼Œå‡ ä¹æ˜¯å¼€ç®±å³ç”¨ã€‚å¯¹äºæ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ã€‚","categories":[],"tags":[{"name":"Parcel JavaScript","slug":"Parcel-JavaScript","permalink":"https://yiyan.site/tags/Parcel-JavaScript/"}]},{"title":"ES2017ä¸­async&awaitè¸©å‘æŒ‡å—","slug":"async-and-await-comprehensive-guide","date":"2018-05-10T08:15:26.000Z","updated":"2018-05-10T11:03:28.853Z","comments":true,"path":"2018/05/10/async-and-await-comprehensive-guide/","link":"","permalink":"https://yiyan.site/2018/05/10/async-and-await-comprehensive-guide/","excerpt":"","text":"ES2017æ ‡å‡†å¼•å…¥äº†asyncã€awaitå‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿äº†ï¼Œè€Œä¸ç”¨æ¯æ¬¡new Promise(...)äº† æœ¬æ–‡è¿˜ä½¿ç”¨åˆ°äº†es6çš„å…¶ä»–ç‰¹æ€§ï¼Œä¾‹å¦‚ç®­å¤´å‡½æ•°=&gt;ï¼Œä»¥åŠä¸ç”¨è¯´çš„Promiseï¼Œæ‰€ä»¥ä¸ºäº†åœ¨ç”Ÿäº§ä¸Šå…¼å®¹ï¼Œéœ€è¦å¼•å…¥babel-polyfillï¼Œå¹¶å¯¹ä»£ç è¿›è¡ŒBabelå¤„ç†ã€‚è¿™é‡Œæš‚æ—¶ä¸å¯¹ç›¸å…³çŸ¥è¯†è¿›è¡Œç»†è¯´ã€‚å¦‚æœä½ ä½¿ç”¨æœ€æ–°ç‰ˆçš„Chromeæµè§ˆå™¨è¿›è¡Œå¼€å‘è°ƒè¯•ï¼Œå°±å¯ä»¥æš‚æ—¶ä¸ç”¨å…³å¿ƒç›¸å…³çŸ¥è¯†äº†ã€‚ åŸºæœ¬ç”¨æ³•asyncasyncå…¶å®æ˜¯Promiseè¯­æ³•ç³–ã€‚æˆ‘ä»¬é¦–å…ˆæ¥å†™ä¸€ä¸ªPromiseï¼š1234567891011121314151617function asyncWork () &#123; return new Promise((resolve, reject) =&gt; &#123; // TODO something var isSucc = true if (isSucc) &#123; reslove() &#125; else &#123; reject() &#125; &#125;)&#125;function doWrok () &#123; asyncWork().then(resp =&gt; &#123; console.log('success') &#125;)&#125; å°†å…¶æ”¹ä¸ºasyncå†™æ³•ï¼š123456789101112131415async function asyncWork () &#123; // TODO something var isSucc = true if (isSucc) &#123; return &#125; else &#123; throw 'error' &#125;&#125;function doWork () &#123; asyncWork().then(resp =&gt; &#123; console.log('success') &#125;)&#125; å¯ä»¥çœ‹åˆ°ä½¿ç”¨asyncè¯­æ³•ç³–åï¼ŒasyncWorkä»£ç é‡å‡å°‘äº†ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç é€»è¾‘æ¯”è¾ƒå¤æ‚çš„æ—¶å€™ï¼Œä½¿ç”¨asyncä¼šç›´è§‚å¾ˆå¤šã€‚ awaitå¾€å¾€ä½¿ç”¨awaitçš„å‡½æ•°éœ€è¦ä½¿ç”¨asyncã€‚ asyncè¡¨ç¤ºå¼‚æ­¥ï¼Œè€Œawaitè¡¨ç¤ºéœ€è¦ç­‰å¾…ã€‚è¿›ä¸€æ­¥è¯´ï¼Œasyncå‡½æ•°å¯ä»¥çœ‹æˆå°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè€Œawaitå°±æ˜¯thenå‘½ä»¤çš„è¯­æ³•ç³–ã€‚awaitä½¿ç”¨æ–¹æ³•ï¼š12345678910111213141516171819202122async function asyncWork () &#123; // TODO something var isSucc = true if (isSucc) &#123; return &#125; else &#123; throw 'error' &#125;&#125;async function doWork () &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() return workResult1 + workResult2&#125;function mainWork() &#123; doWrok.then(resp =&gt; &#123; console.log(resp) &#125;)&#125; å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°†ä¸Šé¢çš„asyncWorkæ–¹æ³•æ”¹ä¸ºä½¿ç”¨Promiseã€‚ è¿›é˜¶è¸©å‘æ—¢ç„¶ä½¿ç”¨äº†javaScriptçš„ES2017ç‰¹æ€§ï¼Œé‚£ä¹ˆä½ ä¸€å®šä¼šä½¿ç”¨ç®­å¤´å‡½æ•°=&gt;ã€‚ç›¸åº”çš„ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸ºäº†å…¼å®¹æ€§ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨babel-preset-envç­‰è¿›è¡Œè½¬ä¹‰ã€‚å‘æ¥äº†ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„doWorkæ–¹æ³•æ”¹ä¸ºå¦‚ä¸‹ï¼š12345678910async function doWork () &#123; var array = [1, 2, 3] array.forEach(item =&gt; &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() console.log(workResult1 + workResult2) &#125;) console.log(array)&#125; æˆ‘ä»¬æ¥åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶index.htmlã€main.jsæ¥è¿›è¡ŒéªŒè¯: index.html:12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;title&gt;async&amp;await&lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt; &lt;script src=\"./main.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt; main.js1234567891011121314151617181920212223242526async function asyncWork () &#123; // TODO something var isSucc = true if (isSucc) &#123; return &#125; else &#123; throw 'error' &#125;&#125;async function doWork () &#123; var array = [1, 2, 3] array.forEach(item =&gt; &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() console.log(workResult1 + workResult2) &#125;) console.log(array)&#125;function mainWork() &#123; doWrok.then(resp =&gt; &#123; console.log(resp) &#125;)&#125; è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨Pracelæ¥è¿›è¡Œæ‰“åŒ…ã€‚Parcelå·ç§°æé€Ÿé›¶é…ç½®Webåº”ç”¨æ‰“åŒ…å·¥å…·ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦ä¸€ç‚¹ç‚¹é…ç½®çš„ï¼ˆå½“ç„¶ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼‰ï¼Œä¸è¿‡æ¯”é‚£ä¸ªvue-cliçš„webpackæ¨¡æ¿é…ç½®è¦ç®€å•å¤šäº†!!! ä½¿ç”¨npm initæˆ–è€…yarn initå¯¹é¡¹ç›®åˆå§‹åŒ–åï¼Œå‘½ä»¤è¡Œè¿è¡Œï¼šparcel index.htmlï¼Œè¿è¡Œç»“æœï¼š OMG!!!ç«Ÿç„¶æŠ¥é”™äº†ï¼Œä»€ä¹ˆæƒ…å†µï¼Ÿasyncã€awaitè¿™å¯¹é¸³é¸¯æˆå¯¹å‡ºç°äº†ï¼Œæ€ä¹ˆè¿˜ä¼šæŠ¥é”™ï¼Ÿï¼ä¸”æ…¢ï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹çœ‹Parcelå¯¹doWorkçš„å¤„ç†ç»“æœæ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬æ‰“å¼€é¡¹ç›®ä¸‹çš„distæ–‡ä»¶å¤¹ã€‚distæ–‡ä»¶å¤¹ä¸‹å­˜æ”¾äº†Parcelçš„æ‰“åŒ…ç»“æœã€‚ â€¦å“ˆå“ˆï¼Œç«Ÿç„¶åªæœ‰index.htmlæ–‡ä»¶ã€‚é‚£æˆ‘ä»¬ä¸Šè¿°doWorkå‡½æ•°æ”¹ä¸€ä¸‹ï¼š12345678910async function doWork () &#123; var array = [1, 2, 3] for (var i = 0; i &lt; array.length; i++) &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() console.log(workResult1 + workResult2) &#125; console.log(array)&#125; å†æ¬¡è¿è¡Œparcel index.htmlï¼Œç¼–è¯‘æˆåŠŸï¼š æœºæ™ºçš„æˆ‘ä»¬å‘ç°æ˜¯ç®­å¤´=&gt;å‡½æ•°åœ¨æ·»ä¹±ã€‚æˆ‘ä»¬å†çœ‹ä¸€ä¸‹es6ä¸­=&gt;çš„å®šä¹‰ï¼š123456var f = v =&gt; v;// ç­‰åŒäºvar f = function (v) &#123; return v;&#125;; é‚£ä¸Šé¢åŒ…å«ç®­å¤´å‡½æ•°çš„doWorkä¹Ÿå°±ç­‰åŒäºï¼š12345678910async function doWork () &#123; var array = [1, 2, 3] array.forEach(function(item) &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() console.log(workResult1 + workResult2) &#125;) console.log(array)&#125; å¤–å±‚çš„doWorkå‡½æ•°å’ŒåŒ…è£¹awaitçš„å‡½æ•°å·²ç»ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°äº†ï¼Œæ‰€ä»¥Parcelç¼–è¯‘å¤±è´¥ã€‚å¦‚æœæƒ³ç»§ç»­ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥æ”¹ä¸ºï¼š12345678910function doWork () &#123; var array = [1, 2, 3] array.forEach(async(item) =&gt; &#123; // å°†ç­‰å¾…ä¸¤ä¸ªasyncWorkçš„è¿”å›ç»“æœï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€æ­¥ var workResult1 = await asyncWork() var workResult2 = await asyncWork() console.log(workResult1 + workResult2) &#125;) console.log(array)&#125; æ‰€ä»¥ï¼Œasyncã€awaitã€=&gt;ç­‰es6ç‰¹æ€§ï¼Œåœ¨ä½¿ç”¨æ—¶è¦æ³¨æ„å®ƒä»¬çš„ä½œç”¨ï¼Œé¿å…å¢åŠ ä¸å¿…è¦çš„è°ƒè¯•æ—¶é—´ã€‚","categories":[],"tags":[]},{"title":"å‰ç«¯ä»£ç å¦‚ä½•è°ƒè¯•ï¼Ÿ","slug":"how-to-debug-web-code","date":"2018-05-06T08:57:44.000Z","updated":"2018-05-25T10:58:58.432Z","comments":true,"path":"2018/05/06/how-to-debug-web-code/","link":"","permalink":"https://yiyan.site/2018/05/06/how-to-debug-web-code/","excerpt":"","text":"å‰ç«¯ä»£ç çš„è°ƒè¯•å³javaScriptè°ƒè¯•ï¼Œè°ƒè¯•æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸åŒçš„å¼€å‘è€…æœ‰ä¸åŒçš„è°ƒè¯•æ–¹å¼ã€‚è¿™é‡Œä»‹ç»å‡ ç§ä»å…¥é—¨åˆ°å…¥å‘çš„è°ƒè¯•æ–¹æ³•ã€‚ æœ€ç®€å•è°ƒè¯•æ–¹æ³•ï¼šæ‰“å°æ—¥å¿—æ‰“å°æ—¥å¿—ä¸ä»…ä»…æ˜¯å‰ç«¯ä»£ç çš„è°ƒè¯•æ–¹æ³•ï¼Œå®ƒå‡ ä¹æ˜¯å¤§éƒ¨åˆ†å¼€å‘è¯­è¨€çš„å…¥é—¨çº§è°ƒè¯•æ–¹æ³•ã€‚å¾ˆå¤šå¼€å‘è€…åœ¨æ–°æ‰‹é˜¶æ®µéƒ½ä¼šé‡‡ç”¨è¿™ä¸€æ–¹å¼ï¼Œå°†å˜é‡å€¼ç­‰ä¿¡æ¯æ‰“å°å‡ºæ¥ã€‚javaScriptè¾“å‡ºæ—¥å¿—ä¸»è¦æ–¹æ³•æ˜¯consoleå¯¹è±¡ã€‚consoleå¯¹è±¡æœ‰å¾ˆå¤šä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚console.assertã€console.clearã€console.countç­‰æ–¹æ³•ï¼Œå…¶ä¸­ä¸æ—¥å¿—è¾“å‡ºæœ‰å…³çš„æ–¹æ³•æœ‰ï¼š 1234567console.log() // æ‰“å°å­—ç¬¦ä¸²console.info() //æ‰“å°ä¸€æ¡ä¿¡æ¯console.error() // æ‰“å°ä¸€æ¡é”™è¯¯ä¿¡æ¯console.warn() //æ‰“å°ä¸€ä¸ªè­¦å‘Šä¿¡æ¯ æ‰“å°æ—¥å¿—çš„è°ƒè¯•æ–¹æ³•è¶…çº§ç®€å•ï¼Œåªéœ€è¦åœ¨éœ€è¦æŸ¥çœ‹ä¿¡æ¯çš„ä»£ç è¡Œè°ƒç”¨ä¸Šé¢çš„æ–¹æ³•å³å¯è¾“å‡ºæƒ³è¦çš„ä¿¡æ¯ã€‚ä¸Šè¿°4ä¸ªæ–¹æ³•å‡å¯å°†å¯¹è±¡æ‰“å°å‡ºæ¥ï¼Œä¾‹å¦‚ï¼š12345var person = &#123; name: 'Rose'&#125;console.info('person', person) å¦‚æœä½¿ç”¨çš„æ˜¯Chromeæµè§ˆå™¨ï¼Œå³é”®é¡µé¢=&gt;æ£€æŸ¥ï¼Œåœ¨consoleä¸­å³å¯çœ‹åˆ°ç›¸åº”çš„è¾“å‡º: ä»£ç ä¸­æ’å…¥debuggerjavascriptæä¾›äº†ä¸€ä¸ªå…³é”®å­—ï¼šdebuggerï¼Œè¿™ä¸ªè¯­å¥å‰å®³äº†ï¼Œå¯ä»¥è°ƒç”¨ä»»ä½•å¯ç”¨çš„è°ƒè¯•åŠŸèƒ½ï¼Œè®¾ç½®æ–­ç‚¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰è°ƒè¯•åŠŸèƒ½å¯ç”¨ï¼Œæ­¤è¯­å¥å°†ä¸èµ·ä½œç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŒ…debuggerè¯­å¥çš„htmlä»£ç ï¼Œå½“ä»£ç è¢«æ‰§è¡Œæ—¶ï¼Œä¼šå°è¯•è°ƒç”¨ä¸€ä¸ªå¯ç”¨çš„è°ƒè¯•å™¨è¿›è¡Œè°ƒè¯•ã€‚1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;title&gt;test&lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;/head&gt;&lt;body&gt;&lt;script&gt; var a = 1 a = a + 1 debugger a = a + 2&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¿å­˜è¯¥æ–‡ä»¶ï¼Œä½¿ç”¨Chromeæµè§ˆå™¨å°†å…¶æ‰“å¼€ã€‚æ‰“å¼€Chrome developer toolï¼Œ å³å³é”®é¡µé¢=&gt;æ£€æŸ¥ï¼Œå‘ç°æ²¡å•¥å‘€ï¼Œåªæœ‰ä¸‹é¢è¿™ä¸ªé¡µé¢ï¼š æ­¤æ—¶æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œdangï½dangï½ï¼Œå˜è¿™æ ·äº†ï¼š çœ‹åˆ°å›¾ä¸­æ ‡çº¢çš„åœ°æ–¹äº†å—ï¼Ÿé‚£å°±æ˜¯æˆ‘ä»¬è®¾ç½®çš„æ–­ç‚¹ï¼Œç¨‹åºè¿è¡Œåˆ°é‚£é‡Œåœæ­¢äº†ã€‚æ­¤æ—¶æˆ‘ä»¬å°†é¼ æ ‡ç§»è‡³å˜é‡aä¸Šï¼Œå³å¯çœ‹åˆ°açš„å€¼ã€‚ä¸‹å›¾ä¸­çº¢åœˆå†…æ•°å­—ä¹Ÿå¯ä»¥è®¾ç½®æ–­ç‚¹ã€‚ ç¼–è¾‘å™¨ä¸­è°ƒè¯•c++ã€Javaã€c#ç­‰è¯­è¨€éƒ½èƒ½åœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œè°ƒè¯•ã€æ‰“æ–­ç‚¹ï¼Œä¸»è¦åŸå› æ˜¯å®ƒä»¬éƒ½å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­è¿è¡Œï¼Œè€ŒWebå‰ç«¯ä»£ç åªèƒ½è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ã€‚ webstormwebstormå¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œè°ƒè¯•ã€æ‰“æ–­ç‚¹ï¼Œååˆ†æ–¹ä¾¿ã€‚ä½†æ˜¯ï¼Œwebstormè¿è¡Œæ—¶å ç”¨èµ„æºæ¯”è¾ƒå¤šï¼Œå¯¹äºæ€§èƒ½æ¯”è¾ƒä½çš„ç”µè„‘ï¼Œwebstormè¿è¡Œçš„ä¸æ˜¯å¾ˆæµç•…ã€‚webstormçš„è°ƒè¯•æ–¹æ³•å¯ä»¥åœ¨å®˜ç½‘ä¸­æ‰¾åˆ°ã€‚ Sublime TextSublime Textæ˜¯ä¸€ä¸ªæ¯”è¾ƒè½»é‡çš„è„šæœ¬ç¼–è¾‘å™¨ï¼Œè¿è¡Œæ¯”è¾ƒæµç•…ï¼Œå¾ˆå¤šå‰ç«¯å¼€å‘è€…éƒ½å–œæ¬¢ä½¿ç”¨ã€‚Sublime Textæœ‰å‡ ä¸ªå¯ä»¥å®ç°è°ƒè¯•çš„Packageï¼Œä½†æ˜¯è¯•ç”¨äº†ä¸€ä¸‹ï¼Œæ²¡æœ‰æˆåŠŸ Visual Studio CodeVisual Studio Codeå…·æœ‰Sublime Textè½»é‡ï¼ŒåŒæ—¶ä¹Ÿèƒ½å®ç°è°ƒè¯•ï¼Œç®€ç›´è¦æŠ›å¼ƒSublime TextæŠ•é Visual Studio Codeçš„æ€€æŠ±äº†â¤ï¸ 1ã€å®‰è£…Debugger for Chromeæ’ä»¶å®‰è£…æœ€æ–°ç‰ˆçš„Visual Studio Codeåï¼Œæ‰“å¼€å®ƒï¼Œç‚¹å‡»å·¦ä¾§æ‰©å±•å›¾æ ‡ åœ¨â€œåœ¨å•†åº—ä¸­æœç´¢æ‰©å±•â€ä¸­è¾“å…¥â€œDebugger for Chromeâ€ï¼Œå®‰è£…Debugger for Chromeå³å¯ å®‰è£…æˆåŠŸåï¼Œå…ˆæ–°å»ºæ–‡ä»¶å¤¹test/srcï¼Œåœ¨å…¶ä¸­æ–°å»ºindex.htmlå’Œindex.jsä¸¤ä¸ªæ–‡ä»¶1234567891011121314151617&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\" /&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;title&gt;Page Title&lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;o&lt;/div&gt; &lt;script src=\"./index.js\"&gt;&lt;/script&gt; &lt;script&gt; var result = add(1, 2) console.info('html', result) &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; index.js: 123456function add(a, b) &#123; return a + b&#125;var result = add(1, 2)console.info(result) é¦–å…ˆåœ¨index.jsä¸­æ‰“ä¸€ä¸ªæ–­ç‚¹ã€‚ç‚¹å‡»å›¾ä¸­çº¢æ¡†åŒºåŸŸå³å¯æ·»åŠ æ–­ç‚¹ï¼Œä¹Ÿå¯å°†é¼ æ ‡æ”¾åœ¨çº¢æ¡†åŒºåŸŸå³é”®æ·»åŠ ã€åˆ é™¤æ–­ç‚¹ é€‰ä¸­testæ–‡ä»¶å¤¹ï¼ŒæŒ‰å¿«æ·é”®F5ï¼Œæˆ–è€…ç‚¹å‡»è°ƒè¯•-&gt;å¯åŠ¨è°ƒè¯•ï¼Œé€‰æ‹©Chromeã€‚Visual Studio Codeä¼šè‡ªåŠ¨åœ¨testæ–‡ä»¶å¤¹ä¸‹åˆ›å»º.vscode/launch.jsonæ–‡ä»¶ã€‚ä¿®æ”¹launch.jsonæ–‡ä»¶ï¼Œä¿®æ”¹æˆ–å¢åŠ é€”ä¸­çº¢çº¿æ ‡è¯†çš„è¡Œã€‚ ç„¶åå†æ¬¡æŒ‰F5æˆ–å¯åŠ¨è°ƒè¯•ï¼Œæ­¤æ—¶Chromeä¼šè‡ªåŠ¨æ‰“å¼€index.htmlï¼Œåˆ·æ–°é¡µé¢ï¼Œå³å¯å‘ç°Visual Studio Codeåœ¨åˆšæ‰æˆ‘ä»¬æ·»åŠ çš„æ–­ç‚¹å‡ºé˜»å¡äº† ç§»åŠ¨ç«¯ç½‘é¡µè°ƒè¯•ç§»åŠ¨ç«¯ä¸»è¦åˆ†Androidå’ŒiOSï¼ŒWindows Phoneå°±æš‚æ—¶ä¸è€ƒè™‘äº†ï¼Œ2017å¹´é”€å”®çš„æ™ºèƒ½æ‰‹æœºï¼Œ99.9%çš„æ­è½½äº†è¿™ä¸¤ä¸ªæ“ä½œç³»ç»Ÿã€‚ Androidç«¯è°ƒè¯•Androidæ‰‹æœºè°ƒè¯•é¦–å…ˆéœ€è¦å¼€å¯å¼€å‘è€…æ¨¡å¼ï¼Œå…¶æ¬¡ï¼Œå¦‚æœæ˜¯è°ƒè¯•æµè§ˆå™¨åˆ™éœ€è¦å®‰è£…Chromeæµè§ˆå™¨ï¼Œè‹¥æ˜¯è°ƒè¯•å…¶ä»–APPåˆ™éœ€è¦APPå¼€å‘è€…æ‰“å¼€è°ƒè¯•çš„å¼€å…³ã€‚ å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œæ‰“å¼€ç½‘é¡µï¼Œä½¿ç”¨usbçº¿é“¾æ¥ç”µè„‘ï¼Œå…è®¸ç”µè„‘è°ƒè¯•æ‰‹æœºã€‚åœ¨PCç«¯Chromeæµè§ˆå™¨åœ°å€æ è¾“å…¥chrome://inspect iOSç«¯è°ƒè¯•ç½‘é¡µmacOSæ“ä½œç³»ç»Ÿè°ƒè¯•iOSç½‘é¡µæ¯”è¾ƒç®€å•ï¼Œåªéœ€iPhoneè®¾ç½®-&gt;Safari-&gt;é«˜çº§-&gt;æ‰“å¼€Webæ£€æŸ¥å™¨å¼€å…³ï¼Œæ‰“å¼€ç½‘é¡µï¼ŒiPhoneé€šè¿‡æ•°æ®çº¿è¿æ¥Macç”µè„‘ï¼Œæ‰“å¼€Macç«¯Safariï¼Œç‚¹å‡»å¼€å‘-&gt;[ä½ çš„æ‰‹æœº]-&gt;é€‰æ‹©è°ƒè¯•çš„ç½‘é¡µ ä¹Ÿå¯ä»¥ä½¿ç”¨iPhoneæ¨¡æ‹Ÿå™¨è°ƒè¯•ï¼Œå‰æéœ€è¦å®‰è£…Xcodeã€‚ä¸Šå›¾æ­£æ˜¯æ¨¡æ‹Ÿå™¨è°ƒè¯•ã€‚ Windowsæ“ä½œç³»ç»Ÿè¦è°ƒè¯•iOSç«¯ç½‘é¡µï¼Œåˆ™éœ€è¦é€šè¿‡Chromeè°ƒè¯•ï¼Œå¹¶å®‰è£…ä¸€äº›å·¥å…·ä¾¿å¯ä»¥è°ƒè¯•Safariäº† æœ€å¼ºå¤§çš„è°ƒè¯•æ–¹æ³•ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦çš„è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥è¯´æ˜¯æœ€å¸¸ç”¨ï¼Œä¹Ÿæ˜¯æœ€å¼ºå¤§çš„è°ƒè¯•æ–¹æ³•ã€‚ä¸ä»…å¯ä»¥è°ƒè¯•è‡ªå·±å¼€å‘çš„ç½‘é¡µï¼Œä¹Ÿå¯ä»¥hackå…¶ä»–ç½‘é¡µï¼Œä»åˆ«äººé‚£é‡Œå­¦ä¹ ä¸€äº›å‰ç«¯çŸ¥è¯†ã€‚ Chromeæµè§ˆå™¨çš„è°ƒè¯•åŠŸèƒ½æ¯”è¾ƒå¼ºå¤§,å…¶æ‹¥æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä¸ä»…å¯ä»¥æŸ¥çœ‹ã€æ•´ç†ä»£ç ï¼Œè¿˜å¯ä»¥æ£€æŸ¥ç½‘é¡µçš„æ€§èƒ½ã€åŠ¨ç”»ç­‰ç­‰ Firefoxæµè§ˆå™¨è°ƒè¯•åŠŸèƒ½ä¹ŸåŒæ ·å¼ºå¤§ï¼Œå®Œå…¨åª²ç¾Chromeã€‚æœ€æ–°ç‰ˆçš„Firefoxåœ¨æ€§èƒ½ä¸Šæœ‰äº†å¾ˆå¤§çš„æå‡ï¼Œæ¸²æŸ“ç½‘é¡µçš„é€Ÿåº¦èµ¶è¶…Chromeï¼Œèµ„æºå ç”¨å´æ²¡æœ‰Chromeé«˜ã€‚ å›½äº§æµè§ˆå™¨ä¸­ï¼Œå¦‚æœç‹—æµè§ˆå™¨ã€UCæµè§ˆå™¨ç­‰éƒ½æ”¯æŒè°ƒè¯•ï¼Œéƒ¨åˆ†å†…æ ¸ä½¿ç”¨äº†Chromiumï¼Œä¹Ÿå°±æ˜¯Chromeå†…æ ¸ï¼Œè°ƒè¯•åŠŸèƒ½å’ŒChromeå·®ä¸å¤šï¼Œå¯èƒ½æœ‰ç‰ˆæœ¬å»¶è¿Ÿï¼Œç¼ºå°‘éƒ¨åˆ†æ–°åŠŸèƒ½ã€‚","categories":[],"tags":[{"name":"h5  web debug","slug":"h5-web-debug","permalink":"https://yiyan.site/tags/h5-web-debug/"}]},{"title":"WEEXå¼€å‘å®ç°nativeç«¯hotreload","slug":"weex-hotreload","date":"2018-02-27T06:13:31.000Z","updated":"2018-02-27T06:36:52.433Z","comments":true,"path":"2018/02/27/weex-hotreload/","link":"","permalink":"https://yiyan.site/2018/02/27/weex-hotreload/","excerpt":"","text":"ç›¸å…³ç‰ˆæœ¬ï¼šweex-toolkit: 1.2.9playground: 0.5.2.5 åœ¨è¿›è¡Œweexå¼€å‘ï¼Œä¿®æ”¹ä»£ç æ—¶ï¼Œç½‘é¡µèƒ½è¿›è¡Œè‡ªåŠ¨åˆ·æ–°ï¼Œæ–¹ä¾¿å¼€å‘äººå‘˜çœ‹åˆ°æ”¹åŠ¨ã€‚ä½†æ˜¯ï¼Œåœ¨appç«¯ï¼Œç”±äºåŠ è½½çš„ä»…ä»…æ˜¯ä¸šåŠ¡ä»£ç çš„jsæ–‡ä»¶ï¼Œä¸èƒ½å®ç°è‡ªåŠ¨åˆ·æ–°ã€‚ åœ¨å®˜æ–¹æä¾›çš„playground appä¸­ï¼Œåœ¨ç•Œé¢ä¸Šæ·»åŠ äº†åˆ·æ–°æŒ‰é’®ï¼Œæ¥æ‰‹åŠ¨åˆ·æ–°ã€‚butâ€¦æœ‰ç‚¹æ‡’ï¼Œæƒ³æƒ³å…¶ä»–åŠæ³•ã€‚ åœ¨playgroundçš„ä»£ç ä¸­å‘ç°äº†hotreoloadçš„ç›¸å…³ä»£ç ï¼šWXPageActivity.java1234567891011121314151617181920212223242526272829 @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_wxpage); setCurrentWxPageActivity(this); ... if(WXPAGE.equals(mUri.getScheme())|| ... startHotRefresh(); ... &#125;else if (TextUtils.equals(\"http\", mUri.getScheme()) || TextUtils.equals(\"https\", mUri.getScheme())) &#123; ... startHotRefresh(); &#125; ... &#125;/** * hot refresh */ private void startHotRefresh() &#123; try &#123; String host = new URL(mUri.toString()).getHost(); String wsUrl = \"ws://\" + host + \":8082\"; mWXHandler.obtainMessage(Constants.HOT_REFRESH_CONNECT, 0, 0, wsUrl).sendToTarget(); &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; &#125; è™½ç„¶æœ‰hot refreshçš„ä»£ç ï¼Œä½†æ˜¯æ²¡ç”¨ã€‚å› ä¸ºstartHotRefresh()ä¸­ç›‘å¬çš„æ˜¯String wsUrl = &quot;ws://&quot; + host + &quot;:8082&quot;; 8082ç«¯å£ï¼Œè€Œæˆ‘ä»¬çš„weex-toolkitåˆ›å»ºçš„é¡¹ç›®æ²¡æœ‰åˆ›å»ºç›¸åº”çš„socket serverã€‚ ä¼°è®¡å®˜æ–¹å¡«å‘åªå¡«äº†ä¸€åŠã€‚æ€ä¹ˆè‚¥å››ï¼ï¼Ÿ é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°webpack-dev-serveråˆ›å»ºäº†websocket server. æœ‰æˆäº†ï¼æˆ‘ä»¬å¯ä»¥åœ¨appç«¯åˆ›å»ºwebscoketä¸webpack-dev-serverè¿æ¥ã€‚ä¸‹é¢æˆ‘ä»¬å¯¹webpack-dev-serveræºç è¿›è¡Œåˆ†æ æ‰“å¼€node_modulesæ–‡ä»¶å¤¹ä¸‹çš„webpack-dev-server.æˆ‘ä»¬ä¸»è¦çœ‹client/index.jså’Œlib/Server.jsæ–‡ä»¶ï¼š client/index.jsè·å–webscoketåœ°å€å’Œç«¯å£ï¼Œèµ‹å€¼ä¸ºurlPartsï¼š1234567891011121314151617181920var urlParts = void 0;var hotReload = true;if (typeof window !== 'undefined') &#123; var qs = window.location.search.toLowerCase(); hotReload = qs.indexOf('hotreload=false') === -1;&#125;if (typeof __resourceQuery === 'string' &amp;&amp; __resourceQuery) &#123; // If this bundle is inlined, use the resource query to get the correct url. urlParts = url.parse(__resourceQuery.substr(1));&#125; else &#123; // Else, get the url from the &lt;script&gt; this file was called with. var scriptHost = getCurrentScriptSource(); // eslint-disable-next-line no-useless-escape scriptHost = scriptHost.replace(/\\/[^\\/]+$/, ''); urlParts = url.parse(scriptHost || '/', false, true);&#125;if (!urlParts.port || urlParts.port === '0') &#123; urlParts.port = self.location.port;&#125; åˆå§‹åŒ–å¯¹scoketæ¶ˆæ¯çš„å¤„ç†ï¼š123456789101112131415161718var onSocketMsg = &#123; hot: function hot() &#123; _hot = true; log.info('[WDS] Hot Module Replacement enabled.'); &#125;, invalid: function invalid() &#123; log.info('[WDS] App updated. Recompiling...'); // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain. if (useWarningOverlay || useErrorOverlay) overlay.clear(); sendMsg('Invalid'); &#125;, ... 'content-changed': function contentChanged() &#123; log.info('[WDS] Content base changed. Reloading...'); self.location.reload(); &#125;, ...&#125;; é“¾æ¥websocketæœåŠ¡å™¨ï¼š123456789var socketUrl = url.format(&#123; protocol: protocol, auth: urlParts.auth, hostname: hostname, port: urlParts.port, pathname: urlParts.path == null || urlParts.path === '/' ? '/sockjs-node' : urlParts.path&#125;);socket(socketUrl, onSocketMsg); ä¸Šæ–‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œwebscoketå®¢æˆ·ç«¯æ¥æ”¶åˆ°content-changedæ¶ˆæ¯åself.location.reload();å¯¹é¡µé¢è¿›è¡Œåˆ·æ–°ã€‚ æˆ‘ä»¬å†çœ‹çœ‹websocketæœåŠ¡å™¨ç«¯æ˜¯å¦å‘é€äº†content-changedæ¶ˆæ¯ã€‚ lib/Server.jså‘é€content-changedæ¶ˆæ¯ï¼š123456789101112131415161718192021222324Server.prototype._watch = function (watchPath) &#123; // duplicate the same massaging of options that watchpack performs // https://github.com/webpack/watchpack/blob/master/lib/DirectoryWatcher.js#L49 // this isn't an elegant solution, but we'll improve it in the future const usePolling = this.watchOptions.poll ? true : undefined; // eslint-disable-line no-undefined const interval = typeof this.watchOptions.poll === 'number' ? this.watchOptions.poll : undefined; // eslint-disable-line no-undefined const options = &#123; ignoreInitial: true, persistent: true, followSymlinks: false, depth: 0, atomic: false, alwaysStat: true, ignorePermissionErrors: true, ignored: this.watchOptions.ignored, usePolling, interval &#125;; const watcher = chokidar.watch(watchPath, options).on('change', () =&gt; &#123; this.sockWrite(this.sockets, 'content-changed'); &#125;); this.contentBaseWatchers.push(watcher);&#125;; ç°åœ¨å¼„æ¸…æ¥šäº†webpack-dev-serverçš„hotreloadã€‚è¯¶â€¦æˆ‘ä»¬ä¼¼ä¹è·‘è¿œäº†ã€‚ appå®¢æˆ·ç«¯éœ€è¦ç›‘å¬websocket serverï¼Œå½“æ”¶åˆ°content-changedæ¶ˆæ¯æ—¶ï¼Œå¯¹é¡µé¢è¿›è¡Œåˆ·æ–°ã€‚ Androidå®¢æˆ·ç«¯é“¾æ¥webpack-dev-serverçš„socketæœåŠ¡å™¨ç›´æ¥é“¾æ¥host:8081ç«¯å£æ— æ³•æˆåŠŸã€‚åœ¨åˆ†ælib/Server.jsä»£ç ï¼Œå‘ç°äº†è¿™æ ·ä¸€å¥ä»£ç ï¼š12345...sockServer.installHandlers(this.listeningApp, &#123; prefix: '/sockjs-node'&#125;);... å†çœ‹webpacke-dev-serverä½¿ç”¨çš„socketåº“sockjs-nodeï¼Œå‘ç°äº†è¿™æ ·ä¸€æ®µè¯ï¼š äºæ˜¯ï¼Œå°†Androidå®¢æˆ·ç«¯çš„socketé“¾æ¥åœ°å€æ”¹ä¸ºws://host:8081/sockjs-node/websocketã€‚æˆåŠŸäº†ï¼ï¼ï¼socketé“¾æ¥æ‰“é€šã€‚Androidç«¯éƒ¨åˆ†ä»£ç ï¼š123456789101112private void startHotRefresh() &#123; try&#123; URL host = new URL(mUri.toString()); String wsUrl = \"ws://\" + host.getHost() + \":\" + host.getPort() + \"/sockjs-node/websocket\"; if (host.getPort() &lt; 0) &#123; wsUrl = \"ws://\" + host.getHost() + \"/sockjs-node/websocket\"; &#125; ... &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; &#125; èµ°åˆ°è¿™é‡Œï¼Œåªå‰©ä¸‹å¯¹æ¶ˆæ¯çš„å¤„ç†ã€‚ä¿®æ”¹jsä»£ç ï¼Œåœ¨playgroundçš„HotRefreshManager.javaä¸­æ‰“å°æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œå‘ç°æ²¡æœ‰content-changed,æ¥æ”¶åˆ°çš„éƒ½æ˜¯{&quot;type&quot;:&quot;progress-update&quot;,&quot;data&quot;:{&quot;percent&quot;:95,&quot;msg&quot;:&quot;emitting&quot;}}ã€‚ä¸‡å¹¸çš„æ˜¯æ¶ˆæ¯æœ€åè·Ÿäº†ä¸€ä¸ª{&quot;type&quot;:&quot;ok&quot;}ã€‚æ‰€ä»¥ï¼Œæš‚ä¸”å°†{&quot;type&quot;:&quot;ok&quot;}ä½œä¸ºè§¦å‘åˆ·æ–°çš„ç‚¹ã€‚ åœ¨HotRefreshManager.WXWebSocketListener:12345678@Overridepublic void onMessage(WebSocket webSocket, String text) &#123; Log.i(\"Receiving : \", text); if (text.equals(\"&#123;\\\"type\\\":\\\"ok\\\"&#125;\")) &#123; Log.i(\"onMessage\", \"done\"); mHandler.obtainMessage(Constants.HOT_REFRESH_REFRESH).sendToTarget(); &#125;&#125; æœ€åï¼ŒæˆåŠŸå®ç°Androidç«¯è‡ªåŠ¨åˆ·æ–°é¡µé¢çš„æ•ˆæœã€‚ æ–‡ä¸­è¿˜æœ‰ä¸å®Œå–„çš„åœ°æ–¹ï¼Œå¾…åç»­è¡¥å……ã€‚","categories":[],"tags":[]},{"title":"JavaScriptçš„å†…å­˜ç®¡ç†ï¼Œä»¥åŠå¦‚ä½•å¤„ç†4ç§å¸¸è§çš„å†…å­˜æ³„æ¼","slug":"js-memory-manager-md","date":"2018-02-27T03:12:22.000Z","updated":"2018-02-27T05:51:06.670Z","comments":true,"path":"2018/02/27/js-memory-manager-md/","link":"","permalink":"https://yiyan.site/2018/02/27/js-memory-manager-md/","excerpt":"","text":"JavaScriptçš„å†…å­˜ç®¡ç†ï¼Œä»¥åŠå¦‚ä½•å¤„ç†4ç§å¸¸è§çš„å†…å­˜æ³„æ¼èµ·åˆä»ä¸€ä¸ªå…¬ä¼—å·ä¸­çœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ‹œè¯»çš„æ—¶å€™å‘ç°æœ‰ä¸€ä¸¤å¤„åœ°æ–¹æœ‰ç‚¹éš¾æ‡‚ã€‚äºæ˜¯å°è¯•ç¿»è¯‘ä¸€ä¸‹åŸæ–‡ï¼ŒåŸæ–‡åœ°å€ä¸ºHow JavaScript works: memory management + how to handle 4 common memory leaks ä½œè€…é’ˆå¯¹JavaScriptå†™äº†ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œç¬¬ä¸‰ç¯‡ä¾¿æ˜¯æ­¤æ–‡ç« ã€‚ç¬¬ä¸€ç¯‡å’Œç¬¬äºŒç¯‡åˆ†åˆ«æ˜¯How JavaScript works: an overview of the engine, the runtime, and the call stackã€How JavaScript works: inside the V8 engine + 5 tips on how to write optimized code æ–‡ç« å¼€å¤´è®²å™äº†ä¸€äº›å†…å­˜æ–¹é¢çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™é‡Œç•¥è¿‡ç›´æ¥å¼€è½¦ã€‚ JavaScriptçš„å†…å­˜åˆ†é…JavaScriptå¯¹å†…å­˜çš„åˆ†é…è¿›è¡Œè‡ªåŠ¨ç®¡ç†ï¼Œè€Œä¸åŒäºCè¯­è¨€éœ€è¦å¼€å‘è€…ç®¡ç†ã€‚123456789101112131415var n = 374; // ä¸ºæ•°å­—åˆ†é…å†…å­˜var s = 'sessionstack'; // ä¸ºå­—ç¬¦åˆ†é…å†…å­˜var o = &#123; a: 1, b: null&#125;; // ä¸ºobjectå’Œå…¶å±æ€§åˆ†é…å†…å­˜var a = [1, null, 'str']; // åˆ†é…æ•°ç»„ç©ºé—´function f(a) &#123; return a + 3;&#125; // ä¸ºæ–¹æ³•åˆ†é…å†…å­˜ï¼ˆæ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯ä»¥å›è°ƒçš„objectï¼‰// å‡½æ•°è¡¨è¾¾å¼ä¹Ÿä½œä¸ºobjectæ¥åˆ†é…å†…å­˜someElement.addEventListener('click', function() &#123; someElement.style.backgroundColor = 'blue';&#125;, false); ä¸€äº›å‡½æ•°çš„è¿”å›ç»“æœä¹Ÿå½“ä½œobjectåˆ†é…å†…å­˜ï¼š123var d = new Date(); //åˆ†é…ä¸€ä¸ªDate objectvar e = document.createElement('div'); // åˆ†é…ä¸€ä¸ªDOM å…ƒç´  ä¸€äº›æ–¹æ³•ä¹Ÿèƒ½åˆ†é…æ–°çš„å€¼æˆ–objectå†…å­˜ç©ºé—´ï¼š12345678var s1 = 'sessionstack';var s2 = s1.substr(0, 3); // s2 æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦å˜é‡// ç”±äºå·²åˆ†é…å†…å­˜ç©ºé—´çš„å­—ç¬¦,åœ¨å†…å­˜ç©ºé—´ä¸­å€¼æ˜¯ä¸å˜çš„// JavaScriptå¯èƒ½ä¸ä¼šç»™2åˆ†é…æ–°çš„å†…å­˜ç©ºé—´,è€Œæ˜¯ä»…ä»…è®°å½•[0, 3]çš„åŒºé—´.var a1 = ['str1', 'str2'];var a2 = ['str3', 'str4'];var a3 = a1.concat(a2);// æ•°ç»„æ‹¼æ¥å°†ä¼šåˆ†é…æ–°çš„å†…å­˜ç©ºé—´ å½“å†…å­˜ä¸å†éœ€è¦æ—¶ï¼Œå†…å­˜ç©ºé—´ä¼šè¢«é‡Šæ”¾å¤§å¤šæ•°çš„å†…å­˜ç®¡ç†é—®é¢˜éƒ½å‡ºç°åœ¨è¿™ä¸ªé˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ¯”è¾ƒéš¾çš„æ˜¯å¦‚ä½•åˆ¤æ–­å†…å­˜ç©ºé—´å¯ä»¥é‡Šæ”¾æ‰äº†ã€‚è¿™é€šå¸¸éœ€è¦å¼€å‘è€…ç¡®å®šå“ªäº›å†…å­˜ä¸å†éœ€è¦ï¼Œç„¶åå°†å…¶é‡Šæ”¾ã€‚é«˜ç­‰çº§çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¼šé›†æˆåƒåœ¾å›æ”¶å™¨ã€‚åƒåœ¾å›æ”¶å™¨å¯¹å†…å­˜çš„åˆ†é…å’Œä½¿ç”¨è¿›è¡Œè·Ÿè¸ªã€‚å½“åˆ†é…çš„å†…å­˜ä¸å†éœ€è¦æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨å°†ä¼šé‡Šæ”¾å†…å­˜ã€‚ ç„¶è€Œï¼Œæ€»æ˜¯æœ‰ä¸€äº›å†…å­˜ç‰‡æ®µï¼Œåƒåœ¾å›æ”¶å™¨çš„ç®—æ³•éš¾ä»¥åˆ¤æ–­å…¶æ˜¯å¦éœ€è¦ã€‚å¤§å¤šæ•°çš„åƒåœ¾å›æ”¶å™¨é€šè¿‡æ”¶é›†ä¸å†è®¿é—®çš„å†…å­˜ï¼Œä¾‹å¦‚æ‰€æœ‰æŒ‡å‘è¯¥å†…å­˜çš„å˜é‡éƒ½å·²ç»ä¸å­˜åœ¨äº†ã€‚ä½†æ˜¯ï¼Œå¯èƒ½å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸€ç›´æŒ‡å‘æŸä¸€å†…å­˜ç©ºé—´ï¼Œè€Œç¨‹åºä¸å†ä½¿ç”¨è¯¥å˜é‡ã€‚ åƒåœ¾å›æ”¶ç”±äºéš¾ä»¥å†³å®šå†…å­˜æ˜¯å¦ç»§ç»­éœ€è¦ï¼Œåƒåœ¾å›æ”¶å™¨éš¾ä»¥æä¾›ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä¼šå¯¹åƒåœ¾å›æ”¶å™¨çš„å›æ”¶ç®—æ³•ä¸€æ¢ç©¶ç«Ÿï¼Œå¹¶å‘ç°å…¶å­˜åœ¨çš„ç¼ºé™·ã€‚ å†…å­˜å¼•ç”¨åƒåœ¾å›æ”¶ç®—æ³•ä¸»è¦ä¾èµ–äºå¼•ç”¨ã€‚ åœ¨å†…å­˜ç®¡ç†è¿™ä¸­ï¼Œå¼•ç”¨æ˜¯ä¸€ä¸ªå¯¹è±¡å¯ä»¥è®¿é—®(æ˜¾å¼æˆ–éšå¼)å¦ä¸€ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼ŒJavaScriptå¯¹è±¡ç»§æ‰¿äº†Object.prototypeçš„å±æ€§å’Œæ–¹æ³•ã€‚å…¶ç»§æ‰¿Objectã€‚prototypeä¾¿æ˜¯éšå¼å¼•ç”¨ï¼Œå±æ€§å’Œæ–¹æ³•ä¾¿æ˜¯æ˜¾å¼ç»§æ‰¿ã€‚ åƒåœ¾å›æ”¶ç®—æ³•ï¼šå¼•ç”¨è®¡æ•°ï¼ˆreference-countingï¼‰rcåƒåœ¾å›æ”¶æ˜¯æœ€ç®€å•çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚å¦‚æœæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º0åˆ™è¿™ä¸ªå¯¹è±¡æ˜¯å¯ä»¥å›æ”¶çš„ã€‚ çœ‹ä¸€ä¸‹ä»¥ä¸‹ä»£ç ï¼š12345678910111213141516var o1 = &#123; o2: &#123; x: 1 &#125;&#125;// åˆ›å»ºäº†2ä¸ªå¯¹è±¡ã€‚å…¶ä¸­ï¼Œâ€˜o2â€™è¢«'o1'å¯¹è±¡å¼•ç”¨ï¼Œä½œä¸º'o1'çš„å±æ€§// 'o1'å’Œ'o2'éƒ½ä¸èƒ½è¢«å›æ”¶var o3 = o1; //o3å¼•ç”¨o1o1 = 1; // o1é‡æ–°èµ‹å€¼ï¼Œo1åŸæ¥çš„å†…å­˜ç°åªè¢«o3å¼•ç”¨var o4 = o3.o2 // o4å¼•ç”¨o2å±æ€§ã€‚ç°åœ¨o2å±æ€§åœ¨ä¸¤å¤„è¢«å¼•ç”¨o3 = '374' // åŸo1çš„å†…å­˜ç©ºé—´ï¼Œè¢«å¼•ç”¨æ¬¡æ•°ä¸º0ã€‚ä½†æ˜¯å…¶å±æ€§o2ä»ç„¶è¢«o4å¼•ç”¨ï¼Œä¸èƒ½è¢«å›æ”¶o4 = null // o2ä¸å†è¢«o4å¼•ç”¨ï¼ŒåŸo1å¼•ç”¨æ•°ä¸º0ï¼Œç°åœ¨å¯ä»¥è¢«å›æ”¶äº† å†…å­˜æ³„æ¼ï¼šå¾ªç¯å¼•ç”¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ã€‚æ–¹æ³•è°ƒç”¨å®Œåï¼Œä¸¤ä¸ªå¯¹è±¡å°†ä¸å†éœ€è¦ï¼Œå¯ä»¥è¢«é‡Šæ”¾ã€‚ç„¶è€Œï¼Œrcåƒåœ¾å›æ”¶ç®—æ³•è®¤ä¸ºæ¯ä¸ªå¯¹è±¡éƒ½è¢«å¼•ç”¨äº†ï¼Œæ‰€ä»¥ä¸ä¼šå›æ”¶ã€‚123456function f() &#123; var o1 = &#123;&#125; var o2 = &#123;&#125; o1.p = o2 // o1å¼•ç”¨o2 o2.p = o1 // o2å¼•ç”¨o1, è¿™å°±äº§ç”Ÿäº†å¾ªç¯å¼•ç”¨&#125; åƒåœ¾å›æ”¶ç®—æ³•ï¼šæ ‡è®°&amp;æ‰«æï¼ˆmark&amp;sweepï¼‰ä¸ºäº†åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥é‡Šæ”¾ï¼Œm&amp;sç®—æ³•æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è¾¾ã€‚ m&amp;sç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š åƒåœ¾å›æ”¶å™¨é¦–å…ˆå»ºç«‹äº†ä¸€ä¸ªrootsåˆ—è¡¨ã€‚rootsé€šå¸¸æ˜¯ä¸€äº›å­˜åœ¨å¼•ç”¨çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥ç†è§£ä¸ºå¼•ç”¨çš„å…¥å£ã€‚åœ¨JavaScriptä¸­ï¼Œâ€œwindowâ€å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¯ä»¥ä½œä¸ºå…¥å£çš„å…¨å±€å¯¹è±¡ æ‰€æœ‰çš„rootéƒ½è¢«æ£€æŸ¥ï¼Œå¹¶è¢«æ ‡è®°ä¸ºæ´»åŠ¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯éåƒåœ¾ã€‚åŒæ—¶ï¼Œæ‰€æœ‰rootçš„æ‰€æœ‰å­©å­èŠ‚ç‚¹éƒ½ä¹Ÿè¢«é€’å½’æ£€æŸ¥ã€‚æ‰€æœ‰èƒ½ä»rootå¯è¾¾çš„å¯¹è±¡éƒ½ä¸æ˜¯åƒåœ¾ã€‚ å‰©ä½™æ²¡æœ‰æ²¹è¢«æ ‡è®°ä¸ºæ´»åŠ¨çŠ¶æ€çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½œä¸ºåƒåœ¾å›æ”¶ã€‚åƒåœ¾å›æ”¶å™¨å¯ä»¥é‡Šæ”¾ç›¸åº”çš„å†…å­˜ï¼Œå½’è¿˜ç»™ç³»ç»Ÿã€‚ m&amp;sç®—æ³•è¦ä¼˜äºå‰é¢æåˆ°çš„å¼•ç”¨è®¡æ•°ç®—æ³•ï¼Œå› ä¸ºå¼•ç”¨è®¡æ•°ç®—æ³•ä¼šå¯¼è‡´ä¸€äº›å¯¹è±¡ä»rootä¸å¯è¾¾ï¼Œè€Œå…¶åˆè¢«å¼•ç”¨äº†ã€‚m&amp;sç®—æ³•å¯ä»¥é‡Šæ”¾éƒ¨åˆ†å­˜åœ¨å¾ªç¯å¼•ç”¨çš„å†…å­˜ç©ºé—´ã€‚ æˆªæ­¢2012å¹´ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨éƒ½é‡‡å–äº†m&amp;såƒåœ¾å›æ”¶æœºåˆ¶ã€‚è¿™é‡Œ è¯¦ç»†ä»‹ç»äº†åƒåœ¾æœºåˆ¶ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬m&amp;såƒåœ¾å›æ”¶æœºåˆ¶åŠå…¶ä¼˜åŒ–ã€‚ å¾ªç¯å¼•ç”¨ä¸å†æ˜¯é—®é¢˜åœ¨ä¸Šé¢çš„ç¬¬ä¸€ä¾‹å­ä¸­ï¼Œæ–¹æ³•è°ƒç”¨å®Œåï¼Œæ–¹æ³•ä¸­çš„ä¸¤ä¸ªå¯¹è±¡ä¸èƒ½ä»rootå¯è¾¾ï¼Œå°†è¢«åƒåœ¾å›æ”¶æ ‡è®°ä¸ºä¸å¯è¾¾ï¼Œè¿›è€Œè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚ åƒåœ¾å›æ”¶æœºåˆ¶çš„ç¼ºé™·è™½ç„¶åƒåœ¾å›æ”¶å™¨èƒ½å¤Ÿè‡ªåŠ¨å›æ”¶ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºï¼Œä½†æ˜¯ï¼Œåƒåœ¾å›æ”¶å™¨æ‰§è¡Œå›æ”¶çš„æ—¶æœºæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸çŸ¥é“åƒåœ¾å›æ”¶ä»€ä¹ˆæ—¶å€™ä¼šæ‰§è¡Œm&amp;sæµç¨‹ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œå³ä½¿é‡Œåˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œåªè¦æµè§ˆå™¨çš„å¯ç”¨å†…å­˜è¶³å¤Ÿï¼Œåƒåœ¾å›æ”¶å™¨å¯èƒ½å°±ä¸ä¼šæ‰§è¡Œå›æ”¶æ“ä½œã€‚ ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼å†…å­˜æ³„æ¼å¯ä»¥å®šä¹‰ä¸ºï¼šåº”ç”¨ç¨‹åºä¸å†éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œç”±äºæŸç§åŸå› ï¼Œå†…å­˜ç©ºé—´æ²¡æœ‰è¢«ç³»ç»Ÿå›æ”¶ï¼Œæ²¡æœ‰å›åˆ°ç³»ç»Ÿçš„å¯ç”¨å†…å­˜æ± ä¸­ã€‚ ç¼–ç¨‹è¯­è¨€é€šå¸¸æœ‰å¤šç§æ–¹æ³•ç®¡ç†å†…å­˜ã€‚ä½†æ˜¯ï¼Œç¼–ç¨‹è¯­è¨€å¾ˆéš¾åˆ¤æ–­æŸä¸€å†…å­˜ç©ºé—´æ˜¯å¦è¢«ä½¿ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰å¼€å‘è€…èƒ½æ˜ç¡®çš„å‘Šè¯‰æµè§ˆå™¨æŸä¸€å†…å­˜ç©ºé—´æ˜¯å¦èƒ½è¢«ç³»ç»Ÿå›æ”¶ã€‚ç¼–ç¨‹è¯­è¨€ä¸ºå¼€å‘æä¾›äº†ä¸€äº›æ‰§è¡Œç›¸åº”æ“ä½œçš„åŠŸèƒ½ï¼Œå…¶ä»–åˆ™éœ€è¦å¼€å‘è€…è‡ªèº«æ˜ç¡®ä»€ä¹ˆæ—¶å€™ä½¿ç”¨äº†å†…å­˜ã€‚Wikipediaä¸Šæœ‰ä¸€äº›å…³äºè‡ªåŠ¨å’Œäººå·¥ç®¡ç†å†…å­˜çš„æ–‡ç« ã€‚ å››ç§å¸¸è§çš„å†…å­˜æ³„æ¼1. å…¨å±€å˜é‡JavaScriptå¤„ç†æ²¡æœ‰ç”³æ˜çš„å˜é‡æ–¹å¼æ˜¯å°†å…¶ä½œä¸ºæµè§ˆå™¨çš„windowçš„å±æ€§ï¼š123function foo(arg) &#123; bar = 'some text'&#125; ç­‰åŒäº:123function foo(arg) &#123; window.bar = 'some text'&#125; æµè§ˆå™¨æµ‹è¯•æ•ˆæœï¼š æ‰€ä»¥ï¼Œå¦‚æœä¸å°å¿ƒå¿˜è®°ä½¿ç”¨varæˆ–letç­‰ç­‰ç”³æ˜barå˜é‡ï¼Œå°†ä¼šåœ¨æ–¹æ³•å†…åˆ›å»ºå…¨å±€å˜é‡ã€‚ä½¿ç”¨ESlintè¿›è¡Œä»£ç è§„èŒƒæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ å¦ä¸€ä¸å°å¿ƒåˆ›å»ºå…¨å±€å˜é‡çš„é€”å¾„æ˜¯é€šè¿‡this ï¼š 12345function foo() &#123; this.var1 = 'potential accidental global'&#125;// è°ƒç”¨fooæ–¹æ³•æ—¶ï¼Œâ€˜thisâ€™æŒ‡å‘å…¨å±€å¯¹è±¡windowï¼Œè€Œä¸æ˜¯undefinedfoo() ä¸ºé¿å…è¿™æ ·çš„é”™è¯¯å‘ç”Ÿï¼Œå»ºè®®åœ¨jsæ–‡ä»¶ç¬¬ä¸€è¡ŒåŠ å…¥use strictã€‚è¿™èƒ½é˜»æ­¢æ„å¤–äº§ç”Ÿå…¨å±€å˜é‡ã€‚æœ‰å…³strictæ¨¡å¼çš„æ›´å¤šå†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹è¿™é‡Œ ä¸¥æ ¼æ¨¡å¼ã€‚ åœ¨ç”³æ˜å…¨å±€å˜é‡æ—¶å»ºè®®èµ‹å€¼ä¸ºnullï¼Œåœ¨ç¨‹åºéœ€è¦çš„åœ°æ–¹å†åˆ†é…å†…å­˜ã€‚ 2. é—æ¼è®¡æ—¶å™¨æˆ–è€…å›è°ƒå‡½æ•°JavaScriptçš„setIntervalå’ŒsetTimeoutæ–¹æ³•ï¼Œå¦‚æœä¸ä¸»åŠ¨å›æ”¶éƒ½å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ å…³äºå›è°ƒå‡½æ•°å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼ŒåŸæ–‡æåˆ°äº†addEventListenerå’ŒremoveEventListenerå‡½æ•°ã€‚ç„¶è€Œï¼Œç°ä»£çš„æµè§ˆå™¨éƒ½ä¼šåœ¨DOMè¢«é”€æ¯æ—¶ï¼Œå…¶ä¸Šç»‘å®šçš„äº‹ä»¶ä¹Ÿéƒ½ä¼šè¢«å›æ”¶ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚addEventListeneråï¼Œå¿…é¡»removeEventListeneråæ‰èƒ½å›æ”¶å†…å­˜ã€‚ 3. é—­åŒ…JavaScriptå¼€å‘çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§å°±æ˜¯é—­åŒ…ï¼šå†…éƒ¨çš„æ–¹æ³•èƒ½å¤Ÿè®¿é—®åˆ°å¤–éƒ¨ï¼ˆé—­ç¯ï¼‰æ–¹æ³•çš„å˜é‡ã€‚ç”±äºJavaScriptè¿è¡Œæ—¶çš„å…·ä½“å®ç°ï¼Œä¸‹é¢çš„ä»£ç å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼š 123456789101112131415161718var theThing = nullvar replaceThing = function () &#123; var originalThing = theThing var unused = function () &#123; if (originalThing) // å¼•ç”¨originalThing console.log('hi') &#125; theThing = &#123; longStr: new Array(1000000).join('*'), someMethod: function () &#123; console.log('message') &#125; &#125;&#125;setInterval(replaceThine, 1000) è¯¥ä»£ç æ‰§è¡Œå†…å®¹æ˜¯ï¼šæ¯æ¬¡replaceThingæ–¹æ³•è¢«è°ƒç”¨ï¼ŒtheThingéƒ½è·å–åˆ°ä¸€ä¸ªåŒ…å«å¤§æ•°ç»„å±æ€§å’Œé—­åŒ…ï¼ˆå‡½æ•°ï¼‰ã€‚åŒæ—¶ï¼Œå˜é‡unusedè·å¾—ä¸€ä¸ªå¼•ç”¨originalThingçš„é—­åŒ…ã€‚æ˜¯ä¸æ˜¯æœ‰ç‚¹æ‡µäº†ï¼Ÿå…¶å®ï¼Œåªè¦è®°ä½ä¸€ç‚¹ï¼šå¯¹å­é—­åŒ…è€Œè¨€ï¼ŒåŒä¸€çˆ¶é—­åŒ…çš„å†…å­˜ç©ºé—´æ˜¯å…±äº«çš„ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œunusedæ˜¯å¯ä»¥è®¿é—®åˆ°someMethodçš„ã€‚åœ¨æ–¹æ³•replaceThingæ–¹æ³•å¤–é¢ï¼ŒtheThingå¯ä»¥è°ƒç”¨someMethodã€‚ç”±äºsomeMethodä¸unusedå…±äº«é—­åŒ…åŒºåŸŸï¼Œunusedå¯¹originalThingçš„å¼•ç”¨ï¼Œå¯¼è‡´someMethodä¸€ç›´ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼Œé˜»æ­¢äº†å…¶è¢«å›æ”¶ï¼Œå³ä½¿unusedæ–¹æ³•æ²¡æœ‰è¢«å›è°ƒã€‚ ä»”ç»†ä¸€æƒ³ï¼ŒåŸæ–‡çš„æ„æ€åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š éšç€å®šæ—¶å™¨çš„æ‰§è¡Œï¼Œä¸æ–­çš„æœ‰æ–°çš„å†…å­˜ç©ºé—´è¢«åˆ†é…ï¼ŒåŒæ—¶è€çš„å†…å­˜ç©ºé—´ä¾ç„¶è¢«å¼•ç”¨ï¼Œå¾—ä¸åˆ°é‡Šæ”¾ã€‚è¿™ä¸ªé—®é¢˜æ˜¯Meteorå›¢é˜Ÿå‘ç°çš„ 4. DOMå¤–å¼•ç”¨æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦å­˜å‚¨ä¸€äº›DOMçš„å¼•ç”¨ï¼Œä»¥ä¾¿å¤šæ¬¡è®¿é—®ã€‚ä½†æ˜¯ï¼Œå½“å¼•ç”¨çš„DOMå…ƒç´ è¢«ä»é¡µé¢ç§»é™¤æ—¶ï¼Œæˆ‘ä»¬å­˜å‚¨çš„DOMå¼•ç”¨å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ä¾‹å¦‚ï¼š12345678910111213var elements = &#123; button: document.getElementById('button'), image: document.getElementById('image')&#125;function doStuff() &#123; elements.image.src = 'http://example.com/image_name.png'&#125;function removeImage() &#123; document.body.removeChild(document.getElementById('image')) // è¿™æ—¶ï¼Œæˆ‘ä»¬ä¾ç„¶åœ¨å…¨å±€å˜é‡elementsä¸­å¼•ç”¨äº†imageï¼Œä¹Ÿå°±æ˜¯ï¼Œimageå…ƒç´ ä»ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶&#125; æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¼•ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„å¯¹DOMçš„å¼•ç”¨ã€‚","categories":[],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://yiyan.site/tags/JavaScript/"}]}]}